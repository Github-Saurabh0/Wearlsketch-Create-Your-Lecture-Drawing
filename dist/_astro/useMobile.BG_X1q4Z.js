import{r as N,a as wc,R as _t,c as Oc,g as Pc,b as ns}from"./index.C-6U_n5O.js";import{r as is,j as lt,R as Sc}from"./index.DGnL12i5.js";import{g as Xa,u as Br,d as Pn}from"./createLucideIcon.LhHHhSz9.js";function oe(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];throw new Error(typeof e=="number"?"[MobX] minified error nr: "+e+(t.length?" "+t.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+e)}var Ec={};function Ti(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:Ec}var as=Object.assign,mi=Object.getOwnPropertyDescriptor,ct=Object.defineProperty,Ii=Object.prototype,Ja=[];Object.freeze(Ja);var ho={};Object.freeze(ho);var Ac=typeof Proxy<"u",jc=Object.toString();function os(){Ac||oe("Proxy not available")}function us(e){var n=!1;return function(){if(!n)return n=!0,e.apply(this,arguments)}}var Dr=function(){};function $e(e){return typeof e=="function"}function dr(e){var n=typeof e;switch(n){case"string":case"symbol":case"number":return!0}return!1}function ki(e){return e!==null&&typeof e=="object"}function Kt(e){if(!ki(e))return!1;var n=Object.getPrototypeOf(e);if(n==null)return!0;var t=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return typeof t=="function"&&t.toString()===jc}function ss(e){var n=e?.constructor;return n?n.name==="GeneratorFunction"||n.displayName==="GeneratorFunction":!1}function Di(e,n,t){ct(e,n,{enumerable:!1,writable:!0,configurable:!0,value:t})}function ls(e,n,t){ct(e,n,{enumerable:!1,writable:!1,configurable:!0,value:t})}function qt(e,n){var t="isMobX"+e;return n.prototype[t]=!0,function(r){return ki(r)&&r[t]===!0}}function $r(e){return e!=null&&Object.prototype.toString.call(e)==="[object Map]"}function xc(e){var n=Object.getPrototypeOf(e),t=Object.getPrototypeOf(n),r=Object.getPrototypeOf(t);return r===null}function wt(e){return e!=null&&Object.prototype.toString.call(e)==="[object Set]"}var cs=typeof Object.getOwnPropertySymbols<"u";function Cc(e){var n=Object.keys(e);if(!cs)return n;var t=Object.getOwnPropertySymbols(e);return t.length?[].concat(n,t.filter(function(r){return Ii.propertyIsEnumerable.call(e,r)})):n}var Ri=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:cs?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames;function fs(e){return e===null?null:typeof e=="object"?""+e:e}function Pt(e,n){return Ii.hasOwnProperty.call(e,n)}var Tc=Object.getOwnPropertyDescriptors||function(n){var t={};return Ri(n).forEach(function(r){t[r]=mi(n,r)}),t};function Ue(e,n){return!!(e&n)}function qe(e,n,t){return t?e|=n:e&=~n,e}function cu(e,n){(n==null||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function Ic(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Dc(r.key),r)}}function Hr(e,n,t){return n&&Ic(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Rr(e,n){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t)return(t=t.call(e)).next.bind(t);if(Array.isArray(e)||(t=Rc(e))||n){t&&(e=t);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ft(){return Ft=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Ft.apply(null,arguments)}function ds(e,n){e.prototype=Object.create(n.prototype),e.prototype.constructor=e,Za(e,n)}function Za(e,n){return Za=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},Za(e,n)}function kc(e,n){if(typeof e!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var r=t.call(e,n);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Dc(e){var n=kc(e,"string");return typeof n=="symbol"?n:n+""}function Rc(e,n){if(e){if(typeof e=="string")return cu(e,n);var t={}.toString.call(e).slice(8,-1);return t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set"?Array.from(e):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?cu(e,n):void 0}}var st=Symbol("mobx-stored-annotations");function ft(e){function n(t,r){if(En(r))return e.decorate_20223_(t,r);Sn(t,r,e)}return Object.assign(n,e)}function Sn(e,n,t){Pt(e,st)||Di(e,st,Ft({},e[st])),Fc(t)||(e[st][n]=t)}function Nc(e){return Pt(e,st)||Di(e,st,Ft({},e[st])),e[st]}function En(e){return typeof e=="object"&&typeof e.kind=="string"}var Q=Symbol("mobx administration"),$t=function(){function e(t){t===void 0&&(t="Atom"),this.name_=void 0,this.flags_=0,this.observers_=new Set,this.lastAccessedBy_=0,this.lowestObserverState_=he.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=t}var n=e.prototype;return n.onBO=function(){this.onBOL&&this.onBOL.forEach(function(r){return r()})},n.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(r){return r()})},n.reportObserved=function(){return Cs(this)},n.reportChanged=function(){Ne(),Ts(this),Me()},n.toString=function(){return this.name_},Hr(e,[{key:"isBeingObserved",get:function(){return Ue(this.flags_,e.isBeingObservedMask_)},set:function(r){this.flags_=qe(this.flags_,e.isBeingObservedMask_,r)}},{key:"isPendingUnobservation",get:function(){return Ue(this.flags_,e.isPendingUnobservationMask_)},set:function(r){this.flags_=qe(this.flags_,e.isPendingUnobservationMask_,r)}},{key:"diffValue",get:function(){return Ue(this.flags_,e.diffValueMask_)?1:0},set:function(r){this.flags_=qe(this.flags_,e.diffValueMask_,r===1)}}])}();$t.isBeingObservedMask_=1;$t.isPendingUnobservationMask_=2;$t.diffValueMask_=4;var vo=qt("Atom",$t);function gi(e,n,t){n===void 0&&(n=Dr),t===void 0&&(t=Dr);var r=new $t(e);return n!==Dr&&Hf(r,n),t!==Dr&&Ls(r,t),r}function Mc(e,n){return tl(e,n)}function Bc(e,n){return Object.is?Object.is(e,n):e===n?e!==0||1/e===1/n:e!==e&&n!==n}var Lr={structural:Mc,default:Bc};function pr(e,n,t){return Us(e)?e:Array.isArray(e)?we.array(e,{name:t}):Kt(e)?we.object(e,void 0,{name:t}):$r(e)?we.map(e,{name:t}):wt(e)?we.set(e,{name:t}):typeof e=="function"&&!bn(e)&&!yn(e)?ss(e)?Vr(e):vn(t,e):e}function Lc(e,n,t){if(e==null||nt(e)||bt(e)||Je(e)||Re(e))return e;if(Array.isArray(e))return we.array(e,{name:t,deep:!1});if(Kt(e))return we.object(e,void 0,{name:t,deep:!1});if($r(e))return we.map(e,{name:t,deep:!1});if(wt(e))return we.set(e,{name:t,deep:!1})}function Ni(e){return e}function Vc(e,n){return tl(e,n)?n:e}var Kc="override";function Fc(e){return e.annotationType_===Kc}function An(e,n){return{annotationType_:e,options_:n,make_:zc,extend_:Uc,decorate_20223_:qc}}function zc(e,n,t,r){var a;if((a=this.options_)!=null&&a.bound)return this.extend_(e,n,t,!1)===null?0:1;if(r===e.target_)return this.extend_(e,n,t,!1)===null?0:2;if(bn(t.value))return 1;var u=ps(e,this,n,t,!1);return ct(r,n,u),2}function Uc(e,n,t,r){var a=ps(e,this,n,t);return e.defineProperty_(n,a,r)}function qc(e,n){var t=n.kind,r=n.name,a=n.addInitializer,u=this,l=function(m){var j,C,R,z;return zt((j=(C=u.options_)==null?void 0:C.name)!=null?j:r.toString(),m,(R=(z=u.options_)==null?void 0:z.autoAction)!=null?R:!1)};if(t=="field")return function(h){var m,j=h;return bn(j)||(j=l(j)),(m=u.options_)!=null&&m.bound&&(j=j.bind(this),j.isMobxAction=!0),j};if(t=="method"){var f;return bn(e)||(e=l(e)),(f=this.options_)!=null&&f.bound&&a(function(){var h=this,m=h[r].bind(h);m.isMobxAction=!0,h[r]=m}),e}oe("Cannot apply '"+u.annotationType_+"' to '"+String(r)+"' (kind: "+t+"):"+(`
'`+u.annotationType_+"' can only be used on properties with a function value."))}function $c(e,n,t,r){n.annotationType_,r.value}function ps(e,n,t,r,a){var u,l,f,h,m,j,C;a===void 0&&(a=U.safeDescriptors),$c(e,n,t,r);var R=r.value;if((u=n.options_)!=null&&u.bound){var z;R=R.bind((z=e.proxy_)!=null?z:e.target_)}return{value:zt((l=(f=n.options_)==null?void 0:f.name)!=null?l:t.toString(),R,(h=(m=n.options_)==null?void 0:m.autoAction)!=null?h:!1,(j=n.options_)!=null&&j.bound?(C=e.proxy_)!=null?C:e.target_:void 0),configurable:a?e.isPlainObject_:!0,enumerable:!1,writable:!a}}function hs(e,n){return{annotationType_:e,options_:n,make_:Hc,extend_:Wc,decorate_20223_:Gc}}function Hc(e,n,t,r){var a;if(r===e.target_)return this.extend_(e,n,t,!1)===null?0:2;if((a=this.options_)!=null&&a.bound&&(!Pt(e.target_,n)||!yn(e.target_[n]))&&this.extend_(e,n,t,!1)===null)return 0;if(yn(t.value))return 1;var u=vs(e,this,n,t,!1,!1);return ct(r,n,u),2}function Wc(e,n,t,r){var a,u=vs(e,this,n,t,(a=this.options_)==null?void 0:a.bound);return e.defineProperty_(n,u,r)}function Gc(e,n){var t,r=n.name,a=n.addInitializer;return yn(e)||(e=Vr(e)),(t=this.options_)!=null&&t.bound&&a(function(){var u=this,l=u[r].bind(u);l.isMobXFlow=!0,u[r]=l}),e}function Yc(e,n,t,r){n.annotationType_,r.value}function vs(e,n,t,r,a,u){u===void 0&&(u=U.safeDescriptors),Yc(e,n,t,r);var l=r.value;if(yn(l)||(l=Vr(l)),a){var f;l=l.bind((f=e.proxy_)!=null?f:e.target_),l.isMobXFlow=!0}return{value:l,configurable:u?e.isPlainObject_:!0,enumerable:!1,writable:!u}}function bo(e,n){return{annotationType_:e,options_:n,make_:Xc,extend_:Jc,decorate_20223_:Zc}}function Xc(e,n,t){return this.extend_(e,n,t,!1)===null?0:1}function Jc(e,n,t,r){return Qc(e,this,n,t),e.defineComputedProperty_(n,Ft({},this.options_,{get:t.get,set:t.set}),r)}function Zc(e,n){var t=this,r=n.name,a=n.addInitializer;return a(function(){var u=Gr(this)[Q],l=Ft({},t.options_,{get:e,context:this});l.name||(l.name="ObservableObject."+r.toString()),u.values_.set(r,new tt(l))}),function(){return this[Q].getObservablePropValue_(r)}}function Qc(e,n,t,r){n.annotationType_,r.get}function Mi(e,n){return{annotationType_:e,options_:n,make_:ef,extend_:tf,decorate_20223_:rf}}function ef(e,n,t){return this.extend_(e,n,t,!1)===null?0:1}function tf(e,n,t,r){var a,u;return nf(e,this),e.defineObservableProperty_(n,t.value,(a=(u=this.options_)==null?void 0:u.enhancer)!=null?a:pr,r)}function rf(e,n){var t=this,r=n.kind,a=n.name,u=new WeakSet;function l(f,h){var m,j,C=Gr(f)[Q],R=new Vt(h,(m=(j=t.options_)==null?void 0:j.enhancer)!=null?m:pr,"ObservableObject."+a.toString(),!1);C.values_.set(a,R),u.add(f)}if(r=="accessor")return{get:function(){return u.has(this)||l(this,e.get.call(this)),this[Q].getObservablePropValue_(a)},set:function(h){return u.has(this)||l(this,h),this[Q].setObservablePropValue_(a,h)},init:function(h){return u.has(this)||l(this,h),h}}}function nf(e,n,t,r){n.annotationType_}var af="true",of=bs();function bs(e){return{annotationType_:af,options_:e,make_:uf,extend_:sf,decorate_20223_:lf}}function uf(e,n,t,r){var a,u;if(t.get)return Wr.make_(e,n,t,r);if(t.set){var l=zt(n.toString(),t.set);return r===e.target_?e.defineProperty_(n,{configurable:U.safeDescriptors?e.isPlainObject_:!0,set:l})===null?0:2:(ct(r,n,{configurable:!0,set:l}),2)}if(r!==e.target_&&typeof t.value=="function"){var f;if(ss(t.value)){var h,m=(h=this.options_)!=null&&h.autoBind?Vr.bound:Vr;return m.make_(e,n,t,r)}var j=(f=this.options_)!=null&&f.autoBind?vn.bound:vn;return j.make_(e,n,t,r)}var C=((a=this.options_)==null?void 0:a.deep)===!1?we.ref:we;if(typeof t.value=="function"&&(u=this.options_)!=null&&u.autoBind){var R;t.value=t.value.bind((R=e.proxy_)!=null?R:e.target_)}return C.make_(e,n,t,r)}function sf(e,n,t,r){var a,u;if(t.get)return Wr.extend_(e,n,t,r);if(t.set)return e.defineProperty_(n,{configurable:U.safeDescriptors?e.isPlainObject_:!0,set:zt(n.toString(),t.set)},r);if(typeof t.value=="function"&&(a=this.options_)!=null&&a.autoBind){var l;t.value=t.value.bind((l=e.proxy_)!=null?l:e.target_)}var f=((u=this.options_)==null?void 0:u.deep)===!1?we.ref:we;return f.extend_(e,n,t,r)}function lf(e,n){oe("'"+this.annotationType_+"' cannot be used as a decorator")}var cf="observable",ff="observable.ref",df="observable.shallow",pf="observable.struct",ys={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(ys);function ii(e){return e||ys}var Qa=Mi(cf),hf=Mi(ff,{enhancer:Ni}),vf=Mi(df,{enhancer:Lc}),bf=Mi(pf,{enhancer:Vc}),ms=ft(Qa);function ai(e){return e.deep===!0?pr:e.deep===!1?Ni:mf(e.defaultDecorator)}function yf(e){var n;return e?(n=e.defaultDecorator)!=null?n:bs(e):void 0}function mf(e){var n,t;return e&&(n=(t=e.options_)==null?void 0:t.enhancer)!=null?n:pr}function gs(e,n,t){if(En(n))return Qa.decorate_20223_(e,n);if(dr(n)){Sn(e,n,Qa);return}return Us(e)?e:Kt(e)?we.object(e,n,t):Array.isArray(e)?we.array(e,n):$r(e)?we.map(e,n):wt(e)?we.set(e,n):typeof e=="object"&&e!==null?e:we.box(e,n)}as(gs,ms);var gf={box:function(n,t){var r=ii(t);return new Vt(n,ai(r),r.name,!0,r.equals)},array:function(n,t){var r=ii(t);return(U.useProxies===!1||r.proxy===!1?Od:dd)(n,ai(r),r.name)},map:function(n,t){var r=ii(t);return new wo(n,ai(r),r.name)},set:function(n,t){var r=ii(t);return new Xs(n,ai(r),r.name)},object:function(n,t,r){return br(function(){return Xf(U.useProxies===!1||r?.proxy===!1?Gr({},r):ld({},r),n,t)})},ref:ft(hf),shallow:ft(vf),deep:ms,struct:ft(bf)},we=as(gs,gf),_s="computed",_f="computed.struct",eo=bo(_s),wf=bo(_f,{equals:Lr.structural}),Wr=function(n,t){if(En(t))return eo.decorate_20223_(n,t);if(dr(t))return Sn(n,t,eo);if(Kt(n))return ft(bo(_s,n));var r=Kt(t)?t:{};return r.get=n,r.name||(r.name=n.name||""),new tt(r)};Object.assign(Wr,eo);Wr.struct=ft(wf);var fu,du,_i=0,Of=1,Pf=(fu=(du=mi(function(){},"name"))==null?void 0:du.configurable)!=null?fu:!1,pu={value:"action",configurable:!0,writable:!1,enumerable:!1};function zt(e,n,t,r){t===void 0&&(t=!1);function a(){return ws(e,t,n,r||this,arguments)}return a.isMobxAction=!0,a.toString=function(){return n.toString()},Pf&&(pu.value=e,ct(a,"name",pu)),a}function ws(e,n,t,r,a){var u=Sf(e,n);try{return t.apply(r,a)}catch(l){throw u.error_=l,l}finally{Ef(u)}}function Sf(e,n,t,r){var a=!1,u=0,l=U.trackingDerivation,f=!n||!l;Ne();var h=U.allowStateChanges;f&&(vr(),h=Bi(!0));var m=yo(!0),j={runAsAction_:f,prevDerivation_:l,prevAllowStateChanges_:h,prevAllowStateReads_:m,notifySpy_:a,startTime_:u,actionId_:Of++,parentActionId_:_i};return _i=j.actionId_,j}function Ef(e){_i!==e.actionId_&&oe(30),_i=e.parentActionId_,e.error_!==void 0&&(U.suppressReactionErrors=!0),Li(e.prevAllowStateChanges_),fn(e.prevAllowStateReads_),Me(),e.runAsAction_&&St(e.prevDerivation_),U.suppressReactionErrors=!1}function Os(e,n){var t=Bi(e);try{return n()}finally{Li(t)}}function Bi(e){var n=U.allowStateChanges;return U.allowStateChanges=e,n}function Li(e){U.allowStateChanges=e}var Vt=function(e){function n(r,a,u,l,f){var h;return u===void 0&&(u="ObservableValue"),f===void 0&&(f=Lr.default),h=e.call(this,u)||this,h.enhancer=void 0,h.name_=void 0,h.equals=void 0,h.hasUnreportedChange_=!1,h.interceptors_=void 0,h.changeListeners_=void 0,h.value_=void 0,h.dehancer=void 0,h.enhancer=a,h.name_=u,h.equals=f,h.value_=a(r,void 0,u),h}ds(n,e);var t=n.prototype;return t.dehanceValue=function(a){return this.dehancer!==void 0?this.dehancer(a):a},t.set=function(a){this.value_,a=this.prepareNewValue_(a),a!==U.UNCHANGED&&this.setNewValue_(a)},t.prepareNewValue_=function(a){if(Ye(this)){var u=Xe(this,{object:this,type:dt,newValue:a});if(!u)return U.UNCHANGED;a=u.newValue}return a=this.enhancer(a,this.value_,this.name_),this.equals(this.value_,a)?U.UNCHANGED:a},t.setNewValue_=function(a){var u=this.value_;this.value_=a,this.reportChanged(),Qe(this)&&et(this,{type:dt,object:this,newValue:a,oldValue:u})},t.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},t.intercept_=function(a){return jn(this,a)},t.observe_=function(a,u){return u&&a({observableKind:"value",debugObjectName:this.name_,object:this,type:dt,newValue:this.value_,oldValue:void 0}),xn(this,a)},t.raw=function(){return this.value_},t.toJSON=function(){return this.get()},t.toString=function(){return this.name_+"["+this.value_+"]"},t.valueOf=function(){return fs(this.get())},t[Symbol.toPrimitive]=function(){return this.valueOf()},n}($t),Af=qt("ObservableValue",Vt),tt=function(){function e(t){this.dependenciesState_=he.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.observers_=new Set,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=he.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new Oi(null),this.name_=void 0,this.triggeredBy_=void 0,this.flags_=0,this.derivation=void 0,this.setter_=void 0,this.isTracing_=wi.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,t.get||oe(31),this.derivation=t.get,this.name_=t.name||"ComputedValue",t.set&&(this.setter_=zt("ComputedValue-setter",t.set)),this.equals_=t.equals||(t.compareStructural||t.struct?Lr.structural:Lr.default),this.scope_=t.context,this.requiresReaction_=t.requiresReaction,this.keepAlive_=!!t.keepAlive}var n=e.prototype;return n.onBecomeStale_=function(){kf(this)},n.onBO=function(){this.onBOL&&this.onBOL.forEach(function(r){return r()})},n.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(r){return r()})},n.get=function(){if(this.isComputing&&oe(32,this.name_,this.derivation),U.inBatch===0&&this.observers_.size===0&&!this.keepAlive_)to(this)&&(this.warnAboutUntrackedRead_(),Ne(),this.value_=this.computeValue_(!1),Me());else if(Cs(this),to(this)){var r=U.trackingContext;this.keepAlive_&&!r&&(U.trackingContext=this),this.trackAndCompute()&&If(this),U.trackingContext=r}var a=this.value_;if(di(a))throw a.cause;return a},n.set=function(r){if(this.setter_){this.isRunningSetter&&oe(33,this.name_),this.isRunningSetter=!0;try{this.setter_.call(this.scope_,r)}finally{this.isRunningSetter=!1}}else oe(34,this.name_)},n.trackAndCompute=function(){var r=this.value_,a=this.dependenciesState_===he.NOT_TRACKING_,u=this.computeValue_(!0),l=a||di(r)||di(u)||!this.equals_(r,u);return l&&(this.value_=u),l},n.computeValue_=function(r){this.isComputing=!0;var a=Bi(!1),u;if(r)u=Ps(this,this.derivation,this.scope_);else if(U.disableErrorBoundaries===!0)u=this.derivation.call(this.scope_);else try{u=this.derivation.call(this.scope_)}catch(l){u=new Oi(l)}return Li(a),this.isComputing=!1,u},n.suspend_=function(){this.keepAlive_||(ro(this),this.value_=void 0)},n.observe_=function(r,a){var u=this,l=!0,f=void 0;return Ms(function(){var h=u.get();if(!l||a){var m=vr();r({observableKind:"computed",debugObjectName:u.name_,type:dt,object:u,newValue:h,oldValue:f}),St(m)}l=!1,f=h})},n.warnAboutUntrackedRead_=function(){},n.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},n.valueOf=function(){return fs(this.get())},n[Symbol.toPrimitive]=function(){return this.valueOf()},Hr(e,[{key:"isComputing",get:function(){return Ue(this.flags_,e.isComputingMask_)},set:function(r){this.flags_=qe(this.flags_,e.isComputingMask_,r)}},{key:"isRunningSetter",get:function(){return Ue(this.flags_,e.isRunningSetterMask_)},set:function(r){this.flags_=qe(this.flags_,e.isRunningSetterMask_,r)}},{key:"isBeingObserved",get:function(){return Ue(this.flags_,e.isBeingObservedMask_)},set:function(r){this.flags_=qe(this.flags_,e.isBeingObservedMask_,r)}},{key:"isPendingUnobservation",get:function(){return Ue(this.flags_,e.isPendingUnobservationMask_)},set:function(r){this.flags_=qe(this.flags_,e.isPendingUnobservationMask_,r)}},{key:"diffValue",get:function(){return Ue(this.flags_,e.diffValueMask_)?1:0},set:function(r){this.flags_=qe(this.flags_,e.diffValueMask_,r===1)}}])}();tt.isComputingMask_=1;tt.isRunningSetterMask_=2;tt.isBeingObservedMask_=4;tt.isPendingUnobservationMask_=8;tt.diffValueMask_=16;var Vi=qt("ComputedValue",tt),he;(function(e){e[e.NOT_TRACKING_=-1]="NOT_TRACKING_",e[e.UP_TO_DATE_=0]="UP_TO_DATE_",e[e.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",e[e.STALE_=2]="STALE_"})(he||(he={}));var wi;(function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"})(wi||(wi={}));var Oi=function(n){this.cause=void 0,this.cause=n};function di(e){return e instanceof Oi}function to(e){switch(e.dependenciesState_){case he.UP_TO_DATE_:return!1;case he.NOT_TRACKING_:case he.STALE_:return!0;case he.POSSIBLY_STALE_:{for(var n=yo(!0),t=vr(),r=e.observing_,a=r.length,u=0;u<a;u++){var l=r[u];if(Vi(l)){if(U.disableErrorBoundaries)l.get();else try{l.get()}catch{return St(t),fn(n),!0}if(e.dependenciesState_===he.STALE_)return St(t),fn(n),!0}}return Es(e),St(t),fn(n),!1}}}function Ps(e,n,t){var r=yo(!0);Es(e),e.newObserving_=new Array(e.runId_===0?100:e.observing_.length),e.unboundDepsCount_=0,e.runId_=++U.runId;var a=U.trackingDerivation;U.trackingDerivation=e,U.inBatch++;var u;if(U.disableErrorBoundaries===!0)u=n.call(t);else try{u=n.call(t)}catch(l){u=new Oi(l)}return U.inBatch--,U.trackingDerivation=a,jf(e),fn(r),u}function jf(e){for(var n=e.observing_,t=e.observing_=e.newObserving_,r=he.UP_TO_DATE_,a=0,u=e.unboundDepsCount_,l=0;l<u;l++){var f=t[l];f.diffValue===0&&(f.diffValue=1,a!==l&&(t[a]=f),a++),f.dependenciesState_>r&&(r=f.dependenciesState_)}for(t.length=a,e.newObserving_=null,u=n.length;u--;){var h=n[u];h.diffValue===0&&js(h,e),h.diffValue=0}for(;a--;){var m=t[a];m.diffValue===1&&(m.diffValue=0,Tf(m,e))}r!==he.UP_TO_DATE_&&(e.dependenciesState_=r,e.onBecomeStale_())}function ro(e){var n=e.observing_;e.observing_=[];for(var t=n.length;t--;)js(n[t],e);e.dependenciesState_=he.NOT_TRACKING_}function Ss(e){var n=vr();try{return e()}finally{St(n)}}function vr(){var e=U.trackingDerivation;return U.trackingDerivation=null,e}function St(e){U.trackingDerivation=e}function yo(e){var n=U.allowStateReads;return U.allowStateReads=e,n}function fn(e){U.allowStateReads=e}function Es(e){if(e.dependenciesState_!==he.UP_TO_DATE_){e.dependenciesState_=he.UP_TO_DATE_;for(var n=e.observing_,t=n.length;t--;)n[t].lowestObserverState_=he.UP_TO_DATE_}}var pi=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},hi=!0,As=!1,U=function(){var e=Ti();return e.__mobxInstanceCount>0&&!e.__mobxGlobals&&(hi=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==new pi().version&&(hi=!1),hi?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals.UNCHANGED||(e.__mobxGlobals.UNCHANGED={}),e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new pi):(setTimeout(function(){As||oe(35)},1),new pi)}();function xf(){if((U.pendingReactions.length||U.inBatch||U.isRunningReactions)&&oe(36),As=!0,hi){var e=Ti();--e.__mobxInstanceCount===0&&(e.__mobxGlobals=void 0),U=new pi}}function Cf(){return U}function Tf(e,n){e.observers_.add(n),e.lowestObserverState_>n.dependenciesState_&&(e.lowestObserverState_=n.dependenciesState_)}function js(e,n){e.observers_.delete(n),e.observers_.size===0&&xs(e)}function xs(e){e.isPendingUnobservation===!1&&(e.isPendingUnobservation=!0,U.pendingUnobservations.push(e))}function Ne(){U.inBatch++}function Me(){if(--U.inBatch===0){Is();for(var e=U.pendingUnobservations,n=0;n<e.length;n++){var t=e[n];t.isPendingUnobservation=!1,t.observers_.size===0&&(t.isBeingObserved&&(t.isBeingObserved=!1,t.onBUO()),t instanceof tt&&t.suspend_())}U.pendingUnobservations=[]}}function Cs(e){var n=U.trackingDerivation;return n!==null?(n.runId_!==e.lastAccessedBy_&&(e.lastAccessedBy_=n.runId_,n.newObserving_[n.unboundDepsCount_++]=e,!e.isBeingObserved&&U.trackingContext&&(e.isBeingObserved=!0,e.onBO())),e.isBeingObserved):(e.observers_.size===0&&U.inBatch>0&&xs(e),!1)}function Ts(e){e.lowestObserverState_!==he.STALE_&&(e.lowestObserverState_=he.STALE_,e.observers_.forEach(function(n){n.dependenciesState_===he.UP_TO_DATE_&&n.onBecomeStale_(),n.dependenciesState_=he.STALE_}))}function If(e){e.lowestObserverState_!==he.STALE_&&(e.lowestObserverState_=he.STALE_,e.observers_.forEach(function(n){n.dependenciesState_===he.POSSIBLY_STALE_?n.dependenciesState_=he.STALE_:n.dependenciesState_===he.UP_TO_DATE_&&(e.lowestObserverState_=he.UP_TO_DATE_)}))}function kf(e){e.lowestObserverState_===he.UP_TO_DATE_&&(e.lowestObserverState_=he.POSSIBLY_STALE_,e.observers_.forEach(function(n){n.dependenciesState_===he.UP_TO_DATE_&&(n.dependenciesState_=he.POSSIBLY_STALE_,n.onBecomeStale_())}))}var pt=function(){function e(t,r,a,u){t===void 0&&(t="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=he.NOT_TRACKING_,this.runId_=0,this.unboundDepsCount_=0,this.flags_=0,this.isTracing_=wi.NONE,this.name_=t,this.onInvalidate_=r,this.errorHandler_=a,this.requiresObservable_=u}var n=e.prototype;return n.onBecomeStale_=function(){this.schedule_()},n.schedule_=function(){this.isScheduled||(this.isScheduled=!0,U.pendingReactions.push(this),Is())},n.runReaction_=function(){if(!this.isDisposed){Ne(),this.isScheduled=!1;var r=U.trackingContext;if(U.trackingContext=this,to(this)){this.isTrackPending=!0;try{this.onInvalidate_()}catch(a){this.reportExceptionInDerivation_(a)}}U.trackingContext=r,Me()}},n.track=function(r){if(!this.isDisposed){Ne(),this.isRunning=!0;var a=U.trackingContext;U.trackingContext=this;var u=Ps(this,r,void 0);U.trackingContext=a,this.isRunning=!1,this.isTrackPending=!1,this.isDisposed&&ro(this),di(u)&&this.reportExceptionInDerivation_(u.cause),Me()}},n.reportExceptionInDerivation_=function(r){var a=this;if(this.errorHandler_){this.errorHandler_(r,this);return}if(U.disableErrorBoundaries)throw r;var u="[mobx] uncaught error in '"+this+"'";U.suppressReactionErrors||console.error(u,r),U.globalReactionErrorHandlers.forEach(function(l){return l(r,a)})},n.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.isRunning||(Ne(),ro(this),Me()))},n.getDisposer_=function(r){var a=this,u=function l(){a.dispose(),r==null||r.removeEventListener==null||r.removeEventListener("abort",l)};return r==null||r.addEventListener==null||r.addEventListener("abort",u),u[Q]=this,u},n.toString=function(){return"Reaction["+this.name_+"]"},n.trace=function(r){},Hr(e,[{key:"isDisposed",get:function(){return Ue(this.flags_,e.isDisposedMask_)},set:function(r){this.flags_=qe(this.flags_,e.isDisposedMask_,r)}},{key:"isScheduled",get:function(){return Ue(this.flags_,e.isScheduledMask_)},set:function(r){this.flags_=qe(this.flags_,e.isScheduledMask_,r)}},{key:"isTrackPending",get:function(){return Ue(this.flags_,e.isTrackPendingMask_)},set:function(r){this.flags_=qe(this.flags_,e.isTrackPendingMask_,r)}},{key:"isRunning",get:function(){return Ue(this.flags_,e.isRunningMask_)},set:function(r){this.flags_=qe(this.flags_,e.isRunningMask_,r)}},{key:"diffValue",get:function(){return Ue(this.flags_,e.diffValueMask_)?1:0},set:function(r){this.flags_=qe(this.flags_,e.diffValueMask_,r===1)}}])}();pt.isDisposedMask_=1;pt.isScheduledMask_=2;pt.isTrackPendingMask_=4;pt.isRunningMask_=8;pt.diffValueMask_=16;var Df=100,no=function(n){return n()};function Is(){U.inBatch>0||U.isRunningReactions||no(Rf)}function Rf(){U.isRunningReactions=!0;for(var e=U.pendingReactions,n=0;e.length>0;){++n===Df&&(console.error("[mobx] cycle in reaction: "+e[0]),e.splice(0));for(var t=e.splice(0),r=0,a=t.length;r<a;r++)t[r].runReaction_()}U.isRunningReactions=!1}var Pi=qt("Reaction",pt);function Nf(e){var n=no;no=function(r){return e(function(){return n(r)})}}function dn(){return!1}function Mf(e){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}var ks="action",Bf="action.bound",Ds="autoAction",Lf="autoAction.bound",Rs="<unnamed action>",io=An(ks),Vf=An(Bf,{bound:!0}),ao=An(Ds,{autoAction:!0}),Kf=An(Lf,{autoAction:!0,bound:!0});function Ns(e){var n=function(r,a){if($e(r))return zt(r.name||Rs,r,e);if($e(a))return zt(r,a,e);if(En(a))return(e?ao:io).decorate_20223_(r,a);if(dr(a))return Sn(r,a,e?ao:io);if(dr(r))return ft(An(e?Ds:ks,{name:r,autoAction:e}))};return n}var Ae=Ns(!1);Object.assign(Ae,io);var vn=Ns(!0);Object.assign(vn,ao);Ae.bound=ft(Vf);vn.bound=ft(Kf);function hu(e){return ws(e.name||Rs,!1,e,this,void 0)}function bn(e){return $e(e)&&e.isMobxAction===!0}function Ms(e,n){var t,r,a,u;n===void 0&&(n=ho);var l=(t=(r=n)==null?void 0:r.name)!=null?t:"Autorun",f=!n.scheduler&&!n.delay,h;if(f)h=new pt(l,function(){this.track(C)},n.onError,n.requiresObservable);else{var m=Bs(n),j=!1;h=new pt(l,function(){j||(j=!0,m(function(){j=!1,h.isDisposed||h.track(C)}))},n.onError,n.requiresObservable)}function C(){e(h)}return(a=n)!=null&&(a=a.signal)!=null&&a.aborted||h.schedule_(),h.getDisposer_((u=n)==null?void 0:u.signal)}var Ff=function(n){return n()};function Bs(e){return e.scheduler?e.scheduler:e.delay?function(n){return setTimeout(n,e.delay)}:Ff}function zf(e,n,t){var r,a,u;t===void 0&&(t=ho);var l=(r=t.name)!=null?r:"Reaction",f=Ae(l,t.onError?Uf(t.onError,n):n),h=!t.scheduler&&!t.delay,m=Bs(t),j=!0,C=!1,R,z=t.compareStructural?Lr.structural:t.equals||Lr.default,G=new pt(l,function(){j||h?D():C||(C=!0,m(D))},t.onError,t.requiresObservable);function D(){if(C=!1,!G.isDisposed){var H=!1,ee=R;G.track(function(){var re=Os(!1,function(){return e(G)});H=j||!z(R,re),R=re}),(j&&t.fireImmediately||!j&&H)&&f(R,ee,G),j=!1}}return(a=t)!=null&&(a=a.signal)!=null&&a.aborted||G.schedule_(),G.getDisposer_((u=t)==null?void 0:u.signal)}function Uf(e,n){return function(){try{return n.apply(this,arguments)}catch(t){e.call(this,t)}}}var qf="onBO",$f="onBUO";function Hf(e,n,t){return Vs(qf,e,n,t)}function Ls(e,n,t){return Vs($f,e,n,t)}function Vs(e,n,t,r){var a=Kr(n),u=$e(r)?r:t,l=e+"L";return a[l]?a[l].add(u):a[l]=new Set([u]),function(){var f=a[l];f&&(f.delete(u),f.size===0&&delete a[l])}}var Wf="never",oi="always",Gf="observed";function Yf(e){e.isolateGlobalState===!0&&xf();var n=e.useProxies,t=e.enforceActions;if(n!==void 0&&(U.useProxies=n===oi?!0:n===Wf?!1:typeof Proxy<"u"),n==="ifavailable"&&(U.verifyProxies=!0),t!==void 0){var r=t===oi?oi:t===Gf;U.enforceActions=r,U.allowStateChanges=!(r===!0||r===oi)}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(a){a in e&&(U[a]=!!e[a])}),U.allowStateReads=!U.observableRequiresReaction,e.reactionScheduler&&Nf(e.reactionScheduler)}function Xf(e,n,t,r){var a=Tc(n);return br(function(){var u=Gr(e,r)[Q];Ri(a).forEach(function(l){u.extend_(l,a[l],t&&l in t?t[l]:!0)})}),e}function Jf(e,n){return Ks(Kr(e,n))}function Ks(e){var n={name:e.name_};return e.observing_&&e.observing_.length>0&&(n.dependencies=Zf(e.observing_).map(Ks)),n}function Zf(e){return Array.from(new Set(e))}var Qf=0;function Fs(){this.message="FLOW_CANCELLED"}Fs.prototype=Object.create(Error.prototype);var Ia=hs("flow"),ed=hs("flow.bound",{bound:!0}),Vr=Object.assign(function(n,t){if(En(t))return Ia.decorate_20223_(n,t);if(dr(t))return Sn(n,t,Ia);var r=n,a=r.name||"<unnamed flow>",u=function(){var f=this,h=arguments,m=++Qf,j=Ae(a+" - runid: "+m+" - init",r).apply(f,h),C,R=void 0,z=new Promise(function(G,D){var H=0;C=D;function ee(Z){R=void 0;var ce;try{ce=Ae(a+" - runid: "+m+" - yield "+H++,j.next).call(j,Z)}catch(de){return D(de)}ae(ce)}function re(Z){R=void 0;var ce;try{ce=Ae(a+" - runid: "+m+" - yield "+H++,j.throw).call(j,Z)}catch(de){return D(de)}ae(ce)}function ae(Z){if($e(Z?.then)){Z.then(ae,D);return}return Z.done?G(Z.value):(R=Promise.resolve(Z.value),R.then(ee,re))}ee(void 0)});return z.cancel=Ae(a+" - runid: "+m+" - cancel",function(){try{R&&vu(R);var G=j.return(void 0),D=Promise.resolve(G.value);D.then(Dr,Dr),vu(D),C(new Fs)}catch(H){C(H)}}),z};return u.isMobXFlow=!0,u},Ia);Vr.bound=ft(ed);function vu(e){$e(e.cancel)&&e.cancel()}function yn(e){return e?.isMobXFlow===!0}function zs(e,n,t){var r;return Je(e)||bt(e)||Af(e)?r=ht(e):nt(e)&&(r=ht(e,n)),r.dehancer=typeof n=="function"?n:t,function(){r.dehancer=void 0}}function mo(e,n,t){return $e(t)?rd(e,n,t):td(e,n)}function td(e,n){return ht(e).intercept_(n)}function rd(e,n,t){return ht(e,n).intercept_(t)}function nd(e,n){return e?nt(e)||!!e[Q]||vo(e)||Pi(e)||Vi(e):!1}function Us(e){return nd(e)}function Si(e){if(nt(e))return e[Q].keys_();if(Je(e)||Re(e))return Array.from(e.keys());if(bt(e))return e.map(function(n,t){return t});oe(5)}function qs(e){if(nt(e))return Si(e).map(function(n){return e[n]});if(Je(e))return Si(e).map(function(n){return e.get(n)});if(Re(e))return Array.from(e.values());if(bt(e))return e.slice();oe(6)}function id(e){if(nt(e))return Si(e).map(function(n){return[n,e[n]]});if(Je(e))return Si(e).map(function(n){return[n,e.get(n)]});if(Re(e))return Array.from(e.entries());if(bt(e))return e.map(function(n,t){return[t,n]});oe(7)}function $s(e,n,t){if(arguments.length===2&&!Re(e)){Ne();var r=n;try{for(var a in r)$s(e,a,r[a])}finally{Me()}return}nt(e)?e[Q].set_(n,t):Je(e)?e.set(n,t):Re(e)?e.add(n):bt(e)?(typeof n!="number"&&(n=parseInt(n,10)),n<0&&oe("Invalid index: '"+n+"'"),Ne(),n>=e.length&&(e.length=n+1),e[n]=t,Me()):oe(8)}function Hs(e,n,t){if(nt(e))return e[Q].defineProperty_(n,t);oe(39)}function go(e,n,t,r){return $e(t)?od(e,n,t,r):ad(e,n,t)}function ad(e,n,t){return ht(e).observe_(n,t)}function od(e,n,t,r){return ht(e,n).observe_(t,r)}function Ot(e,n){n===void 0&&(n=void 0),Ne();try{return e.apply(n)}finally{Me()}}function bu(e,n,t){return arguments.length===1||n&&typeof n=="object"?ud(e,n):Ws(e,n,{})}function Ws(e,n,t){var r;if(typeof t.timeout=="number"){var a=new Error("WHEN_TIMEOUT");r=setTimeout(function(){if(!l[Q].isDisposed)if(l(),t.onError)t.onError(a);else throw a},t.timeout)}t.name="When";var u=zt("When-effect",n),l=Ms(function(f){var h=Os(!1,e);h&&(f.dispose(),r&&clearTimeout(r),u())},t);return l}function ud(e,n){var t;if(n!=null&&(t=n.signal)!=null&&t.aborted)return Object.assign(Promise.reject(new Error("WHEN_ABORTED")),{cancel:function(){return null}});var r,a,u=new Promise(function(l,f){var h,m=Ws(e,l,Ft({},n,{onError:f}));r=function(){m(),f(new Error("WHEN_CANCELLED"))},a=function(){m(),f(new Error("WHEN_ABORTED"))},n==null||(h=n.signal)==null||h.addEventListener==null||h.addEventListener("abort",a)}).finally(function(){var l;return n==null||(l=n.signal)==null||l.removeEventListener==null?void 0:l.removeEventListener("abort",a)});return u.cancel=r,u}function Cr(e){return e[Q]}var sd={has:function(n,t){return Cr(n).has_(t)},get:function(n,t){return Cr(n).get_(t)},set:function(n,t,r){var a;return dr(t)?(a=Cr(n).set_(t,r,!0))!=null?a:!0:!1},deleteProperty:function(n,t){var r;return dr(t)?(r=Cr(n).delete_(t,!0))!=null?r:!0:!1},defineProperty:function(n,t,r){var a;return(a=Cr(n).defineProperty_(t,r))!=null?a:!0},ownKeys:function(n){return Cr(n).ownKeys_()},preventExtensions:function(n){oe(13)}};function ld(e,n){var t,r;return os(),e=Gr(e,n),(r=(t=e[Q]).proxy_)!=null?r:t.proxy_=new Proxy(e,sd)}function Ye(e){return e.interceptors_!==void 0&&e.interceptors_.length>0}function jn(e,n){var t=e.interceptors_||(e.interceptors_=[]);return t.push(n),us(function(){var r=t.indexOf(n);r!==-1&&t.splice(r,1)})}function Xe(e,n){var t=vr();try{for(var r=[].concat(e.interceptors_||[]),a=0,u=r.length;a<u&&(n=r[a](n),n&&!n.type&&oe(14),!!n);a++);return n}finally{St(t)}}function Qe(e){return e.changeListeners_!==void 0&&e.changeListeners_.length>0}function xn(e,n){var t=e.changeListeners_||(e.changeListeners_=[]);return t.push(n),us(function(){var r=t.indexOf(n);r!==-1&&t.splice(r,1)})}function et(e,n){var t=vr(),r=e.changeListeners_;if(r){r=r.slice();for(var a=0,u=r.length;a<u;a++)r[a](n);St(t)}}function Gs(e,n,t){return br(function(){var r,a=Gr(e,t)[Q];(r=n)!=null||(n=Nc(e)),Ri(n).forEach(function(u){return a.make_(u,n[u])})}),e}var yu="splice",dt="update",cd=1e4,fd={get:function(n,t){var r=n[Q];return t===Q?r:t==="length"?r.getArrayLength_():typeof t=="string"&&!isNaN(t)?r.get_(parseInt(t)):Pt(Ei,t)?Ei[t]:n[t]},set:function(n,t,r){var a=n[Q];return t==="length"&&a.setArrayLength_(r),typeof t=="symbol"||isNaN(t)?n[t]=r:a.set_(parseInt(t),r),!0},preventExtensions:function(){oe(15)}},_o=function(){function e(t,r,a,u){t===void 0&&(t="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=a,this.legacyMode_=u,this.atom_=new $t(t),this.enhancer_=function(l,f){return r(l,f,"ObservableArray[..]")}}var n=e.prototype;return n.dehanceValue_=function(r){return this.dehancer!==void 0?this.dehancer(r):r},n.dehanceValues_=function(r){return this.dehancer!==void 0&&r.length>0?r.map(this.dehancer):r},n.intercept_=function(r){return jn(this,r)},n.observe_=function(r,a){return a===void 0&&(a=!1),a&&r({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),xn(this,r)},n.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},n.setArrayLength_=function(r){(typeof r!="number"||isNaN(r)||r<0)&&oe("Out of range: "+r);var a=this.values_.length;if(r!==a)if(r>a){for(var u=new Array(r-a),l=0;l<r-a;l++)u[l]=void 0;this.spliceWithArray_(a,0,u)}else this.spliceWithArray_(r,a-r)},n.updateArrayLength_=function(r,a){r!==this.lastKnownLength_&&oe(16),this.lastKnownLength_+=a,this.legacyMode_&&a>0&&el(r+a+1)},n.spliceWithArray_=function(r,a,u){var l=this;this.atom_;var f=this.values_.length;if(r===void 0?r=0:r>f?r=f:r<0&&(r=Math.max(0,f+r)),arguments.length===1?a=f-r:a==null?a=0:a=Math.max(0,Math.min(a,f-r)),u===void 0&&(u=Ja),Ye(this)){var h=Xe(this,{object:this.proxy_,type:yu,index:r,removedCount:a,added:u});if(!h)return Ja;a=h.removedCount,u=h.added}if(u=u.length===0?u:u.map(function(C){return l.enhancer_(C,void 0)}),this.legacyMode_){var m=u.length-a;this.updateArrayLength_(f,m)}var j=this.spliceItemsIntoValues_(r,a,u);return(a!==0||u.length!==0)&&this.notifyArraySplice_(r,u,j),this.dehanceValues_(j)},n.spliceItemsIntoValues_=function(r,a,u){if(u.length<cd){var l;return(l=this.values_).splice.apply(l,[r,a].concat(u))}else{var f=this.values_.slice(r,r+a),h=this.values_.slice(r+a);this.values_.length+=u.length-a;for(var m=0;m<u.length;m++)this.values_[r+m]=u[m];for(var j=0;j<h.length;j++)this.values_[r+u.length+j]=h[j];return f}},n.notifyArrayChildUpdate_=function(r,a,u){var l=!this.owned_&&dn(),f=Qe(this),h=f||l?{observableKind:"array",object:this.proxy_,type:dt,debugObjectName:this.atom_.name_,index:r,newValue:a,oldValue:u}:null;this.atom_.reportChanged(),f&&et(this,h)},n.notifyArraySplice_=function(r,a,u){var l=!this.owned_&&dn(),f=Qe(this),h=f||l?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:yu,index:r,removed:u,added:a,removedCount:u.length,addedCount:a.length}:null;this.atom_.reportChanged(),f&&et(this,h)},n.get_=function(r){if(this.legacyMode_&&r>=this.values_.length){console.warn("[mobx] Out of bounds read: "+r);return}return this.atom_.reportObserved(),this.dehanceValue_(this.values_[r])},n.set_=function(r,a){var u=this.values_;if(this.legacyMode_&&r>u.length&&oe(17,r,u.length),r<u.length){this.atom_;var l=u[r];if(Ye(this)){var f=Xe(this,{type:dt,object:this.proxy_,index:r,newValue:a});if(!f)return;a=f.newValue}a=this.enhancer_(a,l);var h=a!==l;h&&(u[r]=a,this.notifyArrayChildUpdate_(r,a,l))}else{for(var m=new Array(r+1-u.length),j=0;j<m.length-1;j++)m[j]=void 0;m[m.length-1]=a,this.spliceWithArray_(u.length,0,m)}},e}();function dd(e,n,t,r){return t===void 0&&(t="ObservableArray"),r===void 0&&(r=!1),os(),br(function(){var a=new _o(t,n,r,!1);ls(a.values_,Q,a);var u=new Proxy(a.values_,fd);return a.proxy_=u,e&&e.length&&a.spliceWithArray_(0,0,e),u})}var Ei={clear:function(){return this.splice(0)},replace:function(n){var t=this[Q];return t.spliceWithArray_(0,t.values_.length,n)},toJSON:function(){return this.slice()},splice:function(n,t){for(var r=arguments.length,a=new Array(r>2?r-2:0),u=2;u<r;u++)a[u-2]=arguments[u];var l=this[Q];switch(arguments.length){case 0:return[];case 1:return l.spliceWithArray_(n);case 2:return l.spliceWithArray_(n,t)}return l.spliceWithArray_(n,t,a)},spliceWithArray:function(n,t,r){return this[Q].spliceWithArray_(n,t,r)},push:function(){for(var n=this[Q],t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return n.spliceWithArray_(n.values_.length,0,r),n.values_.length},pop:function(){return this.splice(Math.max(this[Q].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var n=this[Q],t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return n.spliceWithArray_(0,0,r),n.values_.length},reverse:function(){return U.trackingDerivation&&oe(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){U.trackingDerivation&&oe(37,"sort");var n=this.slice();return n.sort.apply(n,arguments),this.replace(n),this},remove:function(n){var t=this[Q],r=t.dehanceValues_(t.values_).indexOf(n);return r>-1?(this.splice(r,1),!0):!1}};ye("at",He);ye("concat",He);ye("flat",He);ye("includes",He);ye("indexOf",He);ye("join",He);ye("lastIndexOf",He);ye("slice",He);ye("toString",He);ye("toLocaleString",He);ye("toSorted",He);ye("toSpliced",He);ye("with",He);ye("every",rt);ye("filter",rt);ye("find",rt);ye("findIndex",rt);ye("findLast",rt);ye("findLastIndex",rt);ye("flatMap",rt);ye("forEach",rt);ye("map",rt);ye("some",rt);ye("toReversed",rt);ye("reduce",Ys);ye("reduceRight",Ys);function ye(e,n){typeof Array.prototype[e]=="function"&&(Ei[e]=n(e))}function He(e){return function(){var n=this[Q];n.atom_.reportObserved();var t=n.dehanceValues_(n.values_);return t[e].apply(t,arguments)}}function rt(e){return function(n,t){var r=this,a=this[Q];a.atom_.reportObserved();var u=a.dehanceValues_(a.values_);return u[e](function(l,f){return n.call(t,l,f,r)})}}function Ys(e){return function(){var n=this,t=this[Q];t.atom_.reportObserved();var r=t.dehanceValues_(t.values_),a=arguments[0];return arguments[0]=function(u,l,f){return a(u,l,f,n)},r[e].apply(r,arguments)}}var pd=qt("ObservableArrayAdministration",_o);function bt(e){return ki(e)&&pd(e[Q])}var hd={},Lt="add",Ai="delete",wo=function(){function e(t,r,a){var u=this;r===void 0&&(r=pr),a===void 0&&(a="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[Q]=hd,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=r,this.name_=a,$e(Map)||oe(18),br(function(){u.keysAtom_=gi("ObservableMap.keys()"),u.data_=new Map,u.hasMap_=new Map,t&&u.merge(t)})}var n=e.prototype;return n.has_=function(r){return this.data_.has(r)},n.has=function(r){var a=this;if(!U.trackingDerivation)return this.has_(r);var u=this.hasMap_.get(r);if(!u){var l=u=new Vt(this.has_(r),Ni,"ObservableMap.key?",!1);this.hasMap_.set(r,l),Ls(l,function(){return a.hasMap_.delete(r)})}return u.get()},n.set=function(r,a){var u=this.has_(r);if(Ye(this)){var l=Xe(this,{type:u?dt:Lt,object:this,newValue:a,name:r});if(!l)return this;a=l.newValue}return u?this.updateValue_(r,a):this.addValue_(r,a),this},n.delete=function(r){var a=this;if(this.keysAtom_,Ye(this)){var u=Xe(this,{type:Ai,object:this,name:r});if(!u)return!1}if(this.has_(r)){var l=dn(),f=Qe(this),h=f||l?{observableKind:"map",debugObjectName:this.name_,type:Ai,object:this,oldValue:this.data_.get(r).value_,name:r}:null;return Ot(function(){var m;a.keysAtom_.reportChanged(),(m=a.hasMap_.get(r))==null||m.setNewValue_(!1);var j=a.data_.get(r);j.setNewValue_(void 0),a.data_.delete(r)}),f&&et(this,h),!0}return!1},n.updateValue_=function(r,a){var u=this.data_.get(r);if(a=u.prepareNewValue_(a),a!==U.UNCHANGED){var l=dn(),f=Qe(this),h=f||l?{observableKind:"map",debugObjectName:this.name_,type:dt,object:this,oldValue:u.value_,name:r,newValue:a}:null;u.setNewValue_(a),f&&et(this,h)}},n.addValue_=function(r,a){var u=this;this.keysAtom_,Ot(function(){var m,j=new Vt(a,u.enhancer_,"ObservableMap.key",!1);u.data_.set(r,j),a=j.value_,(m=u.hasMap_.get(r))==null||m.setNewValue_(!0),u.keysAtom_.reportChanged()});var l=dn(),f=Qe(this),h=f||l?{observableKind:"map",debugObjectName:this.name_,type:Lt,object:this,name:r,newValue:a}:null;f&&et(this,h)},n.get=function(r){return this.has(r)?this.dehanceValue_(this.data_.get(r).get()):this.dehanceValue_(void 0)},n.dehanceValue_=function(r){return this.dehancer!==void 0?this.dehancer(r):r},n.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},n.values=function(){var r=this,a=this.keys();return mu({next:function(){var l=a.next(),f=l.done,h=l.value;return{done:f,value:f?void 0:r.get(h)}}})},n.entries=function(){var r=this,a=this.keys();return mu({next:function(){var l=a.next(),f=l.done,h=l.value;return{done:f,value:f?void 0:[h,r.get(h)]}}})},n[Symbol.iterator]=function(){return this.entries()},n.forEach=function(r,a){for(var u=Rr(this),l;!(l=u()).done;){var f=l.value,h=f[0],m=f[1];r.call(a,m,h,this)}},n.merge=function(r){var a=this;return Je(r)&&(r=new Map(r)),Ot(function(){Kt(r)?Cc(r).forEach(function(u){return a.set(u,r[u])}):Array.isArray(r)?r.forEach(function(u){var l=u[0],f=u[1];return a.set(l,f)}):$r(r)?(xc(r)||oe(19,r),r.forEach(function(u,l){return a.set(l,u)})):r!=null&&oe(20,r)}),this},n.clear=function(){var r=this;Ot(function(){Ss(function(){for(var a=Rr(r.keys()),u;!(u=a()).done;){var l=u.value;r.delete(l)}})})},n.replace=function(r){var a=this;return Ot(function(){for(var u=vd(r),l=new Map,f=!1,h=Rr(a.data_.keys()),m;!(m=h()).done;){var j=m.value;if(!u.has(j)){var C=a.delete(j);if(C)f=!0;else{var R=a.data_.get(j);l.set(j,R)}}}for(var z=Rr(u.entries()),G;!(G=z()).done;){var D=G.value,H=D[0],ee=D[1],re=a.data_.has(H);if(a.set(H,ee),a.data_.has(H)){var ae=a.data_.get(H);l.set(H,ae),re||(f=!0)}}if(!f)if(a.data_.size!==l.size)a.keysAtom_.reportChanged();else for(var Z=a.data_.keys(),ce=l.keys(),de=Z.next(),te=ce.next();!de.done;){if(de.value!==te.value){a.keysAtom_.reportChanged();break}de=Z.next(),te=ce.next()}a.data_=l}),this},n.toString=function(){return"[object ObservableMap]"},n.toJSON=function(){return Array.from(this)},n.observe_=function(r,a){return xn(this,r)},n.intercept_=function(r){return jn(this,r)},Hr(e,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:Symbol.toStringTag,get:function(){return"Map"}}])}(),Je=qt("ObservableMap",wo);function mu(e){return e[Symbol.toStringTag]="MapIterator",Po(e)}function vd(e){if($r(e)||Je(e))return e;if(Array.isArray(e))return new Map(e);if(Kt(e)){var n=new Map;for(var t in e)n.set(t,e[t]);return n}else return oe(21,e)}var bd={},Xs=function(){function e(t,r,a){var u=this;r===void 0&&(r=pr),a===void 0&&(a="ObservableSet"),this.name_=void 0,this[Q]=bd,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=a,$e(Set)||oe(22),this.enhancer_=function(l,f){return r(l,f,a)},br(function(){u.atom_=gi(u.name_),t&&u.replace(t)})}var n=e.prototype;return n.dehanceValue_=function(r){return this.dehancer!==void 0?this.dehancer(r):r},n.clear=function(){var r=this;Ot(function(){Ss(function(){for(var a=Rr(r.data_.values()),u;!(u=a()).done;){var l=u.value;r.delete(l)}})})},n.forEach=function(r,a){for(var u=Rr(this),l;!(l=u()).done;){var f=l.value;r.call(a,f,f,this)}},n.add=function(r){var a=this;if(this.atom_,Ye(this)){var u=Xe(this,{type:Lt,object:this,newValue:r});if(!u)return this;r=u.newValue}if(!this.has(r)){Ot(function(){a.data_.add(a.enhancer_(r,void 0)),a.atom_.reportChanged()});var l=!1,f=Qe(this),h=f||l?{observableKind:"set",debugObjectName:this.name_,type:Lt,object:this,newValue:r}:null;f&&et(this,h)}return this},n.delete=function(r){var a=this;if(Ye(this)){var u=Xe(this,{type:Ai,object:this,oldValue:r});if(!u)return!1}if(this.has(r)){var l=!1,f=Qe(this),h=f||l?{observableKind:"set",debugObjectName:this.name_,type:Ai,object:this,oldValue:r}:null;return Ot(function(){a.atom_.reportChanged(),a.data_.delete(r)}),f&&et(this,h),!0}return!1},n.has=function(r){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(r))},n.entries=function(){var r=this.values();return gu({next:function(){var u=r.next(),l=u.value,f=u.done;return f?{value:void 0,done:f}:{value:[l,l],done:f}}})},n.keys=function(){return this.values()},n.values=function(){this.atom_.reportObserved();var r=this,a=this.data_.values();return gu({next:function(){var l=a.next(),f=l.value,h=l.done;return h?{value:void 0,done:h}:{value:r.dehanceValue_(f),done:h}}})},n.intersection=function(r){if(wt(r)&&!Re(r))return r.intersection(this);var a=new Set(this);return a.intersection(r)},n.union=function(r){if(wt(r)&&!Re(r))return r.union(this);var a=new Set(this);return a.union(r)},n.difference=function(r){return new Set(this).difference(r)},n.symmetricDifference=function(r){if(wt(r)&&!Re(r))return r.symmetricDifference(this);var a=new Set(this);return a.symmetricDifference(r)},n.isSubsetOf=function(r){return new Set(this).isSubsetOf(r)},n.isSupersetOf=function(r){return new Set(this).isSupersetOf(r)},n.isDisjointFrom=function(r){if(wt(r)&&!Re(r))return r.isDisjointFrom(this);var a=new Set(this);return a.isDisjointFrom(r)},n.replace=function(r){var a=this;return Re(r)&&(r=new Set(r)),Ot(function(){Array.isArray(r)?(a.clear(),r.forEach(function(u){return a.add(u)})):wt(r)?(a.clear(),r.forEach(function(u){return a.add(u)})):r!=null&&oe("Cannot initialize set from "+r)}),this},n.observe_=function(r,a){return xn(this,r)},n.intercept_=function(r){return jn(this,r)},n.toJSON=function(){return Array.from(this)},n.toString=function(){return"[object ObservableSet]"},n[Symbol.iterator]=function(){return this.values()},Hr(e,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:Symbol.toStringTag,get:function(){return"Set"}}])}(),Re=qt("ObservableSet",Xs);function gu(e){return e[Symbol.toStringTag]="SetIterator",Po(e)}var _u=Object.create(null),wu="remove",Js=function(){function e(t,r,a,u){r===void 0&&(r=new Map),u===void 0&&(u=of),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=t,this.values_=r,this.name_=a,this.defaultAnnotation_=u,this.keysAtom_=new $t("ObservableObject.keys"),this.isPlainObject_=Kt(this.target_)}var n=e.prototype;return n.getObservablePropValue_=function(r){return this.values_.get(r).get()},n.setObservablePropValue_=function(r,a){var u=this.values_.get(r);if(u instanceof tt)return u.set(a),!0;if(Ye(this)){var l=Xe(this,{type:dt,object:this.proxy_||this.target_,name:r,newValue:a});if(!l)return null;a=l.newValue}if(a=u.prepareNewValue_(a),a!==U.UNCHANGED){var f=Qe(this),h=!1,m=f||h?{type:dt,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:u.value_,name:r,newValue:a}:null;u.setNewValue_(a),f&&et(this,m)}return!0},n.get_=function(r){return U.trackingDerivation&&!Pt(this.target_,r)&&this.has_(r),this.target_[r]},n.set_=function(r,a,u){return u===void 0&&(u=!1),Pt(this.target_,r)?this.values_.has(r)?this.setObservablePropValue_(r,a):u?Reflect.set(this.target_,r,a):(this.target_[r]=a,!0):this.extend_(r,{value:a,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,u)},n.has_=function(r){if(!U.trackingDerivation)return r in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var a=this.pendingKeys_.get(r);return a||(a=new Vt(r in this.target_,Ni,"ObservableObject.key?",!1),this.pendingKeys_.set(r,a)),a.get()},n.make_=function(r,a){if(a===!0&&(a=this.defaultAnnotation_),a!==!1){if(!(r in this.target_)){var u;if((u=this.target_[st])!=null&&u[r])return;oe(1,a.annotationType_,this.name_+"."+r.toString())}for(var l=this.target_;l&&l!==Ii;){var f=mi(l,r);if(f){var h=a.make_(this,r,f,l);if(h===0)return;if(h===1)break}l=Object.getPrototypeOf(l)}Pu(this,a,r)}},n.extend_=function(r,a,u,l){if(l===void 0&&(l=!1),u===!0&&(u=this.defaultAnnotation_),u===!1)return this.defineProperty_(r,a,l);var f=u.extend_(this,r,a,l);return f&&Pu(this,u,r),f},n.defineProperty_=function(r,a,u){u===void 0&&(u=!1),this.keysAtom_;try{Ne();var l=this.delete_(r);if(!l)return l;if(Ye(this)){var f=Xe(this,{object:this.proxy_||this.target_,name:r,type:Lt,newValue:a.value});if(!f)return null;var h=f.newValue;a.value!==h&&(a=Ft({},a,{value:h}))}if(u){if(!Reflect.defineProperty(this.target_,r,a))return!1}else ct(this.target_,r,a);this.notifyPropertyAddition_(r,a.value)}finally{Me()}return!0},n.defineObservableProperty_=function(r,a,u,l){l===void 0&&(l=!1),this.keysAtom_;try{Ne();var f=this.delete_(r);if(!f)return f;if(Ye(this)){var h=Xe(this,{object:this.proxy_||this.target_,name:r,type:Lt,newValue:a});if(!h)return null;a=h.newValue}var m=Ou(r),j={configurable:U.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:m.get,set:m.set};if(l){if(!Reflect.defineProperty(this.target_,r,j))return!1}else ct(this.target_,r,j);var C=new Vt(a,u,"ObservableObject.key",!1);this.values_.set(r,C),this.notifyPropertyAddition_(r,C.value_)}finally{Me()}return!0},n.defineComputedProperty_=function(r,a,u){u===void 0&&(u=!1),this.keysAtom_;try{Ne();var l=this.delete_(r);if(!l)return l;if(Ye(this)){var f=Xe(this,{object:this.proxy_||this.target_,name:r,type:Lt,newValue:void 0});if(!f)return null}a.name||(a.name="ObservableObject.key"),a.context=this.proxy_||this.target_;var h=Ou(r),m={configurable:U.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:h.get,set:h.set};if(u){if(!Reflect.defineProperty(this.target_,r,m))return!1}else ct(this.target_,r,m);this.values_.set(r,new tt(a)),this.notifyPropertyAddition_(r,void 0)}finally{Me()}return!0},n.delete_=function(r,a){if(a===void 0&&(a=!1),this.keysAtom_,!Pt(this.target_,r))return!0;if(Ye(this)){var u=Xe(this,{object:this.proxy_||this.target_,name:r,type:wu});if(!u)return null}try{var l;Ne();var f=Qe(this),h=!1,m=this.values_.get(r),j=void 0;if(!m&&(f||h)){var C;j=(C=mi(this.target_,r))==null?void 0:C.value}if(a){if(!Reflect.deleteProperty(this.target_,r))return!1}else delete this.target_[r];if(m&&(this.values_.delete(r),m instanceof Vt&&(j=m.value_),Ts(m)),this.keysAtom_.reportChanged(),(l=this.pendingKeys_)==null||(l=l.get(r))==null||l.set(r in this.target_),f||h){var R={type:wu,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:j,name:r};f&&et(this,R)}}finally{Me()}return!0},n.observe_=function(r,a){return xn(this,r)},n.intercept_=function(r){return jn(this,r)},n.notifyPropertyAddition_=function(r,a){var u,l=Qe(this),f=!1;if(l||f){var h=l||f?{type:Lt,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:r,newValue:a}:null;l&&et(this,h)}(u=this.pendingKeys_)==null||(u=u.get(r))==null||u.set(!0),this.keysAtom_.reportChanged()},n.ownKeys_=function(){return this.keysAtom_.reportObserved(),Ri(this.target_)},n.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},e}();function Gr(e,n){var t;if(Pt(e,Q))return e;var r=(t=n?.name)!=null?t:"ObservableObject",a=new Js(e,new Map,String(r),yf(n));return Di(e,Q,a),e}var yd=qt("ObservableObjectAdministration",Js);function Ou(e){return _u[e]||(_u[e]={get:function(){return this[Q].getObservablePropValue_(e)},set:function(t){return this[Q].setObservablePropValue_(e,t)}})}function nt(e){return ki(e)?yd(e[Q]):!1}function Pu(e,n,t){var r;(r=e.target_[st])==null||delete r[t]}var md=Qs(0),gd=function(){var e=!1,n={};return Object.defineProperty(n,"0",{set:function(){e=!0}}),Object.create(n)[0]=1,e===!1}(),ka=0,Zs=function(){};function _d(e,n){Object.setPrototypeOf?Object.setPrototypeOf(e.prototype,n):e.prototype.__proto__!==void 0?e.prototype.__proto__=n:e.prototype=n}_d(Zs,Array.prototype);var Oo=function(e){function n(r,a,u,l){var f;return u===void 0&&(u="ObservableArray"),l===void 0&&(l=!1),f=e.call(this)||this,br(function(){var h=new _o(u,a,l,!0);h.proxy_=f,ls(f,Q,h),r&&r.length&&f.spliceWithArray(0,0,r),gd&&Object.defineProperty(f,"0",md)}),f}ds(n,e);var t=n.prototype;return t.concat=function(){this[Q].atom_.reportObserved();for(var a=arguments.length,u=new Array(a),l=0;l<a;l++)u[l]=arguments[l];return Array.prototype.concat.apply(this.slice(),u.map(function(f){return bt(f)?f.slice():f}))},t[Symbol.iterator]=function(){var r=this,a=0;return Po({next:function(){return a<r.length?{value:r[a++],done:!1}:{done:!0,value:void 0}}})},Hr(n,[{key:"length",get:function(){return this[Q].getArrayLength_()},set:function(a){this[Q].setArrayLength_(a)}},{key:Symbol.toStringTag,get:function(){return"Array"}}])}(Zs);Object.entries(Ei).forEach(function(e){var n=e[0],t=e[1];n!=="concat"&&Di(Oo.prototype,n,t)});function Qs(e){return{enumerable:!1,configurable:!0,get:function(){return this[Q].get_(e)},set:function(t){this[Q].set_(e,t)}}}function wd(e){ct(Oo.prototype,""+e,Qs(e))}function el(e){if(e>ka){for(var n=ka;n<e+100;n++)wd(n);ka=e}}el(1e3);function Od(e,n,t){return new Oo(e,n,t)}function Kr(e,n){if(typeof e=="object"&&e!==null){if(bt(e))return n!==void 0&&oe(23),e[Q].atom_;if(Re(e))return e.atom_;if(Je(e)){if(n===void 0)return e.keysAtom_;var t=e.data_.get(n)||e.hasMap_.get(n);return t||oe(25,n,oo(e)),t}if(nt(e)){if(!n)return oe(26);var r=e[Q].values_.get(n);return r||oe(27,n,oo(e)),r}if(vo(e)||Vi(e)||Pi(e))return e}else if($e(e)&&Pi(e[Q]))return e[Q];oe(28)}function ht(e,n){if(e||oe(29),n!==void 0)return ht(Kr(e,n));if(vo(e)||Vi(e)||Pi(e)||Je(e)||Re(e))return e;if(e[Q])return e[Q];oe(24,e)}function oo(e,n){var t;if(n!==void 0)t=Kr(e,n);else{if(bn(e))return e.name;nt(e)||Je(e)||Re(e)?t=ht(e):t=Kr(e)}return t.name_}function br(e){var n=vr(),t=Bi(!0);Ne();try{return e()}finally{Me(),Li(t),St(n)}}var Su=Ii.toString;function tl(e,n,t){return t===void 0&&(t=-1),uo(e,n,t)}function uo(e,n,t,r,a){if(e===n)return e!==0||1/e===1/n;if(e==null||n==null)return!1;if(e!==e)return n!==n;var u=typeof e;if(u!=="function"&&u!=="object"&&typeof n!="object")return!1;var l=Su.call(e);if(l!==Su.call(n))return!1;switch(l){case"[object RegExp]":case"[object String]":return""+e==""+n;case"[object Number]":return+e!=+e?+n!=+n:+e==0?1/+e===1/n:+e==+n;case"[object Date]":case"[object Boolean]":return+e==+n;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(e)===Symbol.valueOf.call(n);case"[object Map]":case"[object Set]":t>=0&&t++;break}e=Eu(e),n=Eu(n);var f=l==="[object Array]";if(!f){if(typeof e!="object"||typeof n!="object")return!1;var h=e.constructor,m=n.constructor;if(h!==m&&!($e(h)&&h instanceof h&&$e(m)&&m instanceof m)&&"constructor"in e&&"constructor"in n)return!1}if(t===0)return!1;t<0&&(t=-1),r=r||[],a=a||[];for(var j=r.length;j--;)if(r[j]===e)return a[j]===n;if(r.push(e),a.push(n),f){if(j=e.length,j!==n.length)return!1;for(;j--;)if(!uo(e[j],n[j],t-1,r,a))return!1}else{var C=Object.keys(e),R=C.length;if(Object.keys(n).length!==R)return!1;for(var z=0;z<R;z++){var G=C[z];if(!(Pt(n,G)&&uo(e[G],n[G],t-1,r,a)))return!1}}return r.pop(),a.pop(),!0}function Eu(e){return bt(e)?e.slice():$r(e)||Je(e)||wt(e)||Re(e)?Array.from(e.entries()):e}var Au,Pd=((Au=Ti().Iterator)==null?void 0:Au.prototype)||{};function Po(e){return e[Symbol.iterator]=Sd,Object.assign(Object.create(Pd),e)}function Sd(){return this}["Symbol","Map","Set"].forEach(function(e){var n=Ti();typeof n[e]>"u"&&oe("MobX requires global '"+e+"' to be available or polyfilled")});typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:Mf,extras:{getDebugName:oo},$mobx:Q});if(!N.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!Gs)throw new Error("mobx-react-lite@3 requires mobx at least version 6 to be available");function Ed(e){e()}function Ad(e){e||(e=Ed),Yf({reactionScheduler:e})}function jd(e){return Jf(e)}var xd=1e4,Cd=1e4,Td=function(){function e(n){var t=this;Object.defineProperty(this,"finalize",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"registrations",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"sweepTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sweep",{enumerable:!0,configurable:!0,writable:!0,value:function(r){r===void 0&&(r=xd),clearTimeout(t.sweepTimeout),t.sweepTimeout=void 0;var a=Date.now();t.registrations.forEach(function(u,l){a-u.registeredAt>=r&&(t.finalize(u.value),t.registrations.delete(l))}),t.registrations.size>0&&t.scheduleSweep()}}),Object.defineProperty(this,"finalizeAllImmediately",{enumerable:!0,configurable:!0,writable:!0,value:function(){t.sweep(0)}})}return Object.defineProperty(e.prototype,"register",{enumerable:!1,configurable:!0,writable:!0,value:function(n,t,r){this.registrations.set(r,{value:t,registeredAt:Date.now()}),this.scheduleSweep()}}),Object.defineProperty(e.prototype,"unregister",{enumerable:!1,configurable:!0,writable:!0,value:function(n){this.registrations.delete(n)}}),Object.defineProperty(e.prototype,"scheduleSweep",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.sweepTimeout===void 0&&(this.sweepTimeout=setTimeout(this.sweep,Cd))}}),e}(),Id=typeof FinalizationRegistry<"u"?FinalizationRegistry:Td,so=new Id(function(e){var n;(n=e.reaction)===null||n===void 0||n.dispose(),e.reaction=null}),Da={exports:{}},Ra={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ju;function kd(){if(ju)return Ra;ju=1;var e=wc();function n(C,R){return C===R&&(C!==0||1/C===1/R)||C!==C&&R!==R}var t=typeof Object.is=="function"?Object.is:n,r=e.useState,a=e.useEffect,u=e.useLayoutEffect,l=e.useDebugValue;function f(C,R){var z=R(),G=r({inst:{value:z,getSnapshot:R}}),D=G[0].inst,H=G[1];return u(function(){D.value=z,D.getSnapshot=R,h(D)&&H({inst:D})},[C,z,R]),a(function(){return h(D)&&H({inst:D}),C(function(){h(D)&&H({inst:D})})},[C]),l(z),z}function h(C){var R=C.getSnapshot;C=C.value;try{var z=R();return!t(C,z)}catch{return!0}}function m(C,R){return R()}var j=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:f;return Ra.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:j,Ra}var xu;function Dd(){return xu||(xu=1,Da.exports=kd()),Da.exports}var Rd=Dd();function Cu(e){e.reaction=new pt("observer".concat(e.name),function(){var n;e.stateVersion=Symbol(),(n=e.onStoreChange)===null||n===void 0||n.call(e)})}function Nd(e,n){n===void 0&&(n="observed");var t=_t.useRef(null);if(!t.current){var r={reaction:null,onStoreChange:null,stateVersion:Symbol(),name:n,subscribe:function(f){return so.unregister(r),r.onStoreChange=f,r.reaction||(Cu(r),r.stateVersion=Symbol()),function(){var h;r.onStoreChange=null,(h=r.reaction)===null||h===void 0||h.dispose(),r.reaction=null}},getSnapshot:function(){return r.stateVersion}};t.current=r}var a=t.current;a.reaction||(Cu(a),so.register(t,a,a)),_t.useDebugValue(a.reaction,jd),Rd.useSyncExternalStore(a.subscribe,a.getSnapshot,a.getSnapshot);var u,l;if(a.reaction.track(function(){try{u=e()}catch(f){l=f}}),l)throw l;return u}var Na,Ma,rl=typeof Symbol=="function"&&Symbol.for,Md=(Ma=(Na=Object.getOwnPropertyDescriptor(function(){},"name"))===null||Na===void 0?void 0:Na.configurable)!==null&&Ma!==void 0?Ma:!1,Tu=rl?Symbol.for("react.forward_ref"):typeof N.forwardRef=="function"&&N.forwardRef(function(e){return null}).$$typeof,Iu=rl?Symbol.for("react.memo"):typeof N.memo=="function"&&N.memo(function(e){return null}).$$typeof;function ib(e,n){var t;if(Iu&&e.$$typeof===Iu)throw new Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");var r=(t=void 0)!==null&&t!==void 0?t:!1,a=e,u=e.displayName||e.name;if(Tu&&e.$$typeof===Tu&&(r=!0,a=e.render,typeof a!="function"))throw new Error("[mobx-react-lite] `render` property of ForwardRef was not a function");var l=function(f,h){return Nd(function(){return a(f,h)},u)};return l.displayName=e.displayName,Md&&Object.defineProperty(l,"name",{value:e.name,writable:!0,configurable:!0}),e.contextTypes&&(l.contextTypes=e.contextTypes),r&&(l=N.forwardRef(l)),l=N.memo(l),Ld(e,l),l}var Bd={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};function Ld(e,n){Object.keys(e).forEach(function(t){Bd[t]||Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))})}var Ba;Ad(is.unstable_batchedUpdates);Ba=so.finalizeAllImmediately;var ku={},Vd="warn";function Kd(){return Vd}var Ee;(function(e){e.afterCreate="afterCreate",e.afterAttach="afterAttach",e.afterCreationFinalization="afterCreationFinalization",e.beforeDetach="beforeDetach",e.beforeDestroy="beforeDestroy"})(Ee||(Ee={}));var lo=function(e,n){return lo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])},lo(e,n)};function me(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");lo(e,n);function t(){this.constructor=e}e.prototype=n===null?Object.create(n):(t.prototype=n.prototype,new t)}var vt=function(){return vt=Object.assign||function(n){for(var t,r=1,a=arguments.length;r<a;r++){t=arguments[r];for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&(n[u]=t[u])}return n},vt.apply(this,arguments)};function Fd(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)n.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(t[r[a]]=e[r[a]]);return t}function pn(e){var n=typeof Symbol=="function"&&Symbol.iterator,t=n&&e[n],r=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ut(e,n){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var r=t.call(e),a,u=[],l;try{for(;(n===void 0||n-- >0)&&!(a=r.next()).done;)u.push(a.value)}catch(f){l={error:f}}finally{try{a&&!a.done&&(t=r.return)&&t.call(r)}finally{if(l)throw l.error}}return u}function hr(e,n,t){if(arguments.length===2)for(var r=0,a=n.length,u;r<a;r++)(u||!(r in n))&&(u||(u=Array.prototype.slice.call(n,0,r)),u[r]=n[r]);return e.concat(u||Array.prototype.slice.call(n))}function nl(e){return ve(e).type}function Du(e,n){ve(e).applyPatches(dl(n))}function il(e,n){n===void 0&&(n=!0);var t=ve(e);return n?t.snapshot:t.type.getSnapshot(t,!1)}function zd(e){return ve(e).root.storedValue}function Ud(e){return ve(e).path}function qd(e){return ve(e).identifier}var al=function(){function e(n,t,r,a){Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"environment",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"_escapedSubpath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_subpath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_subpathUponDeath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_pathUponDeath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"storedValue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"aliveAtom",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_state",{enumerable:!0,configurable:!0,writable:!0,value:Ce.INITIALIZING}),Object.defineProperty(this,"_hookSubscribers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_parent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"pathAtom",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.environment=a,this.baseSetParent(t,r)}return Object.defineProperty(e.prototype,"subpath",{get:function(){return this._subpath},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"subpathUponDeath",{get:function(){return this._subpathUponDeath},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pathUponDeath",{get:function(){return this._pathUponDeath},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this.type.getValue(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},set:function(n){var t=this.isAlive;this._state=n;var r=this.isAlive;this.aliveAtom&&t!==r&&this.aliveAtom.reportChanged()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fireInternalHook",{enumerable:!1,configurable:!0,writable:!0,value:function(n){this._hookSubscribers&&this._hookSubscribers.emit(n,this,n)}}),Object.defineProperty(e.prototype,"registerHook",{enumerable:!1,configurable:!0,writable:!0,value:function(n,t){return this._hookSubscribers||(this._hookSubscribers=new vl),this._hookSubscribers.register(n,t)}}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"getReconciliationType",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.type}}),Object.defineProperty(e.prototype,"baseSetParent",{enumerable:!1,configurable:!0,writable:!0,value:function(n,t){this._parent=n,this._subpath=t,this._escapedSubpath=void 0,this.pathAtom&&this.pathAtom.reportChanged()}}),Object.defineProperty(e.prototype,"path",{get:function(){return this.getEscapedPath(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"getEscapedPath",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return n&&(this.pathAtom||(this.pathAtom=gi("path")),this.pathAtom.reportObserved()),this.parent?(this._escapedSubpath===void 0&&(this._escapedSubpath=this._subpath?cr(this._subpath):""),this.parent.getEscapedPath(n)+"/"+this._escapedSubpath):""}}),Object.defineProperty(e.prototype,"isRoot",{get:function(){return this.parent===null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isAlive",{get:function(){return this.state!==Ce.DEAD},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isDetaching",{get:function(){return this.state===Ce.DETACHING},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"observableIsAlive",{get:function(){return this.aliveAtom||(this.aliveAtom=gi("alive")),this.aliveAtom.reportObserved(),this.isAlive},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"baseFinalizeCreation",{enumerable:!1,configurable:!0,writable:!0,value:function(n){if(this.state===Ce.CREATED){if(this.parent){if(this.parent.state!==Ce.FINALIZED)return;this.fireHook(Ee.afterAttach)}this.state=Ce.FINALIZED,n&&n()}}}),Object.defineProperty(e.prototype,"baseFinalizeDeath",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._hookSubscribers&&this._hookSubscribers.clearAll(),this._subpathUponDeath=this._subpath,this._pathUponDeath=this.getEscapedPath(!1),this.baseSetParent(null,""),this.state=Ce.DEAD}}),Object.defineProperty(e.prototype,"baseAboutToDie",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.fireHook(Ee.beforeDestroy)}}),e}(),mn=function(e){me(n,e);function n(t,r,a,u,l){var f=e.call(this,t,r,a,u)||this;try{f.storedValue=t.createNewInstance(l)}catch(h){throw f.state=Ce.DEAD,h}return f.state=Ce.CREATED,f.finalizeCreation(),f}return Object.defineProperty(n.prototype,"root",{get:function(){if(!this.parent)throw new Y("This scalar node is not part of a tree");return this.parent.root},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"setParent",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){var a=this.parent!==t,u=this.subpath!==r;!a&&!u||(this.environment=void 0,this.baseSetParent(this.parent,r))}}),Object.defineProperty(n.prototype,"snapshot",{get:function(){return this.getSnapshot()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.type.getSnapshot(this)}}),Object.defineProperty(n.prototype,"toString",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t=(this.isAlive?this.path:this.pathUponDeath)||"<root>";return"".concat(this.type.name,"@").concat(t).concat(this.isAlive?"":" [dead]")}}),Object.defineProperty(n.prototype,"die",{enumerable:!1,configurable:!0,writable:!0,value:function(){!this.isAlive||this.state===Ce.DETACHING||(this.aboutToDie(),this.finalizeDeath())}}),Object.defineProperty(n.prototype,"finalizeCreation",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.baseFinalizeCreation()}}),Object.defineProperty(n.prototype,"aboutToDie",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.baseAboutToDie()}}),Object.defineProperty(n.prototype,"finalizeDeath",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.baseFinalizeDeath()}}),Object.defineProperty(n.prototype,"fireHook",{enumerable:!1,configurable:!0,writable:!0,value:function(t){this.fireInternalHook(t)}}),n}(al);mn.prototype.die=Ae(mn.prototype.die);var $d=1,Ze;(function(e){e[e.UNINITIALIZED=0]="UNINITIALIZED",e[e.CREATING=1]="CREATING",e[e.CREATED=2]="CREATED"})(Ze||(Ze={}));var ze;(function(e){e.Dispose="dispose",e.Patch="patch",e.Snapshot="snapshot"})(ze||(ze={}));var Hd={onError:function(e){throw e}},Be=function(e){me(n,e);function n(t,r,a,u,l){var f=e.call(this,t,r,a,u)||this;if(Object.defineProperty(f,"nodeId",{enumerable:!0,configurable:!0,writable:!0,value:++$d}),Object.defineProperty(f,"identifierAttribute",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(f,"identifier",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(f,"unnormalizedIdentifier",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(f,"identifierCache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(f,"isProtectionEnabled",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(f,"middlewares",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(f,"hasSnapshotPostProcessor",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(f,"_applyPatches",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(f,"_applySnapshot",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(f,"_autoUnbox",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(f,"_isRunningAction",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(f,"_hasSnapshotReaction",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(f,"_observableInstanceState",{enumerable:!0,configurable:!0,writable:!0,value:Ze.UNINITIALIZED}),Object.defineProperty(f,"_childNodes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(f,"_initialSnapshot",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(f,"_cachedInitialSnapshot",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(f,"_cachedInitialSnapshotCreated",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(f,"_snapshotComputed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(f,"_snapshotUponDeath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(f,"_internalEvents",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),f._snapshotComputed=Wr(function(){return f.getSnapshot()}),f.unbox=f.unbox.bind(f),f._initialSnapshot=l,f.identifierAttribute=t.identifierAttribute,r||(f.identifierCache=new up),f._childNodes=t.initializeChildNodes(f,f._initialSnapshot),f.identifier=null,f.unnormalizedIdentifier=null,f.identifierAttribute&&f._initialSnapshot){var h=f._initialSnapshot[f.identifierAttribute];if(h===void 0){var m=f._childNodes[f.identifierAttribute];m&&(h=m.value)}if(typeof h!="string"&&typeof h!="number")throw new Y("Instance identifier '".concat(f.identifierAttribute,"' for type '").concat(f.type.name,"' must be a string or a number"));f.identifier=Cn(h),f.unnormalizedIdentifier=h}return r?r.root.identifierCache.addNodeToCache(f):f.identifierCache.addNodeToCache(f),f}return Object.defineProperty(n.prototype,"applyPatches",{enumerable:!1,configurable:!0,writable:!0,value:function(t){this.createObservableInstanceIfNeeded(),this._applyPatches(t)}}),Object.defineProperty(n.prototype,"applySnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(t){this.createObservableInstanceIfNeeded(),this._applySnapshot(t)}}),Object.defineProperty(n.prototype,"createObservableInstanceIfNeeded",{enumerable:!1,configurable:!0,writable:!0,value:function(t){t===void 0&&(t=!0),this._observableInstanceState===Ze.UNINITIALIZED&&this.createObservableInstance(t)}}),Object.defineProperty(n.prototype,"createObservableInstance",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var r,a,u,l;t===void 0&&(t=!0),this._observableInstanceState=Ze.CREATING;for(var f=[],h=this.parent;h&&h._observableInstanceState===Ze.UNINITIALIZED;)f.unshift(h),h=h.parent;try{for(var m=pn(f),j=m.next();!j.done;j=m.next()){var C=j.value;C.createObservableInstanceIfNeeded(!1)}}catch(D){r={error:D}}finally{try{j&&!j.done&&(a=m.return)&&a.call(m)}finally{if(r)throw r.error}}var R=this.type;try{this.storedValue=R.createNewInstance(this._childNodes),this.preboot(),this._isRunningAction=!0,R.finalizeNewInstance(this,this.storedValue)}catch(D){throw this.state=Ce.DEAD,D}finally{this._isRunningAction=!1}if(this._observableInstanceState=Ze.CREATED,this._snapshotComputed.trackAndCompute(),this.isRoot&&this._addSnapshotReaction(),this._childNodes=Ur,this.state=Ce.CREATED,t){this.fireHook(Ee.afterCreate),this.finalizeCreation();try{for(var z=pn(f.reverse()),G=z.next();!G.done;G=z.next()){var C=G.value;C.fireHook(Ee.afterCreate),C.finalizeCreation()}}catch(D){u={error:D}}finally{try{G&&!G.done&&(l=z.return)&&l.call(z)}finally{if(u)throw u.error}}}}}),Object.defineProperty(n.prototype,"root",{get:function(){var t=this.parent;return t?t.root:this},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"clearParent",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this.parent){this.fireHook(Ee.beforeDetach);var t=this.state;this.state=Ce.DETACHING;var r=this.root,a=r.environment,u=r.identifierCache.splitCache(this);try{this.parent.removeChild(this.subpath),this.baseSetParent(null,""),this.environment=a,this.identifierCache=u}finally{this.state=t}}}}),Object.defineProperty(n.prototype,"setParent",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){var a=t!==this.parent,u=r!==this.subpath;!a&&!u||(a?(this.environment=void 0,t.root.identifierCache.mergeCache(this),this.baseSetParent(t,r),this.fireHook(Ee.afterAttach)):u&&this.baseSetParent(this.parent,r))}}),Object.defineProperty(n.prototype,"fireHook",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var r=this;this.fireInternalHook(t);var a=this.storedValue&&typeof this.storedValue=="object"&&this.storedValue[t];typeof a=="function"&&(hu?hu(function(){a.apply(r.storedValue)}):a.apply(this.storedValue))}}),Object.defineProperty(n.prototype,"snapshot",{get:function(){return this.hasSnapshotPostProcessor&&this.createObservableInstanceIfNeeded(),this._snapshotComputed.get()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.isAlive?this._observableInstanceState===Ze.CREATED?this._getActualSnapshot():this._getCachedInitialSnapshot():this._snapshotUponDeath}}),Object.defineProperty(n.prototype,"_getActualSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.type.getSnapshot(this)}}),Object.defineProperty(n.prototype,"_getCachedInitialSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(!this._cachedInitialSnapshotCreated){var t=this.type,r=this._childNodes,a=this._initialSnapshot;this._cachedInitialSnapshot=t.processInitialSnapshot(r,a),this._cachedInitialSnapshotCreated=!0}return this._cachedInitialSnapshot}}),Object.defineProperty(n.prototype,"isRunningAction",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._isRunningAction?!0:this.isRoot?!1:this.parent.isRunningAction()}}),Object.defineProperty(n.prototype,"assertAlive",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var r=Kd();if(!this.isAlive&&r!=="ignore"){var a=this._getAssertAliveError(t);switch(r){case"error":throw new Y(a);case"warn":_p(a)}}}}),Object.defineProperty(n.prototype,"_getAssertAliveError",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var r=this.getEscapedPath(!1)||this.pathUponDeath||"",a=t.subpath&&cr(t.subpath)||"",u=t.actionContext||Yd();u&&u.type!=="action"&&u.parentActionEvent&&(u=u.parentActionEvent);var l="";if(u&&u.name!=null){var f=u&&u.context&&Ud(u.context)||r;l="".concat(f,".").concat(u.name,"()")}return"You are trying to read or write to an object that is no longer part of a state tree. (Object type: '".concat(this.type.name,"', Path upon death: '").concat(r,"', Subpath: '").concat(a,"', Action: '").concat(l,"'). Either detach nodes first, or don't use objects after removing / replacing them in the tree.")}}),Object.defineProperty(n.prototype,"getChildNode",{enumerable:!1,configurable:!0,writable:!0,value:function(t){this.assertAlive({subpath:t}),this._autoUnbox=!1;try{return this._observableInstanceState===Ze.CREATED?this.type.getChildNode(this,t):this._childNodes[t]}finally{this._autoUnbox=!0}}}),Object.defineProperty(n.prototype,"getChildren",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.assertAlive(Ur),this._autoUnbox=!1;try{return this._observableInstanceState===Ze.CREATED?this.type.getChildren(this):cl(this._childNodes)}finally{this._autoUnbox=!0}}}),Object.defineProperty(n.prototype,"getChildType",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return this.type.getChildType(t)}}),Object.defineProperty(n.prototype,"isProtected",{get:function(){return this.root.isProtectionEnabled},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"assertWritable",{enumerable:!1,configurable:!0,writable:!0,value:function(t){if(this.assertAlive(t),!this.isRunningAction()&&this.isProtected)throw new Y("Cannot modify '".concat(this,"', the object is protected and can only be modified by using an action."))}}),Object.defineProperty(n.prototype,"removeChild",{enumerable:!1,configurable:!0,writable:!0,value:function(t){this.type.removeChild(this,t)}}),Object.defineProperty(n.prototype,"unbox",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return t&&(this.assertAlive({subpath:t.subpath||t.subpathUponDeath}),this._autoUnbox?t.value:t)}}),Object.defineProperty(n.prototype,"toString",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t=(this.isAlive?this.path:this.pathUponDeath)||"<root>",r=this.identifier?"(id: ".concat(this.identifier,")"):"";return"".concat(this.type.name,"@").concat(t).concat(r).concat(this.isAlive?"":" [dead]")}}),Object.defineProperty(n.prototype,"finalizeCreation",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t=this;this.baseFinalizeCreation(function(){var r,a;try{for(var u=pn(t.getChildren()),l=u.next();!l.done;l=u.next()){var f=l.value;f.finalizeCreation()}}catch(h){r={error:h}}finally{try{l&&!l.done&&(a=u.return)&&a.call(u)}finally{if(r)throw r.error}}t.fireInternalHook(Ee.afterCreationFinalization)})}}),Object.defineProperty(n.prototype,"detach",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(!this.isAlive)throw new Y("Error while detaching, node is not alive.");this.clearParent()}}),Object.defineProperty(n.prototype,"preboot",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t=this;this._applyPatches=gn(this.storedValue,"@APPLY_PATCHES",function(r){r.forEach(function(a){if(!a.path){t.type.applySnapshot(t,a.value);return}var u=jp(a.path),l=cp(t,u.slice(0,-1));l.applyPatchLocally(u[u.length-1],a)})}),this._applySnapshot=gn(this.storedValue,"@APPLY_SNAPSHOT",function(r){if(r!==t.snapshot)return t.type.applySnapshot(t,r)}),lr(this.storedValue,"$treenode",this),lr(this.storedValue,"toJSON",lp)}}),Object.defineProperty(n.prototype,"die",{enumerable:!1,configurable:!0,writable:!0,value:function(){!this.isAlive||this.state===Ce.DETACHING||(this.aboutToDie(),this.finalizeDeath())}}),Object.defineProperty(n.prototype,"aboutToDie",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._observableInstanceState!==Ze.UNINITIALIZED&&(this.getChildren().forEach(function(t){t.aboutToDie()}),this.baseAboutToDie(),this._internalEventsEmit(ze.Dispose),this._internalEventsClear(ze.Dispose))}}),Object.defineProperty(n.prototype,"finalizeDeath",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.getChildren().forEach(function(r){r.finalizeDeath()}),this.root.identifierCache.notifyDied(this);var t=this.snapshot;this._snapshotUponDeath=t,this._internalEventsClearAll(),this.baseFinalizeDeath()}}),Object.defineProperty(n.prototype,"onSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return this._addSnapshotReaction(),this._internalEventsRegister(ze.Snapshot,t)}}),Object.defineProperty(n.prototype,"emitSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(t){this._internalEventsEmit(ze.Snapshot,t)}}),Object.defineProperty(n.prototype,"onPatch",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return this._internalEventsRegister(ze.Patch,t)}}),Object.defineProperty(n.prototype,"emitPatch",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){if(this._internalEventsHasSubscribers(ze.Patch)){var a=r.path.substr(this.path.length)+(t.path?"/"+t.path:""),u=bp({},t,{path:a}),l=Ut(Op(u),2),f=l[0],h=l[1];this._internalEventsEmit(ze.Patch,f,h)}this.parent&&this.parent.emitPatch(t,r)}}),Object.defineProperty(n.prototype,"hasDisposer",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return this._internalEventsHas(ze.Dispose,t)}}),Object.defineProperty(n.prototype,"addDisposer",{enumerable:!1,configurable:!0,writable:!0,value:function(t){if(!this.hasDisposer(t)){this._internalEventsRegister(ze.Dispose,t,!0);return}throw new Y("cannot add a disposer when it is already registered for execution")}}),Object.defineProperty(n.prototype,"removeDisposer",{enumerable:!1,configurable:!0,writable:!0,value:function(t){if(!this._internalEventsHas(ze.Dispose,t))throw new Y("cannot remove a disposer which was never registered for execution");this._internalEventsUnregister(ze.Dispose,t)}}),Object.defineProperty(n.prototype,"removeMiddleware",{enumerable:!1,configurable:!0,writable:!0,value:function(t){if(this.middlewares){var r=this.middlewares.indexOf(t);r>=0&&this.middlewares.splice(r,1)}}}),Object.defineProperty(n.prototype,"addMiddleWare",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){var a=this;r===void 0&&(r=!0);var u={handler:t,includeHooks:r};return this.middlewares?this.middlewares.push(u):this.middlewares=[u],function(){a.removeMiddleware(u)}}}),Object.defineProperty(n.prototype,"applyPatchLocally",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){this.assertWritable({subpath:t}),this.createObservableInstanceIfNeeded(),this.type.applyPatchLocally(this,t,r)}}),Object.defineProperty(n.prototype,"_addSnapshotReaction",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t=this;if(!this._hasSnapshotReaction){var r=zf(function(){return t.snapshot},function(a){return t.emitSnapshot(a)},Hd);this.addDisposer(r),this._hasSnapshotReaction=!0}}}),Object.defineProperty(n.prototype,"_internalEventsHasSubscribers",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return!!this._internalEvents&&this._internalEvents.hasSubscribers(t)}}),Object.defineProperty(n.prototype,"_internalEventsRegister",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r,a){return a===void 0&&(a=!1),this._internalEvents||(this._internalEvents=new vl),this._internalEvents.register(t,r,a)}}),Object.defineProperty(n.prototype,"_internalEventsHas",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){return!!this._internalEvents&&this._internalEvents.has(t,r)}}),Object.defineProperty(n.prototype,"_internalEventsUnregister",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){this._internalEvents&&this._internalEvents.unregister(t,r)}}),Object.defineProperty(n.prototype,"_internalEventsEmit",{enumerable:!1,configurable:!0,writable:!0,value:function(t){for(var r,a=[],u=1;u<arguments.length;u++)a[u-1]=arguments[u];this._internalEvents&&(r=this._internalEvents).emit.apply(r,hr([t],Ut(a),!1))}}),Object.defineProperty(n.prototype,"_internalEventsClear",{enumerable:!1,configurable:!0,writable:!0,value:function(t){this._internalEvents&&this._internalEvents.clear(t)}}),Object.defineProperty(n.prototype,"_internalEventsClearAll",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._internalEvents&&this._internalEvents.clearAll()}}),n}(al);Be.prototype.createObservableInstance=Ae(Be.prototype.createObservableInstance);Be.prototype.detach=Ae(Be.prototype.detach);Be.prototype.die=Ae(Be.prototype.die);var ol,fe;(function(e){e[e.String=1]="String",e[e.Number=2]="Number",e[e.Boolean=4]="Boolean",e[e.Date=8]="Date",e[e.Literal=16]="Literal",e[e.Array=32]="Array",e[e.Map=64]="Map",e[e.Object=128]="Object",e[e.Frozen=256]="Frozen",e[e.Optional=512]="Optional",e[e.Reference=1024]="Reference",e[e.Identifier=2048]="Identifier",e[e.Late=4096]="Late",e[e.Refinement=8192]="Refinement",e[e.Union=16384]="Union",e[e.Null=32768]="Null",e[e.Undefined=65536]="Undefined",e[e.Integer=131072]="Integer",e[e.Custom=262144]="Custom",e[e.SnapshotProcessor=524288]="SnapshotProcessor",e[e.Lazy=1048576]="Lazy",e[e.Finite=2097152]="Finite",e[e.Float=4194304]="Float"})(fe||(fe={}));var ul="cannotDetermine",Wd=Symbol("$type"),At=function(){function e(n){Object.defineProperty(this,ol,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"C",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"S",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"T",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"N",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"isType",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=n}return Object.defineProperty(e.prototype,"create",{enumerable:!1,configurable:!0,writable:!0,value:function(n,t){return Et(this,n),this.instantiate(null,"",t,n).value}}),Object.defineProperty(e.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n,t){throw new Y("unimplemented method")}}),Object.defineProperty(e.prototype,"isAssignableFrom",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return n===this}}),Object.defineProperty(e.prototype,"validate",{enumerable:!1,configurable:!0,writable:!0,value:function(n,t){var r=ll(n);if(r){var a=nl(n);return this.isAssignableFrom(a)?Le():Ve(t,n)}return this.isValidSnapshot(n,t)}}),Object.defineProperty(e.prototype,"is",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return this.validate(n,[{path:"",type:this}]).length===0}}),Object.defineProperty(e.prototype,"Type",{get:function(){throw new Y("Factory.Type should not be actually called. It is just a Type signature that can be used at compile time with Typescript, by using `typeof type.Type`")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"TypeWithoutSTN",{get:function(){throw new Y("Factory.TypeWithoutSTN should not be actually called. It is just a Type signature that can be used at compile time with Typescript, by using `typeof type.TypeWithoutSTN`")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"SnapshotType",{get:function(){throw new Y("Factory.SnapshotType should not be actually called. It is just a Type signature that can be used at compile time with Typescript, by using `typeof type.SnapshotType`")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"CreationType",{get:function(){throw new Y("Factory.CreationType should not be actually called. It is just a Type signature that can be used at compile time with Typescript, by using `typeof type.CreationType`")},enumerable:!1,configurable:!0}),e}();ol=Wd;At.prototype.create=Ae(At.prototype.create);var Fr=function(e){me(n,e);function n(t){var r=e.call(this,t)||this;return Object.defineProperty(r,"identifierAttribute",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),r}return Object.defineProperty(n.prototype,"create",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){return t===void 0&&(t=this.getDefaultSnapshot()),e.prototype.create.call(this,t,r)}}),Object.defineProperty(n.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return t.createObservableInstanceIfNeeded(),t.storedValue}}),Object.defineProperty(n.prototype,"isMatchingSnapshotId",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){return!t.identifierAttribute||t.identifier===Cn(r[t.identifierAttribute])}}),Object.defineProperty(n.prototype,"tryToReconcileNode",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){return t.isDetaching?!1:t.snapshot===r||Oe(r)&&ve(r)===t?!0:t.type===this&&pl(r)&&!Oe(r)&&this.isMatchingSnapshotId(t,r)?(t.applySnapshot(r),!0):!1}}),Object.defineProperty(n.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r,a,u){var l=this.tryToReconcileNode(t,r);if(l)return t.setParent(a,u),t;if(t.die(),Oe(r)&&this.isAssignableFrom(nl(r))){var f=ve(r);return f.setParent(a,u),f}return this.instantiate(a,u,void 0,r)}}),Object.defineProperty(n.prototype,"getSubTypes",{enumerable:!1,configurable:!0,writable:!0,value:function(){return null}}),n}(At);Fr.prototype.create=Ae(Fr.prototype.create);var yr=function(e){me(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"createNewInstance",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return t}}),Object.defineProperty(n.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return t.storedValue}}),Object.defineProperty(n.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return t.storedValue}}),Object.defineProperty(n.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r,a,u){if(!t.isDetaching&&t.type===this&&t.storedValue===r)return t;var l=this.instantiate(a,u,void 0,r);return t.die(),l}}),Object.defineProperty(n.prototype,"getSubTypes",{enumerable:!1,configurable:!0,writable:!0,value:function(){return null}}),n}(At);function jt(e){return typeof e=="object"&&e&&e.isType===!0}var Gd=1,hn;function Yd(){return hn}function Xd(){return Gd++}function Jd(e,n){var t=ve(e.context);e.type==="action"&&t.assertAlive({actionContext:e});var r=t._isRunningAction;t._isRunningAction=!0;var a=hn;hn=e;try{return ep(t,e,n)}finally{hn=a,t._isRunningAction=r}}function Zd(e){if(e)return e.type==="action"?e:e.parentActionEvent}function gn(e,n,t){var r=function(){var a=Xd(),u=hn,l=Zd(u);return Jd({type:"action",name:n,id:a,args:gp(arguments),context:e,tree:zd(e),rootId:u?u.rootId:a,parentId:u?u.id:0,allParentIds:u?hr(hr([],Ut(u.allParentIds),!1),[u.id],!1):[],parentEvent:u,parentActionEvent:l},t)};return r._isMSTAction=!0,r._isFlowAction=t._isFlowAction,r}var Qd=function(){function e(n,t){Object.defineProperty(this,"arrayIndex",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"inArrayIndex",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"middlewares",{enumerable:!0,configurable:!0,writable:!0,value:[]}),t.$mst_middleware&&this.middlewares.push(t.$mst_middleware);for(var r=n;r;)r.middlewares&&this.middlewares.push(r.middlewares),r=r.parent}return Object.defineProperty(e.prototype,"isEmpty",{get:function(){return this.middlewares.length<=0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"getNextMiddleware",{enumerable:!1,configurable:!0,writable:!0,value:function(){var n=this.middlewares[this.arrayIndex];if(n){var t=n[this.inArrayIndex++];return t||(this.arrayIndex++,this.inArrayIndex=0,this.getNextMiddleware())}}}),e}();function ep(e,n,t){var r=new Qd(e,t);if(r.isEmpty)return Ae(t).apply(null,n.args);var a=null;function u(l){var f=r.getNextMiddleware(),h=f&&f.handler;if(!h)return Ae(t).apply(null,l.args);if(!f.includeHooks&&Ee[l.name])return u(l);function m(C,R){a=u(C),R&&(a=R(a))}function j(C){a=C}return h(l,m,j),a}return u(n)}function tp(e){try{return JSON.stringify(e)}catch(n){return"<Unserializable: ".concat(n,">")}}function sl(e){return typeof e=="function"?"<function".concat(e.name?" "+e.name:"",">"):Oe(e)?"<".concat(e,">"):"`".concat(tp(e),"`")}function rp(e){return e.length<280?e:"".concat(e.substring(0,272),"......").concat(e.substring(e.length-8))}function np(e){var n=e.value,t=e.context[e.context.length-1].type,r=e.context.map(function(f){var h=f.path;return h}).filter(function(f){return f.length>0}).join("/"),a=r.length>0?'at path "/'.concat(r,'" '):"",u=Oe(n)?"value of type ".concat(ve(n).type.name,":"):_n(n)?"value":"snapshot",l=t&&Oe(n)&&t.is(ve(n).snapshot);return"".concat(a).concat(u," ").concat(sl(n)," is not assignable ").concat(t?"to type: `".concat(t.name,"`"):"")+(e.message?" (".concat(e.message,")"):"")+(t?Up(t)||_n(n)?".":", expected an instance of `".concat(t.name,"` or a snapshot like `").concat(t.describe(),"` instead.")+(l?" (Note that a snapshot of the provided value is compatible with the targeted type)":""):".")}function So(e,n,t){return e.concat([{path:n,type:t}])}function Le(){return zr}function Ve(e,n,t){return[{context:e,value:n,message:t}]}function Ki(e){return e.reduce(function(n,t){return n.concat(t)},[])}function Et(e,n){wp()&&ip(e,n)}function ip(e,n){var t=e.validate(n,[{path:"",type:e}]);if(t.length>0)throw new Y(ap(e,n,t))}function ap(e,n,t){if(t.length!==0)return"Error while converting ".concat(rp(sl(n))," to `").concat(e.name,`\`:

    `)+t.map(np).join(`
    `)}var op=0,up=function(){function e(){Object.defineProperty(this,"cacheId",{enumerable:!0,configurable:!0,writable:!0,value:op++}),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:we.map()}),Object.defineProperty(this,"lastCacheModificationPerId",{enumerable:!0,configurable:!0,writable:!0,value:we.map()})}return Object.defineProperty(e.prototype,"updateLastCacheModificationPerId",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var t=this.lastCacheModificationPerId.get(n);this.lastCacheModificationPerId.set(n,t===void 0?1:t+1)}}),Object.defineProperty(e.prototype,"getLastCacheModificationPerId",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var t=this.lastCacheModificationPerId.get(n)||0;return"".concat(this.cacheId,"-").concat(t)}}),Object.defineProperty(e.prototype,"addNodeToCache",{enumerable:!1,configurable:!0,writable:!0,value:function(n,t){if(t===void 0&&(t=!0),n.identifierAttribute){var r=n.identifier;this.cache.has(r)||this.cache.set(r,we.array([],Fi));var a=this.cache.get(r);if(a.indexOf(n)!==-1)throw new Y("Already registered");a.push(n),t&&this.updateLastCacheModificationPerId(r)}}}),Object.defineProperty(e.prototype,"mergeCache",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var t=this;qs(n.identifierCache.cache).forEach(function(r){return r.forEach(function(a){t.addNodeToCache(a)})})}}),Object.defineProperty(e.prototype,"notifyDied",{enumerable:!1,configurable:!0,writable:!0,value:function(n){if(n.identifierAttribute){var t=n.identifier,r=this.cache.get(t);r&&(r.remove(n),r.length||this.cache.delete(t),this.updateLastCacheModificationPerId(n.identifier))}}}),Object.defineProperty(e.prototype,"splitCache",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var t=this,r=new e,a=n.path+"/";return id(this.cache).forEach(function(u){for(var l=Ut(u,2),f=l[0],h=l[1],m=!1,j=h.length-1;j>=0;j--){var C=h[j];(C===n||C.path.indexOf(a)===0)&&(r.addNodeToCache(C,!1),h.splice(j,1),h.length||t.cache.delete(f),m=!0)}m&&t.updateLastCacheModificationPerId(f)}),r}}),Object.defineProperty(e.prototype,"has",{enumerable:!1,configurable:!0,writable:!0,value:function(n,t){var r=this.cache.get(t);return r?r.some(function(a){return n.isAssignableFrom(a.type)}):!1}}),Object.defineProperty(e.prototype,"resolve",{enumerable:!1,configurable:!0,writable:!0,value:function(n,t){var r=this.cache.get(t);if(!r)return null;var a=r.filter(function(u){return n.isAssignableFrom(u.type)});switch(a.length){case 0:return null;case 1:return a[0];default:throw new Y("Cannot resolve a reference to type '".concat(n.name,"' with id: '").concat(t,"' unambigously, there are multiple candidates: ").concat(a.map(function(u){return u.path}).join(", ")))}}}),e}();function Eo(e,n,t,r,a){var u=ll(a);if(u){if(u.parent)throw new Y("Cannot add an object to a state tree if it is already part of the same or another state tree. Tried to assign an object to '".concat(n?n.path:"","/").concat(t,"', but it lives already at '").concat(u.path,"'"));return n&&u.setParent(n,t),u}return new Be(e,n,t,r,a)}function Ht(e,n,t,r,a){return new mn(e,n,t,r,a)}function sp(e){return e instanceof mn||e instanceof Be}var Ce;(function(e){e[e.INITIALIZING=0]="INITIALIZING",e[e.CREATED=1]="CREATED",e[e.FINALIZED=2]="FINALIZED",e[e.DETACHING=3]="DETACHING",e[e.DEAD=4]="DEAD"})(Ce||(Ce={}));function Oe(e){return!!(e&&e.$treenode)}function ve(e){if(!Oe(e))throw new Y("Value ".concat(e," is no MST Node"));return e.$treenode}function ll(e){return e&&e.$treenode||null}function lp(){return ve(this).snapshot}function cp(e,n,t){t===void 0&&(t=!0);var r=e;try{for(var a=0;a<n.length;a++){var u=n[a];if(u===".."){if(r=r.parent,r)continue}else{if(u===".")continue;if(r){if(r instanceof mn){var l=r.value;Oe(l)&&(r=ve(l))}if(r instanceof Be){var f=r.getChildType(u);if(f&&(r=r.getChildNode(u),r))continue}}}throw new Y("Could not resolve '".concat(u,"' in path '").concat(Ru(n.slice(0,a))||"/","' while resolving '").concat(Ru(n),"'"))}}catch(h){if(!t)return;throw h}return r}function cl(e){if(!e)return zr;var n=Object.keys(e);if(!n.length)return zr;var t=new Array(n.length);return n.forEach(function(r,a){t[a]=e[r]}),t}var fp=Object.toString(),zr=Object.freeze([]),Ur=Object.freeze({}),Fi=Cf().useProxies?{deep:!1}:{deep:!1,proxy:!1};Object.freeze(Fi);var Y=function(e){me(n,e);function n(t){return t===void 0&&(t="Illegal state"),e.call(this,"[mobx-state-tree] ".concat(t))||this}return n}(Error);function dp(e){return e}var pp=Number.isInteger;function hp(e){return Number(e)===e&&e%1!==0}function vp(e){return Number.isFinite(e)}function fl(e){return Array.isArray(e)||bt(e)}function dl(e){return e?fl(e)?e:[e]:zr}function bp(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];for(var r=0;r<n.length;r++){var a=n[r];for(var u in a)e[u]=a[u]}return e}function Nr(e){var n;if(e===null||typeof e!="object")return!1;var t=Object.getPrototypeOf(e);return t==null?!0:((n=t.constructor)===null||n===void 0?void 0:n.toString())===fp}function pl(e){return e!==null&&typeof e=="object"&&!(e instanceof Date)&&!(e instanceof RegExp)}function _n(e,n){return n===void 0&&(n=!0),e==null||typeof e=="string"||typeof e=="number"||typeof e=="boolean"||n&&e instanceof Date}function hl(e){return typeof e!="function"}function yp(e,n,t){nt(e)?Hs(e,n,t):Object.defineProperty(e,n,t)}function lr(e,n,t){yp(e,n,{enumerable:!1,writable:!1,configurable:!0,value:t})}var mp=function(){function e(){Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:[]})}return Object.defineProperty(e.prototype,"hasSubscribers",{get:function(){return this.handlers.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"register",{enumerable:!1,configurable:!0,writable:!0,value:function(n,t){var r=this;return t===void 0&&(t=!1),t?this.handlers.unshift(n):this.handlers.push(n),function(){r.unregister(n)}}}),Object.defineProperty(e.prototype,"has",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return this.handlers.indexOf(n)>=0}}),Object.defineProperty(e.prototype,"unregister",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var t=this.handlers.indexOf(n);t>=0&&this.handlers.splice(t,1)}}),Object.defineProperty(e.prototype,"clear",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.handlers.length=0}}),Object.defineProperty(e.prototype,"emit",{enumerable:!1,configurable:!0,writable:!0,value:function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var r=this.handlers.slice();r.forEach(function(a){return a.apply(void 0,hr([],Ut(n),!1))})}}),e}(),vl=function(){function e(){Object.defineProperty(this,"eventHandlers",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}return Object.defineProperty(e.prototype,"hasSubscribers",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var t=this.eventHandlers&&this.eventHandlers[n];return!!t&&t.hasSubscribers}}),Object.defineProperty(e.prototype,"register",{enumerable:!1,configurable:!0,writable:!0,value:function(n,t,r){r===void 0&&(r=!1),this.eventHandlers||(this.eventHandlers={});var a=this.eventHandlers[n];return a||(a=this.eventHandlers[n]=new mp),a.register(t,r)}}),Object.defineProperty(e.prototype,"has",{enumerable:!1,configurable:!0,writable:!0,value:function(n,t){var r=this.eventHandlers&&this.eventHandlers[n];return!!r&&r.has(t)}}),Object.defineProperty(e.prototype,"unregister",{enumerable:!1,configurable:!0,writable:!0,value:function(n,t){var r=this.eventHandlers&&this.eventHandlers[n];r&&r.unregister(t)}}),Object.defineProperty(e.prototype,"clear",{enumerable:!1,configurable:!0,writable:!0,value:function(n){this.eventHandlers&&delete this.eventHandlers[n]}}),Object.defineProperty(e.prototype,"clearAll",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.eventHandlers=void 0}}),Object.defineProperty(e.prototype,"emit",{enumerable:!1,configurable:!0,writable:!0,value:function(n){for(var t,r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];var u=this.eventHandlers&&this.eventHandlers[n];u&&(t=u).emit.apply(t,hr([],Ut(r),!1))}}),e}();function gp(e){for(var n=new Array(e.length),t=0;t<e.length;t++)n[t]=e[t];return n}function La(e,n){return e.indexOf(n)===0}function _p(e){console.warn(new Error("[mobx-state-tree] ".concat(e)))}function wp(){return typeof process<"u"&&ku&&ku.ENABLE_TYPE_CHECK==="true"}function Op(e){if(!("oldValue"in e))throw new Y("Patches without `oldValue` field cannot be inversed");return[Pp(e),Sp(e)]}function Pp(e){switch(e.op){case"add":return{op:"add",path:e.path,value:e.value};case"remove":return{op:"remove",path:e.path};case"replace":return{op:"replace",path:e.path,value:e.value}}}function Sp(e){switch(e.op){case"add":return{op:"remove",path:e.path};case"remove":return{op:"add",path:e.path,value:e.oldValue};case"replace":return{op:"replace",path:e.path,value:e.oldValue}}}function Ep(e){return typeof e=="number"}function cr(e){return Ep(e)===!0?""+e:e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function Ap(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function Ru(e){if(e.length===0)return"";var n=function(t){return t.map(cr).join("/")};return e[0]==="."||e[0]===".."?n(e):"/"+n(e)}function jp(e){var n=e.split("/").map(Ap),t=e===""||e==="."||e===".."||La(e,"/")||La(e,"./")||La(e,"../");if(!t)throw new Y("a json path must be either rooted, empty or relative, but got '".concat(e,"'"));return n[0]===""&&n.shift(),n}var Va=Symbol("$preProcessorFailed"),xp=function(e){me(n,e);function n(t,r,a){var u=e.call(this,a||t.name)||this;return Object.defineProperty(u,"_subtype",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(u,"_processors",{enumerable:!0,configurable:!0,writable:!0,value:r}),u}return Object.defineProperty(n.prototype,"flags",{get:function(){return this._subtype.flags|fe.SnapshotProcessor},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return"snapshotProcessor(".concat(this._subtype.describe(),")")}}),Object.defineProperty(n.prototype,"preProcessSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return this._processors.preProcessor?this._processors.preProcessor.call(null,t):t}}),Object.defineProperty(n.prototype,"preProcessSnapshotSafe",{enumerable:!1,configurable:!0,writable:!0,value:function(t){try{return this.preProcessSnapshot(t)}catch{return Va}}}),Object.defineProperty(n.prototype,"postProcessSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){return this._processors.postProcessor?this._processors.postProcessor.call(null,t,r.storedValue):t}}),Object.defineProperty(n.prototype,"_fixNode",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var r=this;Cp(t.type,this,"create"),t instanceof Be&&(t.hasSnapshotPostProcessor=!!this._processors.postProcessor);var a=t.getSnapshot;t.getSnapshot=function(){return r.postProcessSnapshot(a.call(t),t)},Yp(this._subtype)||(t.getReconciliationType=function(){return r})}}),Object.defineProperty(n.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r,a,u){var l=Oe(u)?u:this.preProcessSnapshot(u),f=this._subtype.instantiate(t,r,a,l);return this._fixNode(f),f}}),Object.defineProperty(n.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r,a,u){var l=this._subtype.reconcile(t,Oe(r)?r:this.preProcessSnapshot(r),a,u);return l!==t&&this._fixNode(l),l}}),Object.defineProperty(n.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){r===void 0&&(r=!0);var a=this._subtype.getSnapshot(t);return r?this.postProcessSnapshot(a,t):a}}),Object.defineProperty(n.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){var a=this.preProcessSnapshotSafe(t);return a===Va?Ve(r,t,"Failed to preprocess value"):this._subtype.validate(a,r)}}),Object.defineProperty(n.prototype,"getSubTypes",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._subtype}}),Object.defineProperty(n.prototype,"is",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var r=jt(t)?this._subtype:Oe(t)?t:this.preProcessSnapshotSafe(t);return r===Va?!1:this._subtype.validate(r,[{path:"",type:this._subtype}]).length===0}}),Object.defineProperty(n.prototype,"isAssignableFrom",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return this._subtype.isAssignableFrom(t)}}),Object.defineProperty(n.prototype,"isMatchingSnapshotId",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){if(!(this._subtype instanceof Fr))return!1;var a=this.preProcessSnapshot(r);return this._subtype.isMatchingSnapshotId(t,a)}}),n}(At);function Cp(e,n){for(var t,r,a=[],u=2;u<arguments.length;u++)a[u-2]=arguments[u];try{for(var l=pn(a),f=l.next();!f.done;f=l.next()){var h=f.value;e[h]=n[h].bind(n)}}catch(m){t={error:m}}finally{try{f&&!f.done&&(r=l.return)&&r.call(l)}finally{if(t)throw t.error}}}function Tp(e,n,t){return new xp(e,n,t)}var Nu="Map.put can only be used to store complex values that have an identifier type attribute";function bl(e,n){var t,r,a=e.getSubTypes();if(a===ul)return!1;if(a){var u=dl(a);try{for(var l=pn(u),f=l.next();!f.done;f=l.next()){var h=f.value;if(!bl(h,n))return!1}}catch(m){t={error:m}}finally{try{f&&!f.done&&(r=l.return)&&r.call(l)}finally{if(t)throw t.error}}}return e instanceof wn&&n.push(e),!0}var Bt;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.YES=1]="YES",e[e.NO=2]="NO"})(Bt||(Bt={}));var Ip=function(e){me(n,e);function n(t,r){return e.call(this,t,we.ref.enhancer,r)||this}return Object.defineProperty(n.prototype,"get",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return e.prototype.get.call(this,""+t)}}),Object.defineProperty(n.prototype,"has",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return e.prototype.has.call(this,""+t)}}),Object.defineProperty(n.prototype,"delete",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return e.prototype.delete.call(this,""+t)}}),Object.defineProperty(n.prototype,"set",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){return e.prototype.set.call(this,""+t,r)}}),Object.defineProperty(n.prototype,"put",{enumerable:!1,configurable:!0,writable:!0,value:function(t){if(!t)throw new Y("Map.put cannot be used to set empty values");if(Oe(t)){var r=ve(t);if(r.identifier===null)throw new Y(Nu);return this.set(r.identifier,t),t}else if(pl(t)){var a=ve(this),u=a.type;if(u.identifierMode!==Bt.YES)throw new Y(Nu);var l=u.mapIdentifierAttribute,f=t[l];if(!Ao(f)){var h=this.put(u.getChildType().create(t,a.environment));return this.put(il(h))}var m=Cn(f);return this.set(m,t),this.get(m)}else throw new Y("Map.put can only be used to store complex values")}}),n}(wo),ji=function(e){me(n,e);function n(t,r,a){a===void 0&&(a=[]);var u=e.call(this,t)||this;return Object.defineProperty(u,"_subType",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(u,"identifierMode",{enumerable:!0,configurable:!0,writable:!0,value:Bt.UNKNOWN}),Object.defineProperty(u,"mapIdentifierAttribute",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(u,"flags",{enumerable:!0,configurable:!0,writable:!0,value:fe.Map}),Object.defineProperty(u,"hookInitializers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),u._determineIdentifierMode(),u.hookInitializers=a,u}return Object.defineProperty(n.prototype,"hooks",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var r=this.hookInitializers.length>0?this.hookInitializers.concat(t):[t];return new n(this.name,this._subType,r)}}),Object.defineProperty(n.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r,a,u){return this._determineIdentifierMode(),Eo(this,t,r,a,u)}}),Object.defineProperty(n.prototype,"_determineIdentifierMode",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this.identifierMode===Bt.UNKNOWN){var t=[];if(bl(this._subType,t)){var r=t.reduce(function(a,u){if(!u.identifierAttribute)return a;if(a&&a!==u.identifierAttribute)throw new Y("The objects in a map should all have the same identifier attribute, expected '".concat(a,"', but child of type '").concat(u.name,"' declared attribute '").concat(u.identifierAttribute,"' as identifier"));return u.identifierAttribute},void 0);r?(this.identifierMode=Bt.YES,this.mapIdentifierAttribute=r):this.identifierMode=Bt.NO}}}}),Object.defineProperty(n.prototype,"initializeChildNodes",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){r===void 0&&(r={});var a=t.type._subType,u={};return Object.keys(r).forEach(function(l){u[l]=a.instantiate(t,l,void 0,r[l])}),u}}),Object.defineProperty(n.prototype,"createNewInstance",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return new Ip(t,this.name)}}),Object.defineProperty(n.prototype,"finalizeNewInstance",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){zs(r,t.unbox);var a=t.type;a.hookInitializers.forEach(function(u){var l=u(r);Object.keys(l).forEach(function(f){var h=l[f],m=gn(r,f,h);lr(r,f,m)})}),mo(r,this.willChange),go(r,this.didChange)}}),Object.defineProperty(n.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.name}}),Object.defineProperty(n.prototype,"getChildren",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return qs(t.storedValue)}}),Object.defineProperty(n.prototype,"getChildNode",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){var a=t.storedValue.get(""+r);if(!a)throw new Y("Not a child "+r);return a}}),Object.defineProperty(n.prototype,"willChange",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var r=ve(t.object),a=t.name;r.assertWritable({subpath:a});var u=r.type,l=u._subType;switch(t.type){case"update":{var f=t.newValue,h=t.object.get(a);if(f===h)return null;Et(l,f),t.newValue=l.reconcile(r.getChildNode(a),t.newValue,r,a),u.processIdentifier(a,t.newValue)}break;case"add":Et(l,t.newValue),t.newValue=l.instantiate(r,a,void 0,t.newValue),u.processIdentifier(a,t.newValue);break}return t}}),Object.defineProperty(n.prototype,"processIdentifier",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){if(this.identifierMode===Bt.YES&&r instanceof Be){var a=r.identifier;if(a!==t)throw new Y("A map of objects containing an identifier should always store the object under their own identifier. Trying to store key '".concat(a,"', but expected: '").concat(t,"'"))}}}),Object.defineProperty(n.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var r={};return t.getChildren().forEach(function(a){r[a.subpath]=a.snapshot}),r}}),Object.defineProperty(n.prototype,"processInitialSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var r={};return Object.keys(t).forEach(function(a){r[a]=t[a].getSnapshot()}),r}}),Object.defineProperty(n.prototype,"didChange",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var r=ve(t.object);switch(t.type){case"update":return void r.emitPatch({op:"replace",path:cr(t.name),value:t.newValue.snapshot,oldValue:t.oldValue?t.oldValue.snapshot:void 0},r);case"add":return void r.emitPatch({op:"add",path:cr(t.name),value:t.newValue.snapshot,oldValue:void 0},r);case"delete":var a=t.oldValue.snapshot;return t.oldValue.die(),void r.emitPatch({op:"remove",path:cr(t.name),oldValue:a},r)}}}),Object.defineProperty(n.prototype,"applyPatchLocally",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r,a){var u=t.storedValue;switch(a.op){case"add":case"replace":u.set(r,a.value);break;case"remove":u.delete(r);break}}}),Object.defineProperty(n.prototype,"applySnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){Et(this,r);var a=t.storedValue,u={};if(Array.from(a.keys()).forEach(function(f){u[f]=!1}),r)for(var l in r)a.set(l,r[l]),u[""+l]=!0;Object.keys(u).forEach(function(f){u[f]===!1&&a.delete(f)})}}),Object.defineProperty(n.prototype,"getChildType",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._subType}}),Object.defineProperty(n.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){var a=this;return Nr(t)?Ki(Object.keys(t).map(function(u){return a._subType.validate(t[u],So(r,u,a._subType))})):Ve(r,t,"Value is not a plain object")}}),Object.defineProperty(n.prototype,"getDefaultSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(){return Ur}}),Object.defineProperty(n.prototype,"removeChild",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){t.storedValue.delete(r)}}),n}(Fr);ji.prototype.applySnapshot=Ae(ji.prototype.applySnapshot);function kp(e){return new ji("Map<string, ".concat(e.name,">"),e)}var xi=function(e){me(n,e);function n(t,r,a){a===void 0&&(a=[]);var u=e.call(this,t)||this;return Object.defineProperty(u,"_subType",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(u,"flags",{enumerable:!0,configurable:!0,writable:!0,value:fe.Array}),Object.defineProperty(u,"hookInitializers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),u.hookInitializers=a,u}return Object.defineProperty(n.prototype,"hooks",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var r=this.hookInitializers.length>0?this.hookInitializers.concat(t):[t];return new n(this.name,this._subType,r)}}),Object.defineProperty(n.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r,a,u){return Eo(this,t,r,a,u)}}),Object.defineProperty(n.prototype,"initializeChildNodes",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){r===void 0&&(r=[]);var a=t.type._subType,u={};return r.forEach(function(l,f){var h=""+f;u[h]=a.instantiate(t,h,void 0,l)}),u}}),Object.defineProperty(n.prototype,"createNewInstance",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var r=vt(vt({},Fi),{name:this.name});return we.array(cl(t),r)}}),Object.defineProperty(n.prototype,"finalizeNewInstance",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){ht(r).dehancer=t.unbox;var a=t.type;a.hookInitializers.forEach(function(u){var l=u(r);Object.keys(l).forEach(function(f){var h=l[f],m=gn(r,f,h);lr(r,f,m)})}),mo(r,this.willChange),go(r,this.didChange)}}),Object.defineProperty(n.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.name}}),Object.defineProperty(n.prototype,"getChildren",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return t.storedValue.slice()}}),Object.defineProperty(n.prototype,"getChildNode",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){var a=Number(r);if(a<t.storedValue.length)return t.storedValue[a];throw new Y("Not a child: "+r)}}),Object.defineProperty(n.prototype,"willChange",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var r=ve(t.object);r.assertWritable({subpath:""+t.index});var a=r.type._subType,u=r.getChildren();switch(t.type){case"update":{if(t.newValue===t.object[t.index])return null;var l=Mu(r,a,[u[t.index]],[t.newValue],[t.index]);if(!l)return null;t.newValue=l[0]}break;case"splice":{var f=t.index,h=t.removedCount,m=t.added,j=Mu(r,a,u.slice(f,f+h),m,m.map(function(R,z){return f+z}));if(!j)return null;t.added=j;for(var C=f+h;C<u.length;C++)u[C].setParent(r,""+(C+m.length-h))}break}return t}}),Object.defineProperty(n.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return t.getChildren().map(function(r){return r.snapshot})}}),Object.defineProperty(n.prototype,"processInitialSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var r=[];return Object.keys(t).forEach(function(a){r.push(t[a].getSnapshot())}),r}}),Object.defineProperty(n.prototype,"didChange",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var r=ve(t.object);switch(t.type){case"update":return void r.emitPatch({op:"replace",path:""+t.index,value:t.newValue.snapshot,oldValue:t.oldValue?t.oldValue.snapshot:void 0},r);case"splice":if(t.removedCount&&t.addedCount===t.object.length)return void r.emitPatch({op:"replace",path:"",value:r.snapshot,oldValue:t.removed.map(function(u){return u.snapshot})},r);for(var a=t.removedCount-1;a>=0;a--)r.emitPatch({op:"remove",path:""+(t.index+a),oldValue:t.removed[a].snapshot},r);for(var a=0;a<t.addedCount;a++)r.emitPatch({op:"add",path:""+(t.index+a),value:t.added[a].snapshot,oldValue:void 0},r);return}}}),Object.defineProperty(n.prototype,"applyPatchLocally",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r,a){var u=t.storedValue,l=r==="-"?u.length:Number(r);switch(a.op){case"replace":u[l]=a.value;break;case"add":u.splice(l,0,a.value);break;case"remove":u.splice(l,1);break}}}),Object.defineProperty(n.prototype,"applySnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){Et(this,r);var a=t.storedValue;a.replace(r)}}),Object.defineProperty(n.prototype,"getChildType",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._subType}}),Object.defineProperty(n.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){var a=this;return fl(t)?Ki(t.map(function(u,l){return a._subType.validate(u,So(r,""+l,a._subType))})):Ve(r,t,"Value is not an array")}}),Object.defineProperty(n.prototype,"getDefaultSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(){return zr}}),Object.defineProperty(n.prototype,"removeChild",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){t.storedValue.splice(Number(r),1)}}),n}(Fr);xi.prototype.applySnapshot=Ae(xi.prototype.applySnapshot);function Dp(e){return new xi("".concat(e.name,"[]"),e)}function Mu(e,n,t,r,a){for(var u=!0,l=0;;l++){var f=l<=r.length-1,h=t[l],m=f?r[l]:void 0,j=""+a[l];if(sp(m)&&(m=m.storedValue),!h&&!f)break;if(!f)u=!1,t.splice(l,1),h instanceof Be&&h.createObservableInstanceIfNeeded(),h.die(),l--;else if(h)if(Bu(h,m))t[l]=Ka(n,e,j,m,h);else{for(var R=void 0,z=l;z<t.length;z++)if(Bu(t[z],m)){R=t.splice(z,1)[0];break}u=!1;var C=Ka(n,e,j,m,R);t.splice(l,0,C)}else{if(Oe(m)&&ve(m).parent===e)throw new Y("Cannot add an object to a state tree if it is already part of the same or another state tree. Tried to assign an object to '".concat(e.path,"/").concat(j,"', but it lives already at '").concat(ve(m).path,"'"));u=!1;var C=Ka(n,e,j,m);t.splice(l,0,C)}}return u?null:t}function Ka(e,n,t,r,a){Et(e,r);function u(){if(Oe(r)){var f=ve(r);if(f.assertAlive(Ur),f.parent!==null&&f.parent===n)return f.setParent(n,t),f}return a?e.reconcile(a,r,n,t):e.instantiate(n,t,void 0,r)}var l=u();return a&&a!==l&&(a instanceof Be&&a.createObservableInstanceIfNeeded(),a.die()),l}function Bu(e,n){if(!e.isAlive)return!1;if(Oe(n)){var t=ve(n);return t.isAlive&&t===e}if(e.snapshot===n)return!0;if(!(e instanceof Be))return!1;var r=e.getReconciliationType();return e.identifier!==null&&e.identifierAttribute&&Nr(n)&&r.is(n)&&r.isMatchingSnapshotId(e,n)}var Lu="preProcessSnapshot",Vu="postProcessSnapshot";function Rp(){return ve(this).toString()}var Ku={name:"AnonymousModel",properties:{},initializers:zr};function Np(e){var n=Object.keys(e),t=new Set;return n.forEach(function(r){if(t.has(r))throw new Y("".concat(r," is declared twice in the model. Model should not contain the same keys"));t.add(r)}),n.reduce(function(r,a){if(a in Ee)throw new Y("Hook '".concat(a,"' was defined as property. Hooks should be defined as part of the actions"));var u=Object.getOwnPropertyDescriptor(e,a);if("get"in u)throw new Y("Getters are not supported as properties. Please use views instead");var l=u.value;if(l==null)throw new Y("The default value of an attribute cannot be null or undefined as the type cannot be inferred. Did you mean `types.maybe(someType)`?");if(_n(l))r[a]=fr(zp(l),l);else if(l instanceof ji)r[a]=fr(l,{});else if(l instanceof xi)r[a]=fr(l,[]);else if(!jt(l))throw new Y("Invalid type definition for property '".concat(a,"', cannot infer a type from a value like '").concat(l,"' (").concat(typeof l,")"));return r},vt({},e))}var wn=function(e){me(n,e);function n(t){var r=e.call(this,t.name||Ku.name)||this;return Object.defineProperty(r,"flags",{enumerable:!0,configurable:!0,writable:!0,value:fe.Object}),Object.defineProperty(r,"initializers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"properties",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"preProcessor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"postProcessor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"propertyNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"named",{enumerable:!0,configurable:!0,writable:!0,value:function(a){return r.cloneAndEnhance({name:a})}}),Object.defineProperty(r,"props",{enumerable:!0,configurable:!0,writable:!0,value:function(a){return r.cloneAndEnhance({properties:a})}}),Object.defineProperty(r,"preProcessSnapshot",{enumerable:!0,configurable:!0,writable:!0,value:function(a){var u=r.preProcessor;return u?r.cloneAndEnhance({preProcessor:function(l){return u(a(l))}}):r.cloneAndEnhance({preProcessor:a})}}),Object.defineProperty(r,"postProcessSnapshot",{enumerable:!0,configurable:!0,writable:!0,value:function(a){var u=r.postProcessor;return u?r.cloneAndEnhance({postProcessor:function(l){return a(u(l))}}):r.cloneAndEnhance({postProcessor:a})}}),Object.assign(r,Ku,t),r.properties=Np(r.properties),r.properties,r.propertyNames=Object.keys(r.properties),r.identifierAttribute=r._getIdentifierAttribute(),r}return Object.defineProperty(n.prototype,"_getIdentifierAttribute",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t=void 0;return this.forAllProps(function(r,a){if(a.flags&fe.Identifier){if(t)throw new Y("Cannot define property '".concat(r,"' as object identifier, property '").concat(t,"' is already defined as identifier property"));t=r}}),t}}),Object.defineProperty(n.prototype,"cloneAndEnhance",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return new n({name:t.name||this.name,properties:Object.assign({},this.properties,t.properties),initializers:this.initializers.concat(t.initializers||[]),preProcessor:t.preProcessor||this.preProcessor,postProcessor:t.postProcessor||this.postProcessor})}}),Object.defineProperty(n.prototype,"actions",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var r=this,a=function(u){return r.instantiateActions(u,t(u)),u};return this.cloneAndEnhance({initializers:[a]})}}),Object.defineProperty(n.prototype,"instantiateActions",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){var a=this;if(!Nr(r))throw new Y("actions initializer should return a plain object containing actions");Object.getOwnPropertyNames(r).forEach(function(u){if(u in a.properties)throw new Y("'".concat(u,"' is a property and cannot be declared as an action"));if(u===Lu)throw new Y("Cannot define action '".concat(Lu,"', it should be defined using 'type.preProcessSnapshot(fn)' instead"));if(u===Vu)throw new Y("Cannot define action '".concat(Vu,"', it should be defined using 'type.postProcessSnapshot(fn)' instead"));var l=r[u],f=t[u];if(u in Ee&&f){var h=l;l=function(){f.apply(null,arguments),h.apply(null,arguments)}}var m=l.$mst_middleware,j=l.bind(r);j._isFlowAction=l._isFlowAction||!1,j.$mst_middleware=m;var C=gn(t,u,j);r[u]=C,lr(t,u,C)})}}),Object.defineProperty(n.prototype,"volatile",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var r=this;if(typeof t!="function")throw new Y("You passed an ".concat(typeof t," to volatile state as an argument, when function is expected"));var a=function(u){return r.instantiateVolatileState(u,t(u)),u};return this.cloneAndEnhance({initializers:[a]})}}),Object.defineProperty(n.prototype,"instantiateVolatileState",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){var a=this;if(!Nr(r))throw new Y("volatile state initializer should return a plain object containing state");Object.getOwnPropertyNames(r).forEach(function(u){if(u in a.properties)throw new Y("'".concat(u,"' is a property and cannot be declared as volatile state"));$s(t,u,r[u])})}}),Object.defineProperty(n.prototype,"extend",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var r=this,a=function(u){var l=t(u),f=l.actions,h=l.views,m=l.state,j=Fd(l,["actions","views","state"]);for(var C in j)throw new Y("The `extend` function should return an object with a subset of the fields 'actions', 'views' and 'state'. Found invalid key '".concat(C,"'"));return m&&r.instantiateVolatileState(u,m),h&&r.instantiateViews(u,h),f&&r.instantiateActions(u,f),u};return this.cloneAndEnhance({initializers:[a]})}}),Object.defineProperty(n.prototype,"views",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var r=this,a=function(u){return r.instantiateViews(u,t(u)),u};return this.cloneAndEnhance({initializers:[a]})}}),Object.defineProperty(n.prototype,"instantiateViews",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){var a=this;if(!Nr(r))throw new Y("views initializer should return a plain object containing views");Object.getOwnPropertyNames(r).forEach(function(u){var l;if(u in a.properties)throw new Y("'".concat(u,"' is a property and cannot be declared as a view"));var f=Object.getOwnPropertyDescriptor(r,u);if("get"in f)Hs(t,u,f),Gs(t,(l={},l[u]=Wr,l));else if(typeof f.value=="function")lr(t,u,f.value);else throw new Y("A view member should either be a function or getter based property")})}}),Object.defineProperty(n.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r,a,u){var l=Oe(u)?u:this.applySnapshotPreProcessor(u);return Eo(this,t,r,a,l)}}),Object.defineProperty(n.prototype,"initializeChildNodes",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){r===void 0&&(r={});var a=t.type,u={};return a.forAllProps(function(l,f){u[l]=f.instantiate(t,l,void 0,r[l])}),u}}),Object.defineProperty(n.prototype,"createNewInstance",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var r=vt(vt({},Fi),{name:this.name});return we.object(t,Ur,r)}}),Object.defineProperty(n.prototype,"finalizeNewInstance",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){lr(r,"toString",Rp),this.forAllProps(function(a){zs(r,a,t.unbox)}),this.initializers.reduce(function(a,u){return u(a)},r),mo(r,this.willChange),go(r,this.didChange)}}),Object.defineProperty(n.prototype,"willChange",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var r=t,a=ve(r.object),u=r.name;a.assertWritable({subpath:u});var l=a.type.properties[u];return l&&(Et(l,r.newValue),r.newValue=l.reconcile(a.getChildNode(u),r.newValue,a,u)),r}}),Object.defineProperty(n.prototype,"didChange",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var r=t,a=ve(r.object),u=a.type.properties[r.name];if(u){var l=r.oldValue?r.oldValue.snapshot:void 0;a.emitPatch({op:"replace",path:cr(r.name),value:r.newValue.snapshot,oldValue:l},a)}}}),Object.defineProperty(n.prototype,"getChildren",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var r=this,a=[];return this.forAllProps(function(u){a.push(r.getChildNode(t,u))}),a}}),Object.defineProperty(n.prototype,"getChildNode",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){var a;if(!(r in this.properties))throw new Y("Not a value property: "+r);var u=ht(t.storedValue,r),l=(a=u.raw)===null||a===void 0?void 0:a.call(u);if(!l)throw new Y("Node not available for property "+r);return l}}),Object.defineProperty(n.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){var a=this;r===void 0&&(r=!0);var u={};return this.forAllProps(function(l,f){var h=Kr(t.storedValue,l);h.reportObserved(),u[l]=a.getChildNode(t,l).snapshot}),r?this.applySnapshotPostProcessor(u):u}}),Object.defineProperty(n.prototype,"processInitialSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var r={};return Object.keys(t).forEach(function(a){r[a]=t[a].getSnapshot()}),this.applySnapshotPostProcessor(r)}}),Object.defineProperty(n.prototype,"applyPatchLocally",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r,a){if(!(a.op==="replace"||a.op==="add"))throw new Y("object does not support operation ".concat(a.op));t.storedValue[r]=a.value}}),Object.defineProperty(n.prototype,"applySnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){Et(this,r);var a=this.applySnapshotPreProcessor(r);this.forAllProps(function(u){t.storedValue[u]=a[u]})}}),Object.defineProperty(n.prototype,"applySnapshotPreProcessor",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var r=this.preProcessor;return r?r.call(null,t):t}}),Object.defineProperty(n.prototype,"applySnapshotPostProcessor",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var r=this.postProcessor;return r?r.call(null,t):t}}),Object.defineProperty(n.prototype,"getChildType",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return this.properties[t]}}),Object.defineProperty(n.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){var a=this,u=this.applySnapshotPreProcessor(t);return Nr(u)?Ki(this.propertyNames.map(function(l){return a.properties[l].validate(u[l],So(r,l,a.properties[l]))})):Ve(r,u,"Value is not a plain object")}}),Object.defineProperty(n.prototype,"forAllProps",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var r=this;this.propertyNames.forEach(function(a){return t(a,r.properties[a])})}}),Object.defineProperty(n.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t=this;return"{ "+this.propertyNames.map(function(r){return r+": "+t.properties[r].describe()}).join("; ")+" }"}}),Object.defineProperty(n.prototype,"getDefaultSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(){return Ur}}),Object.defineProperty(n.prototype,"removeChild",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){t.storedValue[r]=void 0}}),n}(Fr);wn.prototype.applySnapshot=Ae(wn.prototype.applySnapshot);function Mp(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var t=typeof e[0]=="string"?e.shift():"AnonymousModel",r=e.shift()||{};return new wn({name:t,properties:r})}function Bp(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var t=typeof e[0]=="string",r=t?e[0]:"AnonymousModel";return t&&e.shift(),e.reduce(function(a,u){return a.cloneAndEnhance({name:a.name+"_"+u.name,properties:u.properties,initializers:u.initializers,preProcessor:function(l){return u.applySnapshotPreProcessor(a.applySnapshotPreProcessor(l))},postProcessor:function(l){return u.applySnapshotPostProcessor(a.applySnapshotPostProcessor(l))}})}).named(r)}function Lp(e){return jt(e)&&(e.flags&fe.Object)>0}var xt=function(e){me(n,e);function n(t,r,a,u){u===void 0&&(u=dp);var l=e.call(this,t)||this;return Object.defineProperty(l,"flags",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(l,"checker",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(l,"initializer",{enumerable:!0,configurable:!0,writable:!0,value:u}),l.flags=r,l}return Object.defineProperty(n.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.name}}),Object.defineProperty(n.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r,a,u){return Ht(this,t,r,a,u)}}),Object.defineProperty(n.prototype,"createNewInstance",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return this.initializer(t)}}),Object.defineProperty(n.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){if(_n(t)&&this.checker(t))return Le();var a=this.name==="Date"?"Date or a unix milliseconds timestamp":this.name;return Ve(r,t,"Value is not a ".concat(a))}}),n}(yr),yl=new xt("string",fe.String,function(e){return typeof e=="string"}),ml=new xt("number",fe.Number,function(e){return typeof e=="number"}),Vp=new xt("integer",fe.Integer,function(e){return pp(e)}),Kp=new xt("float",fe.Float,function(e){return hp(e)}),Fp=new xt("finite",fe.Finite,function(e){return vp(e)}),gl=new xt("boolean",fe.Boolean,function(e){return typeof e=="boolean"}),_l=new xt("null",fe.Null,function(e){return e===null}),wl=new xt("undefined",fe.Undefined,function(e){return e===void 0}),Ol=new xt("Date",fe.Date,function(e){return typeof e=="number"||e instanceof Date},function(e){return e instanceof Date?e:new Date(e)});Ol.getSnapshot=function(e){return e.storedValue.getTime()};var Pl=Ol;function zp(e){switch(typeof e){case"string":return yl;case"number":return ml;case"boolean":return gl;case"object":if(e instanceof Date)return Pl}throw new Y("Cannot determine primitive type from value "+e)}function Up(e){return jt(e)&&(e.flags&(fe.String|fe.Number|fe.Integer|fe.Boolean|fe.Date))>0}var qp=function(e){me(n,e);function n(t){var r=e.call(this,JSON.stringify(t))||this;return Object.defineProperty(r,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"flags",{enumerable:!0,configurable:!0,writable:!0,value:fe.Literal}),r.value=t,r}return Object.defineProperty(n.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r,a,u){return Ht(this,t,r,a,u)}}),Object.defineProperty(n.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return JSON.stringify(this.value)}}),Object.defineProperty(n.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){return _n(t)&&t===this.value?Le():Ve(r,t,"Value is not a literal ".concat(JSON.stringify(this.value)))}}),n}(yr);function Sl(e){return new qp(e)}var $p=function(e){me(n,e);function n(t,r,a,u){var l=e.call(this,t)||this;return Object.defineProperty(l,"_subtype",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(l,"_predicate",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(l,"_message",{enumerable:!0,configurable:!0,writable:!0,value:u}),l}return Object.defineProperty(n.prototype,"flags",{get:function(){return this._subtype.flags|fe.Refinement},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.name}}),Object.defineProperty(n.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r,a,u){return this._subtype.instantiate(t,r,a,u)}}),Object.defineProperty(n.prototype,"isAssignableFrom",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return this._subtype.isAssignableFrom(t)}}),Object.defineProperty(n.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){var a=this._subtype.validate(t,r);if(a.length>0)return a;var u=Oe(t)?ve(t).snapshot:t;return this._predicate(u)?Le():Ve(r,t,this._message(t))}}),Object.defineProperty(n.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r,a,u){return this._subtype.reconcile(t,r,a,u)}}),Object.defineProperty(n.prototype,"getSubTypes",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._subtype}}),n}(At);function Hp(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var t=typeof e[0]=="string"?e.shift():jt(e[0])?e[0].name:null,r=e[0],a=e[1],u=e[2]?e[2]:function(l){return"Value does not respect the refinement predicate"};return new $p(t,r,a,u)}function Wp(e,n){var t=typeof e=="string"?n:e,r=zi.apply(void 0,hr([],Ut(t.map(function(a){return Sl(""+a)})),!1));return typeof e=="string"&&(r.name=e),r}var Gp=function(e){me(n,e);function n(t,r,a){var u=e.call(this,t)||this;return Object.defineProperty(u,"_types",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(u,"_dispatcher",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(u,"_eager",{enumerable:!0,configurable:!0,writable:!0,value:!0}),a=vt({eager:!0,dispatcher:void 0},a),u._dispatcher=a.dispatcher,a.eager||(u._eager=!1),u}return Object.defineProperty(n.prototype,"flags",{get:function(){var t=fe.Union;return this._types.forEach(function(r){t|=r.flags}),t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isAssignableFrom",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return this._types.some(function(r){return r.isAssignableFrom(t)})}}),Object.defineProperty(n.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return"("+this._types.map(function(t){return t.describe()}).join(" | ")+")"}}),Object.defineProperty(n.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r,a,u){var l=this.determineType(u,void 0);if(!l)throw new Y("No matching type for union "+this.describe());return l.instantiate(t,r,a,u)}}),Object.defineProperty(n.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r,a,u){var l=this.determineType(r,t.getReconciliationType());if(!l)throw new Y("No matching type for union "+this.describe());return l.reconcile(t,r,a,u)}}),Object.defineProperty(n.prototype,"determineType",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){return this._dispatcher?this._dispatcher(t):r?r.is(t)?r:this._types.filter(function(a){return a!==r}).find(function(a){return a.is(t)}):this._types.find(function(a){return a.is(t)})}}),Object.defineProperty(n.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){if(this._dispatcher)return this._dispatcher(t).validate(t,r);for(var a=[],u=0,l=0;l<this._types.length;l++){var f=this._types[l],h=f.validate(t,r);if(h.length===0){if(this._eager)return Le();u++}else a.push(h)}return u===1?Le():Ve(r,t,"No type is applicable for the union").concat(Ki(a))}}),Object.defineProperty(n.prototype,"getSubTypes",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._types}}),n}(At);function zi(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];var r=jt(e)?void 0:e,a=jt(e)?hr([e],Ut(n),!1):n,u="("+a.map(function(l){return l.name}).join(" | ")+")";return new Gp(u,a,r)}function Yp(e){return jt(e)&&(e.flags&fe.Union)>0}var Xp=function(e){me(n,e);function n(t,r,a){var u=e.call(this,t.name)||this;return Object.defineProperty(u,"_subtype",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(u,"_defaultValue",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(u,"optionalValues",{enumerable:!0,configurable:!0,writable:!0,value:a}),u}return Object.defineProperty(n.prototype,"flags",{get:function(){return this._subtype.flags|fe.Optional},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._subtype.describe()+"?"}}),Object.defineProperty(n.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r,a,u){if(this.optionalValues.indexOf(u)>=0){var l=this.getDefaultInstanceOrSnapshot();return this._subtype.instantiate(t,r,a,l)}return this._subtype.instantiate(t,r,a,u)}}),Object.defineProperty(n.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r,a,u){return this._subtype.reconcile(t,this.optionalValues.indexOf(r)<0&&this._subtype.is(r)?r:this.getDefaultInstanceOrSnapshot(),a,u)}}),Object.defineProperty(n.prototype,"getDefaultInstanceOrSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t=typeof this._defaultValue=="function"?this._defaultValue():this._defaultValue;return typeof this._defaultValue=="function"&&Et(this,t),t}}),Object.defineProperty(n.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){return this.optionalValues.indexOf(t)>=0?Le():this._subtype.validate(t,r)}}),Object.defineProperty(n.prototype,"isAssignableFrom",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return this._subtype.isAssignableFrom(t)}}),Object.defineProperty(n.prototype,"getSubTypes",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._subtype}}),n}(At);function Jp(e,n){if(typeof n!="function"&&Oe(n))throw new Y("default value cannot be an instance, pass a snapshot or a function that creates an instance/snapshot instead")}function fr(e,n,t){return Jp(e,n),new Xp(e,n,t||Zp)}var Zp=[void 0],Qp=fr(wl,void 0),eh=fr(_l,null);function El(e){return zi(e,Qp)}function th(e){return zi(e,eh)}var rh=function(e){me(n,e);function n(t,r){var a=e.call(this,t)||this;return Object.defineProperty(a,"_definition",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(a,"_subType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),a}return Object.defineProperty(n.prototype,"flags",{get:function(){return(this._subType?this._subType.flags:0)|fe.Late},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"getSubType",{enumerable:!1,configurable:!0,writable:!0,value:function(t){if(!this._subType){var r=void 0;try{r=this._definition()}catch(a){if(a instanceof ReferenceError)r=void 0;else throw a}if(t&&r===void 0)throw new Y("Late type seems to be used too early, the definition (still) returns undefined");r&&(this._subType=r)}return this._subType}}),Object.defineProperty(n.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r,a,u){return this.getSubType(!0).instantiate(t,r,a,u)}}),Object.defineProperty(n.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r,a,u){return this.getSubType(!0).reconcile(t,r,a,u)}}),Object.defineProperty(n.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t=this.getSubType(!1);return t?t.name:"<uknown late type>"}}),Object.defineProperty(n.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){var a=this.getSubType(!1);return a?a.validate(t,r):Le()}}),Object.defineProperty(n.prototype,"isAssignableFrom",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var r=this.getSubType(!1);return r?r.isAssignableFrom(t):!1}}),Object.defineProperty(n.prototype,"getSubTypes",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t=this.getSubType(!1);return t||ul}}),n}(At);function nh(e,n){var t=typeof e=="string"?e:"late(".concat(e.toString(),")"),r=typeof e=="string"?n:e;return new rh(t,r)}function ih(e,n){return new ah(e,n)}var ah=function(e){me(n,e);function n(t,r){var a=e.call(this,t)||this;return Object.defineProperty(a,"options",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(a,"flags",{enumerable:!0,configurable:!0,writable:!0,value:fe.Lazy}),Object.defineProperty(a,"loadedType",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(a,"pendingNodeList",{enumerable:!0,configurable:!0,writable:!0,value:we.array()}),bu(function(){return a.pendingNodeList.length>0&&a.pendingNodeList.some(function(u){return u.isAlive&&a.options.shouldLoadPredicate(u.parent?u.parent.value:null)})},function(){a.options.loadType().then(Ae(function(u){a.loadedType=u,a.pendingNodeList.forEach(function(l){l.parent&&a.loadedType&&l.parent.applyPatches([{op:"replace",path:"/".concat(l.subpath),value:l.snapshot}])})}))}),a}return Object.defineProperty(n.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return"<lazy ".concat(this.name,">")}}),Object.defineProperty(n.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r,a,u){var l=this;if(this.loadedType)return this.loadedType.instantiate(t,r,a,u);var f=Ht(this,t,r,a,u);return this.pendingNodeList.push(f),bu(function(){return!f.isAlive},function(){return l.pendingNodeList.splice(l.pendingNodeList.indexOf(f),1)}),f}}),Object.defineProperty(n.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){return this.loadedType?this.loadedType.validate(t,r):hl(t)?Le():Ve(r,t,"Value is not serializable and cannot be lazy")}}),Object.defineProperty(n.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r,a,u){return this.loadedType?(t.die(),this.loadedType.instantiate(a,u,a.environment,r)):e.prototype.reconcile.call(this,t,r,a,u)}}),n}(yr),Al=function(e){me(n,e);function n(t){var r=e.call(this,t?"frozen(".concat(t.name,")"):"frozen")||this;return Object.defineProperty(r,"subType",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(r,"flags",{enumerable:!0,configurable:!0,writable:!0,value:fe.Frozen}),r}return Object.defineProperty(n.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return"<any immutable value>"}}),Object.defineProperty(n.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r,a,u){return Ht(this,t,r,a,u)}}),Object.defineProperty(n.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){return hl(t)?this.subType?this.subType.validate(t,r):Le():Ve(r,t,"Value is not serializable and cannot be frozen")}}),n}(yr),Fu=new Al;function oh(e){return arguments.length===0?Fu:jt(e)?new Al(e):fr(Fu,e)}function uh(e){switch(e){case Ee.beforeDestroy:return"destroy";case Ee.beforeDetach:return"detach";default:return}}var sh=function(){function e(n,t){if(Object.defineProperty(this,"targetType",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"identifier",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"node",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"resolvedReference",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Ao(n))this.identifier=n;else if(Oe(n)){var r=ve(n);if(!r.identifierAttribute)throw new Y("Can only store references with a defined identifier attribute.");var a=r.unnormalizedIdentifier;if(a==null)throw new Y("Can only store references to tree nodes with a defined identifier.");this.identifier=a}else throw new Y("Can only store references to tree nodes or identifiers, got: '".concat(n,"'"))}return Object.defineProperty(e.prototype,"updateResolvedReference",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var t=Cn(this.identifier),r=n.root,a=r.identifierCache.getLastCacheModificationPerId(t);if(!this.resolvedReference||this.resolvedReference.lastCacheModification!==a){var u=this.targetType,l=r.identifierCache.resolve(u,t);if(!l)throw new lh("[mobx-state-tree] Failed to resolve reference '".concat(this.identifier,"' to type '").concat(this.targetType.name,"' (from node: ").concat(n.path,")"));this.resolvedReference={node:l,lastCacheModification:a}}}}),Object.defineProperty(e.prototype,"resolvedValue",{get:function(){return this.updateResolvedReference(this.node),this.resolvedReference.node.value},enumerable:!1,configurable:!0}),e}(),lh=function(e){me(n,e);function n(t){var r=e.call(this,t)||this;return Object.setPrototypeOf(r,n.prototype),r}return n}(Error),jl=function(e){me(n,e);function n(t,r){var a=e.call(this,"reference(".concat(t.name,")"))||this;return Object.defineProperty(a,"targetType",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(a,"onInvalidated",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(a,"flags",{enumerable:!0,configurable:!0,writable:!0,value:fe.Reference}),a}return Object.defineProperty(n.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.name}}),Object.defineProperty(n.prototype,"isAssignableFrom",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return this.targetType.isAssignableFrom(t)}}),Object.defineProperty(n.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){return Ao(t)?Le():Ve(r,t,"Value is not a valid identifier, which is a string or a number")}}),Object.defineProperty(n.prototype,"fireInvalidated",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r,a,u){var l=r.parent;if(!(!l||!l.isAlive)){var f=l.storedValue;f&&this.onInvalidated({cause:t,parent:f,invalidTarget:u?u.storedValue:void 0,invalidId:a,replaceRef:function(h){Du(r.root.storedValue,{op:"replace",value:h,path:r.path})},removeRef:function(){Lp(l.type)?this.replaceRef(void 0):Du(r.root.storedValue,{op:"remove",path:r.path})}})}}}),Object.defineProperty(n.prototype,"addTargetNodeWatcher",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){var a=this,u=this.getValue(t);if(u){var l=ve(u),f=function(j,C){var R=uh(C);R&&a.fireInvalidated(R,t,r,l)},h=l.registerHook(Ee.beforeDetach,f),m=l.registerHook(Ee.beforeDestroy,f);return function(){h(),m()}}}}),Object.defineProperty(n.prototype,"watchTargetNodeForInvalidations",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r,a){var u=this;if(this.onInvalidated){var l;t.registerHook(Ee.beforeDestroy,function(){l&&l()});var f=function(h){l&&l();var m=t.parent,j=m&&m.storedValue;if(m&&m.isAlive&&j){var C=void 0;a?C=!!a.get(r,j):C=t.root.identifierCache.has(u.targetType,Cn(r)),C?l=u.addTargetNodeWatcher(t,r):h||u.fireInvalidated("invalidSnapshotReference",t,r,null)}};t.state===Ce.FINALIZED?f(!0):(t.isRoot||t.root.registerHook(Ee.afterCreationFinalization,function(){t.parent&&t.parent.createObservableInstanceIfNeeded()}),t.registerHook(Ee.afterAttach,function(){f(!1)}))}}}),n}(yr),ch=function(e){me(n,e);function n(t,r){return e.call(this,t,r)||this}return Object.defineProperty(n.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(t){if(t.isAlive){var r=t.storedValue;return r.resolvedValue}}}),Object.defineProperty(n.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var r=t.storedValue;return r.identifier}}),Object.defineProperty(n.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r,a,u){var l=Oe(u)?qd(u):u,f=new sh(u,this.targetType),h=Ht(this,t,r,a,f);return f.node=h,this.watchTargetNodeForInvalidations(h,l,void 0),h}}),Object.defineProperty(n.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r,a,u){if(!t.isDetaching&&t.type===this){var l=Oe(r),f=t.storedValue;if(!l&&f.identifier===r||l&&f.resolvedValue===r)return t.setParent(a,u),t}var h=this.instantiate(a,u,void 0,r);return t.die(),h}}),n}(jl),fh=function(e){me(n,e);function n(t,r,a){var u=e.call(this,t,a)||this;return Object.defineProperty(u,"options",{enumerable:!0,configurable:!0,writable:!0,value:r}),u}return Object.defineProperty(n.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(t){if(t.isAlive){var r=this.options.get(t.storedValue,t.parent?t.parent.storedValue:null);return r}}}),Object.defineProperty(n.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return t.storedValue}}),Object.defineProperty(n.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r,a,u){var l=Oe(u)?this.options.set(u,t?t.storedValue:null):u,f=Ht(this,t,r,a,l);return this.watchTargetNodeForInvalidations(f,l,this.options),f}}),Object.defineProperty(n.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r,a,u){var l=Oe(r)?this.options.set(r,t?t.storedValue:null):r;if(!t.isDetaching&&t.type===this&&t.storedValue===l)return t.setParent(a,u),t;var f=this.instantiate(a,u,void 0,l);return t.die(),f}}),n}(jl);function xl(e,n){var t=n||void 0,r=n?n.onInvalidated:void 0;return t&&(t.get||t.set)?new fh(e,{get:t.get,set:t.set},r):new ch(e,r)}function dh(e,n){var t=xl(e,vt(vt({},n),{onInvalidated:function(r){n&&n.onInvalidated&&n.onInvalidated(r),r.removeRef()}}));return n&&n.acceptsUndefined===!1?t:El(t)}var Cl=function(e){me(n,e);function n(t,r){var a=e.call(this,t)||this;return Object.defineProperty(a,"validType",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(a,"flags",{enumerable:!0,configurable:!0,writable:!0,value:fe.Identifier}),a}return Object.defineProperty(n.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r,a,u){if(!t||!(t.type instanceof wn))throw new Y("Identifier types can only be instantiated as direct child of a model type");return Ht(this,t,r,a,u)}}),Object.defineProperty(n.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r,a,u){if(t.storedValue!==r)throw new Y("Tried to change identifier from '".concat(t.storedValue,"' to '").concat(r,"'. Changing identifiers is not allowed."));return t.setParent(a,u),t}}),Object.defineProperty(n.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){return typeof t!==this.validType?Ve(r,t,"Value is not a valid ".concat(this.describe(),", expected a ").concat(this.validType)):Le()}}),n}(yr),ph=function(e){me(n,e);function n(){var t=e.call(this,"identifier","string")||this;return Object.defineProperty(t,"flags",{enumerable:!0,configurable:!0,writable:!0,value:fe.Identifier}),t}return Object.defineProperty(n.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return"identifier"}}),n}(Cl),hh=function(e){me(n,e);function n(){return e.call(this,"identifierNumber","number")||this}return Object.defineProperty(n.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return t.storedValue}}),Object.defineProperty(n.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return"identifierNumber"}}),n}(Cl),vh=new ph,bh=new hh;function Cn(e){return""+e}function Ao(e){return typeof e=="string"||typeof e=="number"}function yh(e){return new mh(e)}var mh=function(e){me(n,e);function n(t){var r=e.call(this,t.name)||this;return Object.defineProperty(r,"options",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(r,"flags",{enumerable:!0,configurable:!0,writable:!0,value:fe.Custom}),r}return Object.defineProperty(n.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.name}}),Object.defineProperty(n.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){if(this.options.isTargetType(t))return Le();var a=this.options.getValidationMessage(t);return a?Ve(r,t,"Invalid value for type '".concat(this.name,"': ").concat(a)):Le()}}),Object.defineProperty(n.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return this.options.toSnapshot(t.storedValue)}}),Object.defineProperty(n.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r,a,u){var l=this.options.isTargetType(u)?u:this.options.fromSnapshot(u,t&&t.root.environment);return Ht(this,t,r,a,l)}}),Object.defineProperty(n.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r,a,u){var l=!this.options.isTargetType(r);if(!t.isDetaching){var f=t.type===this&&(l?r===t.snapshot:r===t.storedValue);if(f)return t.setParent(a,u),t}var h=l?this.options.fromSnapshot(r,a.root.environment):r,m=this.instantiate(a,u,void 0,h);return t.die(),m}}),n}(yr),M={enumeration:Wp,model:Mp,compose:Bp,custom:yh,reference:xl,safeReference:dh,union:zi,optional:fr,literal:Sl,maybe:El,maybeNull:th,refinement:Hp,string:yl,boolean:gl,number:ml,integer:Vp,float:Kp,finite:Fp,Date:Pl,map:kp,array:Dp,frozen:oh,identifier:vh,identifierNumber:bh,late:nh,lazy:ih,undefined:wl,null:_l,snapshotProcessor:Tp};const gh=M.model("Point",{x:M.number,y:M.number,pressure:M.optional(M.number,1)}),sr=M.model("Stroke",{id:M.identifier,points:M.array(gh),color:M.string,size:M.number,opacity:M.optional(M.number,1),brushStyle:M.enumeration("BrushStyle",["ink","eraser","spray","texture"]),timestamp:M.number}),_h=M.model("BrushSettings",{thinning:M.optional(M.number,.5),smoothing:M.optional(M.number,.5),streamline:M.optional(M.number,.5),taperStart:M.optional(M.number,30),taperEnd:M.optional(M.number,30),easing:M.optional(M.string,"linear"),opacity:M.optional(M.number,1)});M.model("CanvasState",{strokes:M.array(sr),background:M.enumeration("BackgroundType",["white","transparent","grid"]),zoom:M.number,panX:M.number,panY:M.number});const wh=M.model("CanvasModel",{strokes:M.optional(M.array(sr),[]),currentColor:M.optional(M.string,"#000000"),currentSize:M.optional(M.number,4),eraserSize:M.optional(M.number,20),currentBrushStyle:M.optional(M.enumeration("BrushStyle",["ink","eraser","spray","texture"]),"ink"),background:M.optional(M.enumeration("BackgroundType",["white","transparent","grid"]),"white"),zoom:M.optional(M.number,1),panX:M.optional(M.number,0),panY:M.optional(M.number,0),brushSettings:M.optional(_h,{}),useAdvancedEraserForAllBackgrounds:M.optional(M.boolean,!0)}).volatile(e=>({history:[],historyIndex:-1,maxHistorySize:50,renderVersion:0})).views(e=>({get canUndo(){return e.historyIndex>0},get canRedo(){return e.historyIndex<e.history.length-1},get isEmpty(){return e.strokes.length===0},get eraserMode(){return"advanced"},get eraserCompositeOperation(){return e.background==="transparent"?"destination-out":"source-over"},get eraserColor(){return e.background==="transparent"?"#000000":"white"}})).actions(e=>({saveToHistory:()=>{const l={strokes:e.strokes.map(f=>({id:f.id,points:f.points.map(h=>({x:h.x,y:h.y,pressure:h.pressure})),color:f.color,size:f.size,opacity:f.opacity??1,brushStyle:f.brushStyle,timestamp:f.timestamp})),background:e.background,zoom:e.zoom,panX:e.panX,panY:e.panY};e.historyIndex<e.history.length-1&&(e.history=e.history.slice(0,e.historyIndex+1)),e.history.push(l),e.historyIndex=e.history.length-1,e.history.length>e.maxHistorySize&&(e.history.shift(),e.historyIndex--)},clearStrokes:()=>{e.strokes.clear()},addStrokeToModel:l=>{if(Oe(l)){const f=il(l);e.strokes.push(sr.create(f))}else e.strokes.push(sr.create(l))},updateState:l=>{e.strokes.replace(l.strokes.map(f=>sr.create(f))),e.background=l.background,e.zoom=l.zoom,e.panX=l.panX,e.panY=l.panY,e.renderVersion++},clearHistory:()=>{e.history=[],e.historyIndex=-1}})).actions(e=>({afterCreate(){e.saveToHistory()},addStroke(n){e.addStrokeToModel(n),e.saveToHistory(),e.renderVersion++},replaceStrokes(n){e.clearStrokes(),n.forEach(t=>{e.addStrokeToModel(t)}),e.saveToHistory(),e.renderVersion++},setBrushStyle(n){e.currentBrushStyle=n},setPenSize(n){e.currentSize=Math.max(1,Math.min(50,n))},setEraserSize(n){e.eraserSize=Math.max(1,Math.min(100,n)),e.renderVersion++},setColor(n){e.currentColor=n},setBackground(n){e.background=n},setZoom(n){e.zoom=Math.max(.1,Math.min(5,n))},setPan(n,t){e.panX=n,e.panY=t},setBrushSettings(n){n.thinning!==void 0&&(e.brushSettings.thinning=n.thinning),n.smoothing!==void 0&&(e.brushSettings.smoothing=n.smoothing),n.streamline!==void 0&&(e.brushSettings.streamline=n.streamline),n.taperStart!==void 0&&(e.brushSettings.taperStart=n.taperStart),n.taperEnd!==void 0&&(e.brushSettings.taperEnd=n.taperEnd),n.easing!==void 0&&(e.brushSettings.easing=n.easing),n.opacity!==void 0&&(e.brushSettings.opacity=Math.max(0,Math.min(1,n.opacity)))},clear(){e.clearStrokes(),e.saveToHistory(),e.renderVersion++},undo(){if(e.historyIndex>0){e.historyIndex--;const n=e.history[e.historyIndex];n&&e.updateState(n)}},redo(){if(e.historyIndex<e.history.length-1){e.historyIndex++;const n=e.history[e.historyIndex];n&&e.updateState(n)}},eraseStrokes(n,t){},eraseAtPoint(n,t,r){},getStrokeBounds(n){if(n.length===0)return{minX:0,minY:0,maxX:0,maxY:0};let t=n[0].x,r=n[0].x,a=n[0].y,u=n[0].y;for(const l of n)t=Math.min(t,l.x),r=Math.max(r,l.x),a=Math.min(a,l.y),u=Math.max(u,l.y);return{minX:t,minY:a,maxX:r,maxY:u}},intersectsCircle(n,t,r,a){const u=Math.max(n.minX,Math.min(t,n.maxX)),l=Math.max(n.minY,Math.min(r,n.maxY));return Math.sqrt((t-u)**2+(r-l)**2)<=a},splitStrokeByPoint(n,t,r,a){return[]},splitStrokeByEraser(n,t,r){return[n]},saveCurrentStateToHistory(){e.saveToHistory()},setEraserMode(n){e.useAdvancedEraserForAllBackgrounds=n}}));var vi={exports:{}},Oh=vi.exports,zu;function Ph(){return zu||(zu=1,function(e,n){(function(t,r){e.exports=r()})(Oh,function(){var t=function(i,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(s[d]=c[d])})(i,o)},r=function(){return(r=Object.assign||function(i){for(var o,s=1,c=arguments.length;s<c;s++)for(var d in o=arguments[s])Object.prototype.hasOwnProperty.call(o,d)&&(i[d]=o[d]);return i}).apply(this,arguments)};function a(i,o,s){for(var c,d=0,p=o.length;d<p;d++)!c&&d in o||((c=c||Array.prototype.slice.call(o,0,d))[d]=o[d]);return i.concat(c||Array.prototype.slice.call(o))}var u=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Oc,l=Object.keys,f=Array.isArray;function h(i,o){return typeof o!="object"||l(o).forEach(function(s){i[s]=o[s]}),i}typeof Promise>"u"||u.Promise||(u.Promise=Promise);var m=Object.getPrototypeOf,j={}.hasOwnProperty;function C(i,o){return j.call(i,o)}function R(i,o){typeof o=="function"&&(o=o(m(i))),(typeof Reflect>"u"?l:Reflect.ownKeys)(o).forEach(function(s){G(i,s,o[s])})}var z=Object.defineProperty;function G(i,o,s,c){z(i,o,h(s&&C(s,"get")&&typeof s.get=="function"?{get:s.get,set:s.set,configurable:!0}:{value:s,configurable:!0,writable:!0},c))}function D(i){return{from:function(o){return i.prototype=Object.create(o.prototype),G(i.prototype,"constructor",i),{extend:R.bind(null,i.prototype)}}}}var H=Object.getOwnPropertyDescriptor,ee=[].slice;function re(i,o,s){return ee.call(i,o,s)}function ae(i,o){return o(i)}function Z(i){if(!i)throw new Error("Assertion Failed")}function ce(i){u.setImmediate?setImmediate(i):setTimeout(i,0)}function de(i,o){if(typeof o=="string"&&C(i,o))return i[o];if(!o)return i;if(typeof o!="string"){for(var s=[],c=0,d=o.length;c<d;++c){var p=de(i,o[c]);s.push(p)}return s}var v=o.indexOf(".");if(v!==-1){var b=i[o.substr(0,v)];return b==null?void 0:de(b,o.substr(v+1))}}function te(i,o,s){if(i&&o!==void 0&&!("isFrozen"in Object&&Object.isFrozen(i)))if(typeof o!="string"&&"length"in o){Z(typeof s!="string"&&"length"in s);for(var c=0,d=o.length;c<d;++c)te(i,o[c],s[c])}else{var p,v,b=o.indexOf(".");b!==-1?(p=o.substr(0,b),(v=o.substr(b+1))===""?s===void 0?f(i)&&!isNaN(parseInt(p))?i.splice(p,1):delete i[p]:i[p]=s:te(b=!(b=i[p])||!C(i,p)?i[p]={}:b,v,s)):s===void 0?f(i)&&!isNaN(parseInt(o))?i.splice(o,1):delete i[o]:i[o]=s}}function We(i){var o,s={};for(o in i)C(i,o)&&(s[o]=i[o]);return s}var Wt=[].concat;function mr(i){return Wt.apply([],i)}var Jt="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(mr([8,16,32,64].map(function(i){return["Int","Uint","Float"].map(function(o){return o+i+"Array"})}))).filter(function(i){return u[i]}),xo=new Set(Jt.map(function(i){return u[i]})),Yr=null;function Gt(i){return Yr=new WeakMap,i=function o(s){if(!s||typeof s!="object")return s;var c=Yr.get(s);if(c)return c;if(f(s)){c=[],Yr.set(s,c);for(var d=0,p=s.length;d<p;++d)c.push(o(s[d]))}else if(xo.has(s.constructor))c=s;else{var v,b=m(s);for(v in c=b===Object.prototype?{}:Object.create(b),Yr.set(s,c),s)C(s,v)&&(c[v]=o(s[v]))}return c}(i),Yr=null,i}var Fl={}.toString;function $i(i){return Fl.call(i).slice(8,-1)}var Hi=typeof Symbol<"u"?Symbol.iterator:"@@iterator",zl=typeof Hi=="symbol"?function(i){var o;return i!=null&&(o=i[Hi])&&o.apply(i)}:function(){return null};function Yt(i,o){return o=i.indexOf(o),0<=o&&i.splice(o,1),0<=o}var gr={};function yt(i){var o,s,c,d;if(arguments.length===1){if(f(i))return i.slice();if(this===gr&&typeof i=="string")return[i];if(d=zl(i)){for(s=[];!(c=d.next()).done;)s.push(c.value);return s}if(i==null)return[i];if(typeof(o=i.length)!="number")return[i];for(s=new Array(o);o--;)s[o]=i[o];return s}for(o=arguments.length,s=new Array(o);o--;)s[o]=arguments[o];return s}var Wi=typeof Symbol<"u"?function(i){return i[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Zr=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Ge=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Zr),Ul={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function _r(i,o){this.name=i,this.message=o}function Co(i,o){return i+". Errors: "+Object.keys(o).map(function(s){return o[s].toString()}).filter(function(s,c,d){return d.indexOf(s)===c}).join(`
`)}function Tn(i,o,s,c){this.failures=o,this.failedKeys=c,this.successCount=s,this.message=Co(i,o)}function wr(i,o){this.name="BulkError",this.failures=Object.keys(o).map(function(s){return o[s]}),this.failuresByPos=o,this.message=Co(i,this.failures)}D(_r).from(Error).extend({toString:function(){return this.name+": "+this.message}}),D(Tn).from(_r),D(wr).from(_r);var Gi=Ge.reduce(function(i,o){return i[o]=o+"Error",i},{}),ql=_r,J=Ge.reduce(function(i,o){var s=o+"Error";function c(d,p){this.name=s,d?typeof d=="string"?(this.message="".concat(d).concat(p?`
 `+p:""),this.inner=p||null):typeof d=="object"&&(this.message="".concat(d.name," ").concat(d.message),this.inner=d):(this.message=Ul[o]||s,this.inner=null)}return D(c).from(ql),i[o]=c,i},{});J.Syntax=SyntaxError,J.Type=TypeError,J.Range=RangeError;var To=Zr.reduce(function(i,o){return i[o+"Error"]=J[o],i},{}),In=Ge.reduce(function(i,o){return["Syntax","Type","Range"].indexOf(o)===-1&&(i[o+"Error"]=J[o]),i},{});function be(){}function Xr(i){return i}function $l(i,o){return i==null||i===Xr?o:function(s){return o(i(s))}}function Xt(i,o){return function(){i.apply(this,arguments),o.apply(this,arguments)}}function Hl(i,o){return i===be?o:function(){var s=i.apply(this,arguments);s!==void 0&&(arguments[0]=s);var c=this.onsuccess,d=this.onerror;this.onsuccess=null,this.onerror=null;var p=o.apply(this,arguments);return c&&(this.onsuccess=this.onsuccess?Xt(c,this.onsuccess):c),d&&(this.onerror=this.onerror?Xt(d,this.onerror):d),p!==void 0?p:s}}function Wl(i,o){return i===be?o:function(){i.apply(this,arguments);var s=this.onsuccess,c=this.onerror;this.onsuccess=this.onerror=null,o.apply(this,arguments),s&&(this.onsuccess=this.onsuccess?Xt(s,this.onsuccess):s),c&&(this.onerror=this.onerror?Xt(c,this.onerror):c)}}function Gl(i,o){return i===be?o:function(s){var c=i.apply(this,arguments);h(s,c);var d=this.onsuccess,p=this.onerror;return this.onsuccess=null,this.onerror=null,s=o.apply(this,arguments),d&&(this.onsuccess=this.onsuccess?Xt(d,this.onsuccess):d),p&&(this.onerror=this.onerror?Xt(p,this.onerror):p),c===void 0?s===void 0?void 0:s:h(c,s)}}function Yl(i,o){return i===be?o:function(){return o.apply(this,arguments)!==!1&&i.apply(this,arguments)}}function Yi(i,o){return i===be?o:function(){var s=i.apply(this,arguments);if(s&&typeof s.then=="function"){for(var c=this,d=arguments.length,p=new Array(d);d--;)p[d]=arguments[d];return s.then(function(){return o.apply(c,p)})}return o.apply(this,arguments)}}In.ModifyError=Tn,In.DexieError=_r,In.BulkError=wr;var it=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Io(i){it=i}var Jr={},ko=100,Jt=typeof Promise>"u"?[]:function(){var i=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[i,m(i),i];var o=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[o,m(o),i]}(),Zr=Jt[0],Ge=Jt[1],Jt=Jt[2],Ge=Ge&&Ge.then,Zt=Zr&&Zr.constructor,Xi=!!Jt,Qr=function(i,o){en.push([i,o]),kn&&(queueMicrotask(Jl),kn=!1)},Ji=!0,kn=!0,Qt=[],Dn=[],Zi=Xr,Ct={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:be,pgp:!1,env:{},finalize:be},X=Ct,en=[],er=0,Rn=[];function $(i){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var o=this._PSD=X;if(typeof i!="function"){if(i!==Jr)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&ea(this,this._value))}this._state=null,this._value=null,++o.ref,function s(c,d){try{d(function(p){if(c._state===null){if(p===c)throw new TypeError("A promise cannot be resolved with itself.");var v=c._lib&&Or();p&&typeof p.then=="function"?s(c,function(b,g){p instanceof $?p._then(b,g):p.then(b,g)}):(c._state=!0,c._value=p,Ro(c)),v&&Pr()}},ea.bind(null,c))}catch(p){ea(c,p)}}(this,i)}var Qi={get:function(){var i=X,o=Ln;function s(c,d){var p=this,v=!i.global&&(i!==X||o!==Ln),b=v&&!It(),g=new $(function(w,S){ta(p,new Do(Mo(c,i,v,b),Mo(d,i,v,b),w,S,i))});return this._consoleTask&&(g._consoleTask=this._consoleTask),g}return s.prototype=Jr,s},set:function(i){G(this,"then",i&&i.prototype===Jr?Qi:{get:function(){return i},set:Qi.set})}};function Do(i,o,s,c,d){this.onFulfilled=typeof i=="function"?i:null,this.onRejected=typeof o=="function"?o:null,this.resolve=s,this.reject=c,this.psd=d}function ea(i,o){var s,c;Dn.push(o),i._state===null&&(s=i._lib&&Or(),o=Zi(o),i._state=!1,i._value=o,c=i,Qt.some(function(d){return d._value===c._value})||Qt.push(c),Ro(i),s&&Pr())}function Ro(i){var o=i._listeners;i._listeners=[];for(var s=0,c=o.length;s<c;++s)ta(i,o[s]);var d=i._PSD;--d.ref||d.finalize(),er===0&&(++er,Qr(function(){--er==0&&ra()},[]))}function ta(i,o){if(i._state!==null){var s=i._state?o.onFulfilled:o.onRejected;if(s===null)return(i._state?o.resolve:o.reject)(i._value);++o.psd.ref,++er,Qr(Xl,[s,i,o])}else i._listeners.push(o)}function Xl(i,o,s){try{var c,d=o._value;!o._state&&Dn.length&&(Dn=[]),c=it&&o._consoleTask?o._consoleTask.run(function(){return i(d)}):i(d),o._state||Dn.indexOf(d)!==-1||function(p){for(var v=Qt.length;v;)if(Qt[--v]._value===p._value)return Qt.splice(v,1)}(o),s.resolve(c)}catch(p){s.reject(p)}finally{--er==0&&ra(),--s.psd.ref||s.psd.finalize()}}function Jl(){tr(Ct,function(){Or()&&Pr()})}function Or(){var i=Ji;return kn=Ji=!1,i}function Pr(){var i,o,s;do for(;0<en.length;)for(i=en,en=[],s=i.length,o=0;o<s;++o){var c=i[o];c[0].apply(null,c[1])}while(0<en.length);kn=Ji=!0}function ra(){var i=Qt;Qt=[],i.forEach(function(c){c._PSD.onunhandled.call(null,c._value,c)});for(var o=Rn.slice(0),s=o.length;s;)o[--s]()}function Nn(i){return new $(Jr,!1,i)}function _e(i,o){var s=X;return function(){var c=Or(),d=X;try{return kt(s,!0),i.apply(this,arguments)}catch(p){o&&o(p)}finally{kt(d,!1),c&&Pr()}}}R($.prototype,{then:Qi,_then:function(i,o){ta(this,new Do(null,null,i,o,X))},catch:function(i){if(arguments.length===1)return this.then(null,i);var o=i,s=arguments[1];return typeof o=="function"?this.then(null,function(c){return(c instanceof o?s:Nn)(c)}):this.then(null,function(c){return(c&&c.name===o?s:Nn)(c)})},finally:function(i){return this.then(function(o){return $.resolve(i()).then(function(){return o})},function(o){return $.resolve(i()).then(function(){return Nn(o)})})},timeout:function(i,o){var s=this;return i<1/0?new $(function(c,d){var p=setTimeout(function(){return d(new J.Timeout(o))},i);s.then(c,d).finally(clearTimeout.bind(null,p))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&G($.prototype,Symbol.toStringTag,"Dexie.Promise"),Ct.env=No(),R($,{all:function(){var i=yt.apply(null,arguments).map(Vn);return new $(function(o,s){i.length===0&&o([]);var c=i.length;i.forEach(function(d,p){return $.resolve(d).then(function(v){i[p]=v,--c||o(i)},s)})})},resolve:function(i){return i instanceof $?i:i&&typeof i.then=="function"?new $(function(o,s){i.then(o,s)}):new $(Jr,!0,i)},reject:Nn,race:function(){var i=yt.apply(null,arguments).map(Vn);return new $(function(o,s){i.map(function(c){return $.resolve(c).then(o,s)})})},PSD:{get:function(){return X},set:function(i){return X=i}},totalEchoes:{get:function(){return Ln}},newPSD:Tt,usePSD:tr,scheduler:{get:function(){return Qr},set:function(i){Qr=i}},rejectionMapper:{get:function(){return Zi},set:function(i){Zi=i}},follow:function(i,o){return new $(function(s,c){return Tt(function(d,p){var v=X;v.unhandleds=[],v.onunhandled=p,v.finalize=Xt(function(){var b,g=this;b=function(){g.unhandleds.length===0?d():p(g.unhandleds[0])},Rn.push(function w(){b(),Rn.splice(Rn.indexOf(w),1)}),++er,Qr(function(){--er==0&&ra()},[])},v.finalize),i()},o,s,c)})}}),Zt&&(Zt.allSettled&&G($,"allSettled",function(){var i=yt.apply(null,arguments).map(Vn);return new $(function(o){i.length===0&&o([]);var s=i.length,c=new Array(s);i.forEach(function(d,p){return $.resolve(d).then(function(v){return c[p]={status:"fulfilled",value:v}},function(v){return c[p]={status:"rejected",reason:v}}).then(function(){return--s||o(c)})})})}),Zt.any&&typeof AggregateError<"u"&&G($,"any",function(){var i=yt.apply(null,arguments).map(Vn);return new $(function(o,s){i.length===0&&s(new AggregateError([]));var c=i.length,d=new Array(c);i.forEach(function(p,v){return $.resolve(p).then(function(b){return o(b)},function(b){d[v]=b,--c||s(new AggregateError(d))})})})}),Zt.withResolvers&&($.withResolvers=Zt.withResolvers));var je={awaits:0,echoes:0,id:0},Zl=0,Mn=[],Bn=0,Ln=0,Ql=0;function Tt(i,o,s,c){var d=X,p=Object.create(d);return p.parent=d,p.ref=0,p.global=!1,p.id=++Ql,Ct.env,p.env=Xi?{Promise:$,PromiseProp:{value:$,configurable:!0,writable:!0},all:$.all,race:$.race,allSettled:$.allSettled,any:$.any,resolve:$.resolve,reject:$.reject}:{},o&&h(p,o),++d.ref,p.finalize=function(){--this.parent.ref||this.parent.finalize()},c=tr(p,i,s,c),p.ref===0&&p.finalize(),c}function Sr(){return je.id||(je.id=++Zl),++je.awaits,je.echoes+=ko,je.id}function It(){return!!je.awaits&&(--je.awaits==0&&(je.id=0),je.echoes=je.awaits*ko,!0)}function Vn(i){return je.echoes&&i&&i.constructor===Zt?(Sr(),i.then(function(o){return It(),o},function(o){return It(),Pe(o)})):i}function ec(){var i=Mn[Mn.length-1];Mn.pop(),kt(i,!1)}function kt(i,o){var s,c=X;(o?!je.echoes||Bn++&&i===X:!Bn||--Bn&&i===X)||queueMicrotask(o?function(d){++Ln,je.echoes&&--je.echoes!=0||(je.echoes=je.awaits=je.id=0),Mn.push(X),kt(d,!0)}.bind(null,i):ec),i!==X&&(X=i,c===Ct&&(Ct.env=No()),Xi&&(s=Ct.env.Promise,o=i.env,(c.global||i.global)&&(Object.defineProperty(u,"Promise",o.PromiseProp),s.all=o.all,s.race=o.race,s.resolve=o.resolve,s.reject=o.reject,o.allSettled&&(s.allSettled=o.allSettled),o.any&&(s.any=o.any))))}function No(){var i=u.Promise;return Xi?{Promise:i,PromiseProp:Object.getOwnPropertyDescriptor(u,"Promise"),all:i.all,race:i.race,allSettled:i.allSettled,any:i.any,resolve:i.resolve,reject:i.reject}:{}}function tr(i,o,s,c,d){var p=X;try{return kt(i,!0),o(s,c,d)}finally{kt(p,!1)}}function Mo(i,o,s,c){return typeof i!="function"?i:function(){var d=X;s&&Sr(),kt(o,!0);try{return i.apply(this,arguments)}finally{kt(d,!1),c&&queueMicrotask(It)}}}function na(i){Promise===Zt&&je.echoes===0?Bn===0?i():enqueueNativeMicroTask(i):setTimeout(i,0)}(""+Ge).indexOf("[native code]")===-1&&(Sr=It=be);var Pe=$.reject,rr="",mt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Bo="String expected.",Er=[],Kn="__dbnames",ia="readonly",aa="readwrite";function nr(i,o){return i?o?function(){return i.apply(this,arguments)&&o.apply(this,arguments)}:i:o}var Lo={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Fn(i){return typeof i!="string"||/\./.test(i)?function(o){return o}:function(o){return o[i]===void 0&&i in o&&delete(o=Gt(o))[i],o}}function Vo(){throw J.Type()}function le(i,o){try{var s=Ko(i),c=Ko(o);if(s!==c)return s==="Array"?1:c==="Array"?-1:s==="binary"?1:c==="binary"?-1:s==="string"?1:c==="string"?-1:s==="Date"?1:c!=="Date"?NaN:-1;switch(s){case"number":case"Date":case"string":return o<i?1:i<o?-1:0;case"binary":return function(d,p){for(var v=d.length,b=p.length,g=v<b?v:b,w=0;w<g;++w)if(d[w]!==p[w])return d[w]<p[w]?-1:1;return v===b?0:v<b?-1:1}(Fo(i),Fo(o));case"Array":return function(d,p){for(var v=d.length,b=p.length,g=v<b?v:b,w=0;w<g;++w){var S=le(d[w],p[w]);if(S!==0)return S}return v===b?0:v<b?-1:1}(i,o)}}catch{}return NaN}function Ko(i){var o=typeof i;return o!="object"?o:ArrayBuffer.isView(i)?"binary":(i=$i(i),i==="ArrayBuffer"?"binary":i)}function Fo(i){return i instanceof Uint8Array?i:ArrayBuffer.isView(i)?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):new Uint8Array(i)}var zo=(ge.prototype._trans=function(i,o,s){var c=this._tx||X.trans,d=this.name,p=it&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(i==="readonly"?"read":"write"," ").concat(this.name));function v(w,S,y){if(!y.schema[d])throw new J.NotFound("Table "+d+" not part of transaction");return o(y.idbtrans,y)}var b=Or();try{var g=c&&c.db._novip===this.db._novip?c===X.trans?c._promise(i,v,s):Tt(function(){return c._promise(i,v,s)},{trans:c,transless:X.transless||X}):function w(S,y,A,_){if(S.idbdb&&(S._state.openComplete||X.letThrough||S._vip)){var P=S._createTransaction(y,A,S._dbSchema);try{P.create(),S._state.PR1398_maxLoop=3}catch(E){return E.name===Gi.InvalidState&&S.isOpen()&&0<--S._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),S.close({disableAutoOpen:!1}),S.open().then(function(){return w(S,y,A,_)})):Pe(E)}return P._promise(y,function(E,O){return Tt(function(){return X.trans=P,_(E,O,P)})}).then(function(E){if(y==="readwrite")try{P.idbtrans.commit()}catch{}return y==="readonly"?E:P._completion.then(function(){return E})})}if(S._state.openComplete)return Pe(new J.DatabaseClosed(S._state.dbOpenError));if(!S._state.isBeingOpened){if(!S._state.autoOpen)return Pe(new J.DatabaseClosed);S.open().catch(be)}return S._state.dbReadyPromise.then(function(){return w(S,y,A,_)})}(this.db,i,[this.name],v);return p&&(g._consoleTask=p,g=g.catch(function(w){return console.trace(w),Pe(w)})),g}finally{b&&Pr()}},ge.prototype.get=function(i,o){var s=this;return i&&i.constructor===Object?this.where(i).first(o):i==null?Pe(new J.Type("Invalid argument to Table.get()")):this._trans("readonly",function(c){return s.core.get({trans:c,key:i}).then(function(d){return s.hook.reading.fire(d)})}).then(o)},ge.prototype.where=function(i){if(typeof i=="string")return new this.db.WhereClause(this,i);if(f(i))return new this.db.WhereClause(this,"[".concat(i.join("+"),"]"));var o=l(i);if(o.length===1)return this.where(o[0]).equals(i[o[0]]);var s=this.schema.indexes.concat(this.schema.primKey).filter(function(b){if(b.compound&&o.every(function(w){return 0<=b.keyPath.indexOf(w)})){for(var g=0;g<o.length;++g)if(o.indexOf(b.keyPath[g])===-1)return!1;return!0}return!1}).sort(function(b,g){return b.keyPath.length-g.keyPath.length})[0];if(s&&this.db._maxKey!==rr){var p=s.keyPath.slice(0,o.length);return this.where(p).equals(p.map(function(g){return i[g]}))}!s&&it&&console.warn("The query ".concat(JSON.stringify(i)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(o.join("+"),"]"));var c=this.schema.idxByName;function d(b,g){return le(b,g)===0}var v=o.reduce(function(y,g){var w=y[0],S=y[1],y=c[g],A=i[g];return[w||y,w||!y?nr(S,y&&y.multi?function(_){return _=de(_,g),f(_)&&_.some(function(P){return d(A,P)})}:function(_){return d(A,de(_,g))}):S]},[null,null]),p=v[0],v=v[1];return p?this.where(p.name).equals(i[p.keyPath]).filter(v):s?this.filter(v):this.where(o).equals("")},ge.prototype.filter=function(i){return this.toCollection().and(i)},ge.prototype.count=function(i){return this.toCollection().count(i)},ge.prototype.offset=function(i){return this.toCollection().offset(i)},ge.prototype.limit=function(i){return this.toCollection().limit(i)},ge.prototype.each=function(i){return this.toCollection().each(i)},ge.prototype.toArray=function(i){return this.toCollection().toArray(i)},ge.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},ge.prototype.orderBy=function(i){return new this.db.Collection(new this.db.WhereClause(this,f(i)?"[".concat(i.join("+"),"]"):i))},ge.prototype.reverse=function(){return this.toCollection().reverse()},ge.prototype.mapToClass=function(i){var o,s=this.db,c=this.name;function d(){return o!==null&&o.apply(this,arguments)||this}(this.schema.mappedClass=i).prototype instanceof Vo&&(function(g,w){if(typeof w!="function"&&w!==null)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");function S(){this.constructor=g}t(g,w),g.prototype=w===null?Object.create(w):(S.prototype=w.prototype,new S)}(d,o=i),Object.defineProperty(d.prototype,"db",{get:function(){return s},enumerable:!1,configurable:!0}),d.prototype.table=function(){return c},i=d);for(var p=new Set,v=i.prototype;v;v=m(v))Object.getOwnPropertyNames(v).forEach(function(g){return p.add(g)});function b(g){if(!g)return g;var w,S=Object.create(i.prototype);for(w in g)if(!p.has(w))try{S[w]=g[w]}catch{}return S}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=b,this.hook("reading",b),i},ge.prototype.defineClass=function(){return this.mapToClass(function(i){h(this,i)})},ge.prototype.add=function(i,o){var s=this,c=this.schema.primKey,d=c.auto,p=c.keyPath,v=i;return p&&d&&(v=Fn(p)(i)),this._trans("readwrite",function(b){return s.core.mutate({trans:b,type:"add",keys:o!=null?[o]:null,values:[v]})}).then(function(b){return b.numFailures?$.reject(b.failures[0]):b.lastResult}).then(function(b){if(p)try{te(i,p,b)}catch{}return b})},ge.prototype.update=function(i,o){return typeof i!="object"||f(i)?this.where(":id").equals(i).modify(o):(i=de(i,this.schema.primKey.keyPath),i===void 0?Pe(new J.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(i).modify(o))},ge.prototype.put=function(i,o){var s=this,c=this.schema.primKey,d=c.auto,p=c.keyPath,v=i;return p&&d&&(v=Fn(p)(i)),this._trans("readwrite",function(b){return s.core.mutate({trans:b,type:"put",values:[v],keys:o!=null?[o]:null})}).then(function(b){return b.numFailures?$.reject(b.failures[0]):b.lastResult}).then(function(b){if(p)try{te(i,p,b)}catch{}return b})},ge.prototype.delete=function(i){var o=this;return this._trans("readwrite",function(s){return o.core.mutate({trans:s,type:"delete",keys:[i]})}).then(function(s){return s.numFailures?$.reject(s.failures[0]):void 0})},ge.prototype.clear=function(){var i=this;return this._trans("readwrite",function(o){return i.core.mutate({trans:o,type:"deleteRange",range:Lo})}).then(function(o){return o.numFailures?$.reject(o.failures[0]):void 0})},ge.prototype.bulkGet=function(i){var o=this;return this._trans("readonly",function(s){return o.core.getMany({keys:i,trans:s}).then(function(c){return c.map(function(d){return o.hook.reading.fire(d)})})})},ge.prototype.bulkAdd=function(i,o,s){var c=this,d=Array.isArray(o)?o:void 0,p=(s=s||(d?void 0:o))?s.allKeys:void 0;return this._trans("readwrite",function(v){var w=c.schema.primKey,b=w.auto,w=w.keyPath;if(w&&d)throw new J.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(d&&d.length!==i.length)throw new J.InvalidArgument("Arguments objects and keys must have the same length");var g=i.length,w=w&&b?i.map(Fn(w)):i;return c.core.mutate({trans:v,type:"add",keys:d,values:w,wantResults:p}).then(function(P){var y=P.numFailures,A=P.results,_=P.lastResult,P=P.failures;if(y===0)return p?A:_;throw new wr("".concat(c.name,".bulkAdd(): ").concat(y," of ").concat(g," operations failed"),P)})})},ge.prototype.bulkPut=function(i,o,s){var c=this,d=Array.isArray(o)?o:void 0,p=(s=s||(d?void 0:o))?s.allKeys:void 0;return this._trans("readwrite",function(v){var w=c.schema.primKey,b=w.auto,w=w.keyPath;if(w&&d)throw new J.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(d&&d.length!==i.length)throw new J.InvalidArgument("Arguments objects and keys must have the same length");var g=i.length,w=w&&b?i.map(Fn(w)):i;return c.core.mutate({trans:v,type:"put",keys:d,values:w,wantResults:p}).then(function(P){var y=P.numFailures,A=P.results,_=P.lastResult,P=P.failures;if(y===0)return p?A:_;throw new wr("".concat(c.name,".bulkPut(): ").concat(y," of ").concat(g," operations failed"),P)})})},ge.prototype.bulkUpdate=function(i){var o=this,s=this.core,c=i.map(function(v){return v.key}),d=i.map(function(v){return v.changes}),p=[];return this._trans("readwrite",function(v){return s.getMany({trans:v,keys:c,cache:"clone"}).then(function(b){var g=[],w=[];i.forEach(function(y,A){var _=y.key,P=y.changes,E=b[A];if(E){for(var O=0,x=Object.keys(P);O<x.length;O++){var T=x[O],I=P[T];if(T===o.schema.primKey.keyPath){if(le(I,_)!==0)throw new J.Constraint("Cannot update primary key in bulkUpdate()")}else te(E,T,I)}p.push(A),g.push(_),w.push(E)}});var S=g.length;return s.mutate({trans:v,type:"put",keys:g,values:w,updates:{keys:c,changeSpecs:d}}).then(function(y){var A=y.numFailures,_=y.failures;if(A===0)return S;for(var P=0,E=Object.keys(_);P<E.length;P++){var O,x=E[P],T=p[Number(x)];T!=null&&(O=_[x],delete _[x],_[T]=O)}throw new wr("".concat(o.name,".bulkUpdate(): ").concat(A," of ").concat(S," operations failed"),_)})})})},ge.prototype.bulkDelete=function(i){var o=this,s=i.length;return this._trans("readwrite",function(c){return o.core.mutate({trans:c,type:"delete",keys:i})}).then(function(v){var d=v.numFailures,p=v.lastResult,v=v.failures;if(d===0)return p;throw new wr("".concat(o.name,".bulkDelete(): ").concat(d," of ").concat(s," operations failed"),v)})},ge);function ge(){}function tn(i){function o(v,b){if(b){for(var g=arguments.length,w=new Array(g-1);--g;)w[g-1]=arguments[g];return s[v].subscribe.apply(null,w),i}if(typeof v=="string")return s[v]}var s={};o.addEventType=p;for(var c=1,d=arguments.length;c<d;++c)p(arguments[c]);return o;function p(v,b,g){if(typeof v!="object"){var w;b=b||Yl;var S={subscribers:[],fire:g=g||be,subscribe:function(y){S.subscribers.indexOf(y)===-1&&(S.subscribers.push(y),S.fire=b(S.fire,y))},unsubscribe:function(y){S.subscribers=S.subscribers.filter(function(A){return A!==y}),S.fire=S.subscribers.reduce(b,g)}};return s[v]=o[v]=S}l(w=v).forEach(function(y){var A=w[y];if(f(A))p(y,w[y][0],w[y][1]);else{if(A!=="asap")throw new J.InvalidArgument("Invalid event config");var _=p(y,Xr,function(){for(var P=arguments.length,E=new Array(P);P--;)E[P]=arguments[P];_.subscribers.forEach(function(O){ce(function(){O.apply(null,E)})})})}})}}function rn(i,o){return D(o).from({prototype:i}),o}function Ar(i,o){return!(i.filter||i.algorithm||i.or)&&(o?i.justLimit:!i.replayFilter)}function oa(i,o){i.filter=nr(i.filter,o)}function ua(i,o,s){var c=i.replayFilter;i.replayFilter=c?function(){return nr(c(),o())}:o,i.justLimit=s&&!c}function zn(i,o){if(i.isPrimKey)return o.primaryKey;var s=o.getIndexByKeyPath(i.index);if(!s)throw new J.Schema("KeyPath "+i.index+" on object store "+o.name+" is not indexed");return s}function Uo(i,o,s){var c=zn(i,o.schema);return o.openCursor({trans:s,values:!i.keysOnly,reverse:i.dir==="prev",unique:!!i.unique,query:{index:c,range:i.range}})}function Un(i,o,s,c){var d=i.replayFilter?nr(i.filter,i.replayFilter()):i.filter;if(i.or){var p={},v=function(b,g,w){var S,y;d&&!d(g,w,function(A){return g.stop(A)},function(A){return g.fail(A)})||((y=""+(S=g.primaryKey))=="[object ArrayBuffer]"&&(y=""+new Uint8Array(S)),C(p,y)||(p[y]=!0,o(b,g,w)))};return Promise.all([i.or._iterate(v,s),qo(Uo(i,c,s),i.algorithm,v,!i.keysOnly&&i.valueMapper)])}return qo(Uo(i,c,s),nr(i.algorithm,d),o,!i.keysOnly&&i.valueMapper)}function qo(i,o,s,c){var d=_e(c?function(p,v,b){return s(c(p),v,b)}:s);return i.then(function(p){if(p)return p.start(function(){var v=function(){return p.continue()};o&&!o(p,function(b){return v=b},function(b){p.stop(b),v=be},function(b){p.fail(b),v=be})||d(p.value,p,function(b){return v=b}),v()})})}var nn=($o.prototype.execute=function(i){var o=this["@@propmod"];if(o.add!==void 0){var s=o.add;if(f(s))return a(a([],f(i)?i:[],!0),s).sort();if(typeof s=="number")return(Number(i)||0)+s;if(typeof s=="bigint")try{return BigInt(i)+s}catch{return BigInt(0)+s}throw new TypeError("Invalid term ".concat(s))}if(o.remove!==void 0){var c=o.remove;if(f(c))return f(i)?i.filter(function(d){return!c.includes(d)}).sort():[];if(typeof c=="number")return Number(i)-c;if(typeof c=="bigint")try{return BigInt(i)-c}catch{return BigInt(0)-c}throw new TypeError("Invalid subtrahend ".concat(c))}return s=(s=o.replacePrefix)===null||s===void 0?void 0:s[0],s&&typeof i=="string"&&i.startsWith(s)?o.replacePrefix[1]+i.substring(s.length):i},$o);function $o(i){this["@@propmod"]=i}var tc=(pe.prototype._read=function(i,o){var s=this._ctx;return s.error?s.table._trans(null,Pe.bind(null,s.error)):s.table._trans("readonly",i).then(o)},pe.prototype._write=function(i){var o=this._ctx;return o.error?o.table._trans(null,Pe.bind(null,o.error)):o.table._trans("readwrite",i,"locked")},pe.prototype._addAlgorithm=function(i){var o=this._ctx;o.algorithm=nr(o.algorithm,i)},pe.prototype._iterate=function(i,o){return Un(this._ctx,i,o,this._ctx.table.core)},pe.prototype.clone=function(i){var o=Object.create(this.constructor.prototype),s=Object.create(this._ctx);return i&&h(s,i),o._ctx=s,o},pe.prototype.raw=function(){return this._ctx.valueMapper=null,this},pe.prototype.each=function(i){var o=this._ctx;return this._read(function(s){return Un(o,i,s,o.table.core)})},pe.prototype.count=function(i){var o=this;return this._read(function(s){var c=o._ctx,d=c.table.core;if(Ar(c,!0))return d.count({trans:s,query:{index:zn(c,d.schema),range:c.range}}).then(function(v){return Math.min(v,c.limit)});var p=0;return Un(c,function(){return++p,!1},s,d).then(function(){return p})}).then(i)},pe.prototype.sortBy=function(i,o){var s=i.split(".").reverse(),c=s[0],d=s.length-1;function p(g,w){return w?p(g[s[w]],w-1):g[c]}var v=this._ctx.dir==="next"?1:-1;function b(g,w){return le(p(g,d),p(w,d))*v}return this.toArray(function(g){return g.sort(b)}).then(o)},pe.prototype.toArray=function(i){var o=this;return this._read(function(s){var c=o._ctx;if(c.dir==="next"&&Ar(c,!0)&&0<c.limit){var d=c.valueMapper,p=zn(c,c.table.core.schema);return c.table.core.query({trans:s,limit:c.limit,values:!0,query:{index:p,range:c.range}}).then(function(b){return b=b.result,d?b.map(d):b})}var v=[];return Un(c,function(b){return v.push(b)},s,c.table.core).then(function(){return v})},i)},pe.prototype.offset=function(i){var o=this._ctx;return i<=0||(o.offset+=i,Ar(o)?ua(o,function(){var s=i;return function(c,d){return s===0||(s===1?--s:d(function(){c.advance(s),s=0}),!1)}}):ua(o,function(){var s=i;return function(){return--s<0}})),this},pe.prototype.limit=function(i){return this._ctx.limit=Math.min(this._ctx.limit,i),ua(this._ctx,function(){var o=i;return function(s,c,d){return--o<=0&&c(d),0<=o}},!0),this},pe.prototype.until=function(i,o){return oa(this._ctx,function(s,c,d){return!i(s.value)||(c(d),o)}),this},pe.prototype.first=function(i){return this.limit(1).toArray(function(o){return o[0]}).then(i)},pe.prototype.last=function(i){return this.reverse().first(i)},pe.prototype.filter=function(i){var o;return oa(this._ctx,function(s){return i(s.value)}),(o=this._ctx).isMatch=nr(o.isMatch,i),this},pe.prototype.and=function(i){return this.filter(i)},pe.prototype.or=function(i){return new this.db.WhereClause(this._ctx.table,i,this)},pe.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},pe.prototype.desc=function(){return this.reverse()},pe.prototype.eachKey=function(i){var o=this._ctx;return o.keysOnly=!o.isMatch,this.each(function(s,c){i(c.key,c)})},pe.prototype.eachUniqueKey=function(i){return this._ctx.unique="unique",this.eachKey(i)},pe.prototype.eachPrimaryKey=function(i){var o=this._ctx;return o.keysOnly=!o.isMatch,this.each(function(s,c){i(c.primaryKey,c)})},pe.prototype.keys=function(i){var o=this._ctx;o.keysOnly=!o.isMatch;var s=[];return this.each(function(c,d){s.push(d.key)}).then(function(){return s}).then(i)},pe.prototype.primaryKeys=function(i){var o=this._ctx;if(o.dir==="next"&&Ar(o,!0)&&0<o.limit)return this._read(function(c){var d=zn(o,o.table.core.schema);return o.table.core.query({trans:c,values:!1,limit:o.limit,query:{index:d,range:o.range}})}).then(function(c){return c.result}).then(i);o.keysOnly=!o.isMatch;var s=[];return this.each(function(c,d){s.push(d.primaryKey)}).then(function(){return s}).then(i)},pe.prototype.uniqueKeys=function(i){return this._ctx.unique="unique",this.keys(i)},pe.prototype.firstKey=function(i){return this.limit(1).keys(function(o){return o[0]}).then(i)},pe.prototype.lastKey=function(i){return this.reverse().firstKey(i)},pe.prototype.distinct=function(){var i=this._ctx,i=i.index&&i.table.schema.idxByName[i.index];if(!i||!i.multi)return this;var o={};return oa(this._ctx,function(d){var c=d.primaryKey.toString(),d=C(o,c);return o[c]=!0,!d}),this},pe.prototype.modify=function(i){var o=this,s=this._ctx;return this._write(function(c){var d,p,v;v=typeof i=="function"?i:(d=l(i),p=d.length,function(O){for(var x=!1,T=0;T<p;++T){var I=d[T],k=i[I],B=de(O,I);k instanceof nn?(te(O,I,k.execute(B)),x=!0):B!==k&&(te(O,I,k),x=!0)}return x});var b=s.table.core,y=b.schema.primaryKey,g=y.outbound,w=y.extractKey,S=200,y=o.db._options.modifyChunkSize;y&&(S=typeof y=="object"?y[b.name]||y["*"]||200:y);function A(O,I){var T=I.failures,I=I.numFailures;P+=O-I;for(var k=0,B=l(T);k<B.length;k++){var F=B[k];_.push(T[F])}}var _=[],P=0,E=[];return o.clone().primaryKeys().then(function(O){function x(I){var k=Math.min(S,O.length-I);return b.getMany({trans:c,keys:O.slice(I,I+k),cache:"immutable"}).then(function(B){for(var F=[],L=[],V=g?[]:null,q=[],K=0;K<k;++K){var W=B[K],ie={value:Gt(W),primKey:O[I+K]};v.call(ie,ie.value,ie)!==!1&&(ie.value==null?q.push(O[I+K]):g||le(w(W),w(ie.value))===0?(L.push(ie.value),g&&V.push(O[I+K])):(q.push(O[I+K]),F.push(ie.value)))}return Promise.resolve(0<F.length&&b.mutate({trans:c,type:"add",values:F}).then(function(ue){for(var se in ue.failures)q.splice(parseInt(se),1);A(F.length,ue)})).then(function(){return(0<L.length||T&&typeof i=="object")&&b.mutate({trans:c,type:"put",keys:V,values:L,criteria:T,changeSpec:typeof i!="function"&&i,isAdditionalChunk:0<I}).then(function(ue){return A(L.length,ue)})}).then(function(){return(0<q.length||T&&i===sa)&&b.mutate({trans:c,type:"delete",keys:q,criteria:T,isAdditionalChunk:0<I}).then(function(ue){return A(q.length,ue)})}).then(function(){return O.length>I+k&&x(I+S)})})}var T=Ar(s)&&s.limit===1/0&&(typeof i!="function"||i===sa)&&{index:s.index,range:s.range};return x(0).then(function(){if(0<_.length)throw new Tn("Error modifying one or more objects",_,P,E);return O.length})})})},pe.prototype.delete=function(){var i=this._ctx,o=i.range;return Ar(i)&&(i.isPrimKey||o.type===3)?this._write(function(s){var c=i.table.core.schema.primaryKey,d=o;return i.table.core.count({trans:s,query:{index:c,range:d}}).then(function(p){return i.table.core.mutate({trans:s,type:"deleteRange",range:d}).then(function(v){var b=v.failures;if(v.lastResult,v.results,v=v.numFailures,v)throw new Tn("Could not delete some values",Object.keys(b).map(function(g){return b[g]}),p-v);return p-v})})}):this.modify(sa)},pe);function pe(){}var sa=function(i,o){return o.value=null};function rc(i,o){return i<o?-1:i===o?0:1}function nc(i,o){return o<i?-1:i===o?0:1}function Ke(i,o,s){return i=i instanceof Wo?new i.Collection(i):i,i._ctx.error=new(s||TypeError)(o),i}function jr(i){return new i.Collection(i,function(){return Ho("")}).limit(0)}function qn(i,o,s,c){var d,p,v,b,g,w,S,y=s.length;if(!s.every(function(P){return typeof P=="string"}))return Ke(i,Bo);function A(P){d=P==="next"?function(O){return O.toUpperCase()}:function(O){return O.toLowerCase()},p=P==="next"?function(O){return O.toLowerCase()}:function(O){return O.toUpperCase()},v=P==="next"?rc:nc;var E=s.map(function(O){return{lower:p(O),upper:d(O)}}).sort(function(O,x){return v(O.lower,x.lower)});b=E.map(function(O){return O.upper}),g=E.map(function(O){return O.lower}),S=(w=P)==="next"?"":c}A("next"),i=new i.Collection(i,function(){return Dt(b[0],g[y-1]+c)}),i._ondirectionchange=function(P){A(P)};var _=0;return i._addAlgorithm(function(P,E,O){var x=P.key;if(typeof x!="string")return!1;var T=p(x);if(o(T,g,_))return!0;for(var I=null,k=_;k<y;++k){var B=function(F,L,V,q,K,W){for(var ie=Math.min(F.length,q.length),ue=-1,se=0;se<ie;++se){var Fe=L[se];if(Fe!==q[se])return K(F[se],V[se])<0?F.substr(0,se)+V[se]+V.substr(se+1):K(F[se],q[se])<0?F.substr(0,se)+q[se]+V.substr(se+1):0<=ue?F.substr(0,ue)+L[ue]+V.substr(ue+1):null;K(F[se],Fe)<0&&(ue=se)}return ie<q.length&&W==="next"?F+V.substr(F.length):ie<F.length&&W==="prev"?F.substr(0,V.length):ue<0?null:F.substr(0,ue)+q[ue]+V.substr(ue+1)}(x,T,b[k],g[k],v,w);B===null&&I===null?_=k+1:(I===null||0<v(I,B))&&(I=B)}return E(I!==null?function(){P.continue(I+S)}:O),!1}),i}function Dt(i,o,s,c){return{type:2,lower:i,upper:o,lowerOpen:s,upperOpen:c}}function Ho(i){return{type:1,lower:i,upper:i}}var Wo=(Object.defineProperty(xe.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),xe.prototype.between=function(i,o,s,c){s=s!==!1,c=c===!0;try{return 0<this._cmp(i,o)||this._cmp(i,o)===0&&(s||c)&&(!s||!c)?jr(this):new this.Collection(this,function(){return Dt(i,o,!s,!c)})}catch{return Ke(this,mt)}},xe.prototype.equals=function(i){return i==null?Ke(this,mt):new this.Collection(this,function(){return Ho(i)})},xe.prototype.above=function(i){return i==null?Ke(this,mt):new this.Collection(this,function(){return Dt(i,void 0,!0)})},xe.prototype.aboveOrEqual=function(i){return i==null?Ke(this,mt):new this.Collection(this,function(){return Dt(i,void 0,!1)})},xe.prototype.below=function(i){return i==null?Ke(this,mt):new this.Collection(this,function(){return Dt(void 0,i,!1,!0)})},xe.prototype.belowOrEqual=function(i){return i==null?Ke(this,mt):new this.Collection(this,function(){return Dt(void 0,i)})},xe.prototype.startsWith=function(i){return typeof i!="string"?Ke(this,Bo):this.between(i,i+rr,!0,!0)},xe.prototype.startsWithIgnoreCase=function(i){return i===""?this.startsWith(i):qn(this,function(o,s){return o.indexOf(s[0])===0},[i],rr)},xe.prototype.equalsIgnoreCase=function(i){return qn(this,function(o,s){return o===s[0]},[i],"")},xe.prototype.anyOfIgnoreCase=function(){var i=yt.apply(gr,arguments);return i.length===0?jr(this):qn(this,function(o,s){return s.indexOf(o)!==-1},i,"")},xe.prototype.startsWithAnyOfIgnoreCase=function(){var i=yt.apply(gr,arguments);return i.length===0?jr(this):qn(this,function(o,s){return s.some(function(c){return o.indexOf(c)===0})},i,rr)},xe.prototype.anyOf=function(){var i=this,o=yt.apply(gr,arguments),s=this._cmp;try{o.sort(s)}catch{return Ke(this,mt)}if(o.length===0)return jr(this);var c=new this.Collection(this,function(){return Dt(o[0],o[o.length-1])});c._ondirectionchange=function(p){s=p==="next"?i._ascending:i._descending,o.sort(s)};var d=0;return c._addAlgorithm(function(p,v,b){for(var g=p.key;0<s(g,o[d]);)if(++d===o.length)return v(b),!1;return s(g,o[d])===0||(v(function(){p.continue(o[d])}),!1)}),c},xe.prototype.notEqual=function(i){return this.inAnyRange([[-1/0,i],[i,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},xe.prototype.noneOf=function(){var i=yt.apply(gr,arguments);if(i.length===0)return new this.Collection(this);try{i.sort(this._ascending)}catch{return Ke(this,mt)}var o=i.reduce(function(s,c){return s?s.concat([[s[s.length-1][1],c]]):[[-1/0,c]]},null);return o.push([i[i.length-1],this.db._maxKey]),this.inAnyRange(o,{includeLowers:!1,includeUppers:!1})},xe.prototype.inAnyRange=function(x,o){var s=this,c=this._cmp,d=this._ascending,p=this._descending,v=this._min,b=this._max;if(x.length===0)return jr(this);if(!x.every(function(T){return T[0]!==void 0&&T[1]!==void 0&&d(T[0],T[1])<=0}))return Ke(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",J.InvalidArgument);var g=!o||o.includeLowers!==!1,w=o&&o.includeUppers===!0,S,y=d;function A(T,I){return y(T[0],I[0])}try{(S=x.reduce(function(T,I){for(var k=0,B=T.length;k<B;++k){var F=T[k];if(c(I[0],F[1])<0&&0<c(I[1],F[0])){F[0]=v(F[0],I[0]),F[1]=b(F[1],I[1]);break}}return k===B&&T.push(I),T},[])).sort(A)}catch{return Ke(this,mt)}var _=0,P=w?function(T){return 0<d(T,S[_][1])}:function(T){return 0<=d(T,S[_][1])},E=g?function(T){return 0<p(T,S[_][0])}:function(T){return 0<=p(T,S[_][0])},O=P,x=new this.Collection(this,function(){return Dt(S[0][0],S[S.length-1][1],!g,!w)});return x._ondirectionchange=function(T){y=T==="next"?(O=P,d):(O=E,p),S.sort(A)},x._addAlgorithm(function(T,I,k){for(var B,F=T.key;O(F);)if(++_===S.length)return I(k),!1;return!P(B=F)&&!E(B)||(s._cmp(F,S[_][1])===0||s._cmp(F,S[_][0])===0||I(function(){y===d?T.continue(S[_][0]):T.continue(S[_][1])}),!1)}),x},xe.prototype.startsWithAnyOf=function(){var i=yt.apply(gr,arguments);return i.every(function(o){return typeof o=="string"})?i.length===0?jr(this):this.inAnyRange(i.map(function(o){return[o,o+rr]})):Ke(this,"startsWithAnyOf() only works with strings")},xe);function xe(){}function at(i){return _e(function(o){return an(o),i(o.target.error),!1})}function an(i){i.stopPropagation&&i.stopPropagation(),i.preventDefault&&i.preventDefault()}var on="storagemutated",la="x-storagemutated-1",Rt=tn(null,on),ic=(ot.prototype._lock=function(){return Z(!X.global),++this._reculock,this._reculock!==1||X.global||(X.lockOwnerFor=this),this},ot.prototype._unlock=function(){if(Z(!X.global),--this._reculock==0)for(X.global||(X.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var i=this._blockedFuncs.shift();try{tr(i[1],i[0])}catch{}}return this},ot.prototype._locked=function(){return this._reculock&&X.lockOwnerFor!==this},ot.prototype.create=function(i){var o=this;if(!this.mode)return this;var s=this.db.idbdb,c=this.db._state.dbOpenError;if(Z(!this.idbtrans),!i&&!s)switch(c&&c.name){case"DatabaseClosedError":throw new J.DatabaseClosed(c);case"MissingAPIError":throw new J.MissingAPI(c.message,c);default:throw new J.OpenFailed(c)}if(!this.active)throw new J.TransactionInactive;return Z(this._completion._state===null),(i=this.idbtrans=i||(this.db.core||s).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=_e(function(d){an(d),o._reject(i.error)}),i.onabort=_e(function(d){an(d),o.active&&o._reject(new J.Abort(i.error)),o.active=!1,o.on("abort").fire(d)}),i.oncomplete=_e(function(){o.active=!1,o._resolve(),"mutatedParts"in i&&Rt.storagemutated.fire(i.mutatedParts)}),this},ot.prototype._promise=function(i,o,s){var c=this;if(i==="readwrite"&&this.mode!=="readwrite")return Pe(new J.ReadOnly("Transaction is readonly"));if(!this.active)return Pe(new J.TransactionInactive);if(this._locked())return new $(function(p,v){c._blockedFuncs.push([function(){c._promise(i,o,s).then(p,v)},X])});if(s)return Tt(function(){var p=new $(function(v,b){c._lock();var g=o(v,b,c);g&&g.then&&g.then(v,b)});return p.finally(function(){return c._unlock()}),p._lib=!0,p});var d=new $(function(p,v){var b=o(p,v,c);b&&b.then&&b.then(p,v)});return d._lib=!0,d},ot.prototype._root=function(){return this.parent?this.parent._root():this},ot.prototype.waitFor=function(i){var o,s=this._root(),c=$.resolve(i);s._waitingFor?s._waitingFor=s._waitingFor.then(function(){return c}):(s._waitingFor=c,s._waitingQueue=[],o=s.idbtrans.objectStore(s.storeNames[0]),function p(){for(++s._spinCount;s._waitingQueue.length;)s._waitingQueue.shift()();s._waitingFor&&(o.get(-1/0).onsuccess=p)}());var d=s._waitingFor;return new $(function(p,v){c.then(function(b){return s._waitingQueue.push(_e(p.bind(null,b)))},function(b){return s._waitingQueue.push(_e(v.bind(null,b)))}).finally(function(){s._waitingFor===d&&(s._waitingFor=null)})})},ot.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new J.Abort))},ot.prototype.table=function(i){var o=this._memoizedTables||(this._memoizedTables={});if(C(o,i))return o[i];var s=this.schema[i];if(!s)throw new J.NotFound("Table "+i+" not part of transaction");return s=new this.db.Table(i,s,this),s.core=this.db.core.table(i),o[i]=s},ot);function ot(){}function ca(i,o,s,c,d,p,v){return{name:i,keyPath:o,unique:s,multi:c,auto:d,compound:p,src:(s&&!v?"&":"")+(c?"*":"")+(d?"++":"")+Go(o)}}function Go(i){return typeof i=="string"?i:i?"["+[].join.call(i,"+")+"]":""}function fa(i,o,s){return{name:i,primKey:o,indexes:s,mappedClass:null,idxByName:(c=function(d){return[d.name,d]},s.reduce(function(d,p,v){return v=c(p,v),v&&(d[v[0]]=v[1]),d},{}))};var c}var un=function(i){try{return i.only([[]]),un=function(){return[[]]},[[]]}catch{return un=function(){return rr},rr}};function da(i){return i==null?function(){}:typeof i=="string"?(o=i).split(".").length===1?function(s){return s[o]}:function(s){return de(s,o)}:function(s){return de(s,i)};var o}function Yo(i){return[].slice.call(i)}var ac=0;function sn(i){return i==null?":id":typeof i=="string"?i:"[".concat(i.join("+"),"]")}function oc(i,o,g){function c(O){if(O.type===3)return null;if(O.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var _=O.lower,P=O.upper,E=O.lowerOpen,O=O.upperOpen;return _===void 0?P===void 0?null:o.upperBound(P,!!O):P===void 0?o.lowerBound(_,!!E):o.bound(_,P,!!E,!!O)}function d(A){var _,P=A.name;return{name:P,schema:A,mutate:function(E){var O=E.trans,x=E.type,T=E.keys,I=E.values,k=E.range;return new Promise(function(B,F){B=_e(B);var L=O.objectStore(P),V=L.keyPath==null,q=x==="put"||x==="add";if(!q&&x!=="delete"&&x!=="deleteRange")throw new Error("Invalid operation type: "+x);var K,W=(T||I||{length:1}).length;if(T&&I&&T.length!==I.length)throw new Error("Given keys array must have same length as given values array.");if(W===0)return B({numFailures:0,failures:{},results:[],lastResult:void 0});function ie(De){++Fe,an(De)}var ue=[],se=[],Fe=0;if(x==="deleteRange"){if(k.type===4)return B({numFailures:Fe,failures:se,results:[],lastResult:void 0});k.type===3?ue.push(K=L.clear()):ue.push(K=L.delete(c(k)))}else{var V=q?V?[I,T]:[I,null]:[T,null],ne=V[0],Ie=V[1];if(q)for(var ke=0;ke<W;++ke)ue.push(K=Ie&&Ie[ke]!==void 0?L[x](ne[ke],Ie[ke]):L[x](ne[ke])),K.onerror=ie;else for(ke=0;ke<W;++ke)ue.push(K=L[x](ne[ke])),K.onerror=ie}function ni(De){De=De.target.result,ue.forEach(function(or,Ta){return or.error!=null&&(se[Ta]=or.error)}),B({numFailures:Fe,failures:se,results:x==="delete"?T:ue.map(function(or){return or.result}),lastResult:De})}K.onerror=function(De){ie(De),ni(De)},K.onsuccess=ni})},getMany:function(E){var O=E.trans,x=E.keys;return new Promise(function(T,I){T=_e(T);for(var k,B=O.objectStore(P),F=x.length,L=new Array(F),V=0,q=0,K=function(ue){ue=ue.target,L[ue._pos]=ue.result,++q===V&&T(L)},W=at(I),ie=0;ie<F;++ie)x[ie]!=null&&((k=B.get(x[ie]))._pos=ie,k.onsuccess=K,k.onerror=W,++V);V===0&&T(L)})},get:function(E){var O=E.trans,x=E.key;return new Promise(function(T,I){T=_e(T);var k=O.objectStore(P).get(x);k.onsuccess=function(B){return T(B.target.result)},k.onerror=at(I)})},query:(_=w,function(E){return new Promise(function(O,x){O=_e(O);var T,I,k,V=E.trans,B=E.values,F=E.limit,K=E.query,L=F===1/0?void 0:F,q=K.index,K=K.range,V=V.objectStore(P),q=q.isPrimaryKey?V:V.index(q.name),K=c(K);if(F===0)return O({result:[]});_?((L=B?q.getAll(K,L):q.getAllKeys(K,L)).onsuccess=function(W){return O({result:W.target.result})},L.onerror=at(x)):(T=0,I=!B&&"openKeyCursor"in q?q.openKeyCursor(K):q.openCursor(K),k=[],I.onsuccess=function(W){var ie=I.result;return ie?(k.push(B?ie.value:ie.primaryKey),++T===F?O({result:k}):void ie.continue()):O({result:k})},I.onerror=at(x))})}),openCursor:function(E){var O=E.trans,x=E.values,T=E.query,I=E.reverse,k=E.unique;return new Promise(function(B,F){B=_e(B);var q=T.index,L=T.range,V=O.objectStore(P),V=q.isPrimaryKey?V:V.index(q.name),q=I?k?"prevunique":"prev":k?"nextunique":"next",K=!x&&"openKeyCursor"in V?V.openKeyCursor(c(L),q):V.openCursor(c(L),q);K.onerror=at(F),K.onsuccess=_e(function(W){var ie,ue,se,Fe,ne=K.result;ne?(ne.___id=++ac,ne.done=!1,ie=ne.continue.bind(ne),ue=(ue=ne.continuePrimaryKey)&&ue.bind(ne),se=ne.advance.bind(ne),Fe=function(){throw new Error("Cursor not stopped")},ne.trans=O,ne.stop=ne.continue=ne.continuePrimaryKey=ne.advance=function(){throw new Error("Cursor not started")},ne.fail=_e(F),ne.next=function(){var Ie=this,ke=1;return this.start(function(){return ke--?Ie.continue():Ie.stop()}).then(function(){return Ie})},ne.start=function(Ie){function ke(){if(K.result)try{Ie()}catch(De){ne.fail(De)}else ne.done=!0,ne.start=function(){throw new Error("Cursor behind last entry")},ne.stop()}var ni=new Promise(function(De,or){De=_e(De),K.onerror=at(or),ne.fail=or,ne.stop=function(Ta){ne.stop=ne.continue=ne.continuePrimaryKey=ne.advance=Fe,De(Ta)}});return K.onsuccess=_e(function(De){K.onsuccess=ke,ke()}),ne.continue=ie,ne.continuePrimaryKey=ue,ne.advance=se,ke(),ni},B(ne)):B(null)},F)})},count:function(E){var O=E.query,x=E.trans,T=O.index,I=O.range;return new Promise(function(k,B){var F=x.objectStore(P),L=T.isPrimaryKey?F:F.index(T.name),F=c(I),L=F?L.count(F):L.count();L.onsuccess=_e(function(V){return k(V.target.result)}),L.onerror=at(B)})}}}var p,v,b,S=(v=g,b=Yo((p=i).objectStoreNames),{schema:{name:p.name,tables:b.map(function(A){return v.objectStore(A)}).map(function(A){var _=A.keyPath,O=A.autoIncrement,P=f(_),E={},O={name:A.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:_==null,compound:P,keyPath:_,autoIncrement:O,unique:!0,extractKey:da(_)},indexes:Yo(A.indexNames).map(function(x){return A.index(x)}).map(function(k){var T=k.name,I=k.unique,B=k.multiEntry,k=k.keyPath,B={name:T,compound:f(k),keyPath:k,unique:I,multiEntry:B,extractKey:da(k)};return E[sn(k)]=B}),getIndexByKeyPath:function(x){return E[sn(x)]}};return E[":id"]=O.primaryKey,_!=null&&(E[sn(_)]=O.primaryKey),O})},hasGetAll:0<b.length&&"getAll"in v.objectStore(b[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),g=S.schema,w=S.hasGetAll,S=g.tables.map(d),y={};return S.forEach(function(A){return y[A.name]=A}),{stack:"dbcore",transaction:i.transaction.bind(i),table:function(A){if(!y[A])throw new Error("Table '".concat(A,"' not found"));return y[A]},MIN_KEY:-1/0,MAX_KEY:un(o),schema:g}}function uc(i,o,s,c){var d=s.IDBKeyRange;return s.indexedDB,{dbcore:(c=oc(o,d,c),i.dbcore.reduce(function(p,v){return v=v.create,r(r({},p),v(p))},c))}}function $n(i,c){var s=c.db,c=uc(i._middlewares,s,i._deps,c);i.core=c.dbcore,i.tables.forEach(function(d){var p=d.name;i.core.schema.tables.some(function(v){return v.name===p})&&(d.core=i.core.table(p),i[p]instanceof i.Table&&(i[p].core=d.core))})}function Hn(i,o,s,c){s.forEach(function(d){var p=c[d];o.forEach(function(v){var b=function g(w,S){return H(w,S)||(w=m(w))&&g(w,S)}(v,d);(!b||"value"in b&&b.value===void 0)&&(v===i.Transaction.prototype||v instanceof i.Transaction?G(v,d,{get:function(){return this.table(d)},set:function(g){z(this,d,{value:g,writable:!0,configurable:!0,enumerable:!0})}}):v[d]=new i.Table(d,p))})})}function pa(i,o){o.forEach(function(s){for(var c in s)s[c]instanceof i.Table&&delete s[c]})}function sc(i,o){return i._cfg.version-o._cfg.version}function lc(i,o,s,c){var d=i._dbSchema;s.objectStoreNames.contains("$meta")&&!d.$meta&&(d.$meta=fa("$meta",Jo("")[0],[]),i._storeNames.push("$meta"));var p=i._createTransaction("readwrite",i._storeNames,d);p.create(s),p._completion.catch(c);var v=p._reject.bind(p),b=X.transless||X;Tt(function(){return X.trans=p,X.transless=b,o!==0?($n(i,s),w=o,((g=p).storeNames.includes("$meta")?g.table("$meta").get("version").then(function(S){return S??w}):$.resolve(w)).then(function(S){return A=S,_=p,P=s,E=[],S=(y=i)._versions,O=y._dbSchema=Gn(0,y.idbdb,P),(S=S.filter(function(x){return x._cfg.version>=A})).length!==0?(S.forEach(function(x){E.push(function(){var T=O,I=x._cfg.dbschema;Yn(y,T,P),Yn(y,I,P),O=y._dbSchema=I;var k=ha(T,I);k.add.forEach(function(q){va(P,q[0],q[1].primKey,q[1].indexes)}),k.change.forEach(function(q){if(q.recreate)throw new J.Upgrade("Not yet support for changing primary key");var K=P.objectStore(q.name);q.add.forEach(function(W){return Wn(K,W)}),q.change.forEach(function(W){K.deleteIndex(W.name),Wn(K,W)}),q.del.forEach(function(W){return K.deleteIndex(W)})});var B=x._cfg.contentUpgrade;if(B&&x._cfg.version>A){$n(y,P),_._memoizedTables={};var F=We(I);k.del.forEach(function(q){F[q]=T[q]}),pa(y,[y.Transaction.prototype]),Hn(y,[y.Transaction.prototype],l(F),F),_.schema=F;var L,V=Wi(B);return V&&Sr(),k=$.follow(function(){var q;(L=B(_))&&V&&(q=It.bind(null,null),L.then(q,q))}),L&&typeof L.then=="function"?$.resolve(L):k.then(function(){return L})}}),E.push(function(T){var I,k,B=x._cfg.dbschema;I=B,k=T,[].slice.call(k.db.objectStoreNames).forEach(function(F){return I[F]==null&&k.db.deleteObjectStore(F)}),pa(y,[y.Transaction.prototype]),Hn(y,[y.Transaction.prototype],y._storeNames,y._dbSchema),_.schema=y._dbSchema}),E.push(function(T){y.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(y.idbdb.version/10)===x._cfg.version?(y.idbdb.deleteObjectStore("$meta"),delete y._dbSchema.$meta,y._storeNames=y._storeNames.filter(function(I){return I!=="$meta"})):T.objectStore("$meta").put(x._cfg.version,"version"))})}),function x(){return E.length?$.resolve(E.shift()(_.idbtrans)).then(x):$.resolve()}().then(function(){Xo(O,P)})):$.resolve();var y,A,_,P,E,O}).catch(v)):(l(d).forEach(function(S){va(s,S,d[S].primKey,d[S].indexes)}),$n(i,s),void $.follow(function(){return i.on.populate.fire(p)}).catch(v));var g,w})}function cc(i,o){Xo(i._dbSchema,o),o.db.version%10!=0||o.objectStoreNames.contains("$meta")||o.db.createObjectStore("$meta").add(Math.ceil(o.db.version/10-1),"version");var s=Gn(0,i.idbdb,o);Yn(i,i._dbSchema,o);for(var c=0,d=ha(s,i._dbSchema).change;c<d.length;c++){var p=function(v){if(v.change.length||v.recreate)return console.warn("Unable to patch indexes of table ".concat(v.name," because it has changes on the type of index or primary key.")),{value:void 0};var b=o.objectStore(v.name);v.add.forEach(function(g){it&&console.debug("Dexie upgrade patch: Creating missing index ".concat(v.name,".").concat(g.src)),Wn(b,g)})}(d[c]);if(typeof p=="object")return p.value}}function ha(i,o){var s,c={del:[],add:[],change:[]};for(s in i)o[s]||c.del.push(s);for(s in o){var d=i[s],p=o[s];if(d){var v={name:s,def:p,recreate:!1,del:[],add:[],change:[]};if(""+(d.primKey.keyPath||"")!=""+(p.primKey.keyPath||"")||d.primKey.auto!==p.primKey.auto)v.recreate=!0,c.change.push(v);else{var b=d.idxByName,g=p.idxByName,w=void 0;for(w in b)g[w]||v.del.push(w);for(w in g){var S=b[w],y=g[w];S?S.src!==y.src&&v.change.push(y):v.add.push(y)}(0<v.del.length||0<v.add.length||0<v.change.length)&&c.change.push(v)}}else c.add.push([s,p])}return c}function va(i,o,s,c){var d=i.db.createObjectStore(o,s.keyPath?{keyPath:s.keyPath,autoIncrement:s.auto}:{autoIncrement:s.auto});return c.forEach(function(p){return Wn(d,p)}),d}function Xo(i,o){l(i).forEach(function(s){o.db.objectStoreNames.contains(s)||(it&&console.debug("Dexie: Creating missing table",s),va(o,s,i[s].primKey,i[s].indexes))})}function Wn(i,o){i.createIndex(o.name,o.keyPath,{unique:o.unique,multiEntry:o.multi})}function Gn(i,o,s){var c={};return re(o.objectStoreNames,0).forEach(function(d){for(var p=s.objectStore(d),v=ca(Go(w=p.keyPath),w||"",!0,!1,!!p.autoIncrement,w&&typeof w!="string",!0),b=[],g=0;g<p.indexNames.length;++g){var S=p.index(p.indexNames[g]),w=S.keyPath,S=ca(S.name,w,!!S.unique,!!S.multiEntry,!1,w&&typeof w!="string",!1);b.push(S)}c[d]=fa(d,v,b)}),c}function Yn(i,o,s){for(var c=s.db.objectStoreNames,d=0;d<c.length;++d){var p=c[d],v=s.objectStore(p);i._hasGetAll="getAll"in v;for(var b=0;b<v.indexNames.length;++b){var g=v.indexNames[b],w=v.index(g).keyPath,S=typeof w=="string"?w:"["+re(w).join("+")+"]";!o[p]||(w=o[p].idxByName[S])&&(w.name=g,delete o[p].idxByName[S],o[p].idxByName[g]=w)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&u.WorkerGlobalScope&&u instanceof u.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(i._hasGetAll=!1)}function Jo(i){return i.split(",").map(function(o,s){var c=(o=o.trim()).replace(/([&*]|\+\+)/g,""),d=/^\[/.test(c)?c.match(/^\[(.*)\]$/)[1].split("+"):c;return ca(c,d||null,/\&/.test(o),/\*/.test(o),/\+\+/.test(o),f(d),s===0)})}var fc=(Xn.prototype._parseStoresSpec=function(i,o){l(i).forEach(function(s){if(i[s]!==null){var c=Jo(i[s]),d=c.shift();if(d.unique=!0,d.multi)throw new J.Schema("Primary key cannot be multi-valued");c.forEach(function(p){if(p.auto)throw new J.Schema("Only primary key can be marked as autoIncrement (++)");if(!p.keyPath)throw new J.Schema("Index must have a name and cannot be an empty string")}),o[s]=fa(s,d,c)}})},Xn.prototype.stores=function(s){var o=this.db;this._cfg.storesSource=this._cfg.storesSource?h(this._cfg.storesSource,s):s;var s=o._versions,c={},d={};return s.forEach(function(p){h(c,p._cfg.storesSource),d=p._cfg.dbschema={},p._parseStoresSpec(c,d)}),o._dbSchema=d,pa(o,[o._allTables,o,o.Transaction.prototype]),Hn(o,[o._allTables,o,o.Transaction.prototype,this._cfg.tables],l(d),d),o._storeNames=l(d),this},Xn.prototype.upgrade=function(i){return this._cfg.contentUpgrade=Yi(this._cfg.contentUpgrade||be,i),this},Xn);function Xn(){}function ba(i,o){var s=i._dbNamesDB;return s||(s=i._dbNamesDB=new gt(Kn,{addons:[],indexedDB:i,IDBKeyRange:o})).version(1).stores({dbnames:"name"}),s.table("dbnames")}function ya(i){return i&&typeof i.databases=="function"}function ma(i){return Tt(function(){return X.letThrough=!0,i()})}function ga(i){return!("from"in i)}var Te=function(i,o){if(!this){var s=new Te;return i&&"d"in i&&h(s,i),s}h(this,arguments.length?{d:1,from:i,to:1<arguments.length?o:i}:{d:0})};function ln(i,o,s){var c=le(o,s);if(!isNaN(c)){if(0<c)throw RangeError();if(ga(i))return h(i,{from:o,to:s,d:1});var d=i.l,c=i.r;if(le(s,i.from)<0)return d?ln(d,o,s):i.l={from:o,to:s,d:1,l:null,r:null},Qo(i);if(0<le(o,i.to))return c?ln(c,o,s):i.r={from:o,to:s,d:1,l:null,r:null},Qo(i);le(o,i.from)<0&&(i.from=o,i.l=null,i.d=c?c.d+1:1),0<le(s,i.to)&&(i.to=s,i.r=null,i.d=i.l?i.l.d+1:1),s=!i.r,d&&!i.l&&cn(i,d),c&&s&&cn(i,c)}}function cn(i,o){ga(o)||function s(c,g){var p=g.from,v=g.to,b=g.l,g=g.r;ln(c,p,v),b&&s(c,b),g&&s(c,g)}(i,o)}function Zo(i,o){var s=Jn(o),c=s.next();if(c.done)return!1;for(var d=c.value,p=Jn(i),v=p.next(d.from),b=v.value;!c.done&&!v.done;){if(le(b.from,d.to)<=0&&0<=le(b.to,d.from))return!0;le(d.from,b.from)<0?d=(c=s.next(b.from)).value:b=(v=p.next(d.from)).value}return!1}function Jn(i){var o=ga(i)?null:{s:0,n:i};return{next:function(s){for(var c=0<arguments.length;o;)switch(o.s){case 0:if(o.s=1,c)for(;o.n.l&&le(s,o.n.from)<0;)o={up:o,n:o.n.l,s:1};else for(;o.n.l;)o={up:o,n:o.n.l,s:1};case 1:if(o.s=2,!c||le(s,o.n.to)<=0)return{value:o.n,done:!1};case 2:if(o.n.r){o.s=3,o={up:o,n:o.n.r,s:0};continue}case 3:o=o.up}return{done:!0}}}}function Qo(i){var o,s,c=(((o=i.r)===null||o===void 0?void 0:o.d)||0)-(((s=i.l)===null||s===void 0?void 0:s.d)||0),d=1<c?"r":c<-1?"l":"";d&&(o=d=="r"?"l":"r",s=r({},i),c=i[d],i.from=c.from,i.to=c.to,i[d]=c[d],s[d]=c[o],(i[o]=s).d=eu(s)),i.d=eu(i)}function eu(s){var o=s.r,s=s.l;return(o?s?Math.max(o.d,s.d):o.d:s?s.d:0)+1}function Zn(i,o){return l(o).forEach(function(s){i[s]?cn(i[s],o[s]):i[s]=function c(d){var p,v,b={};for(p in d)C(d,p)&&(v=d[p],b[p]=!v||typeof v!="object"||xo.has(v.constructor)?v:c(v));return b}(o[s])}),i}function _a(i,o){return i.all||o.all||Object.keys(i).some(function(s){return o[s]&&Zo(o[s],i[s])})}R(Te.prototype,((Ge={add:function(i){return cn(this,i),this},addKey:function(i){return ln(this,i,i),this},addKeys:function(i){var o=this;return i.forEach(function(s){return ln(o,s,s)}),this},hasKey:function(i){var o=Jn(this).next(i).value;return o&&le(o.from,i)<=0&&0<=le(o.to,i)}})[Hi]=function(){return Jn(this)},Ge));var ir={},wa={},Oa=!1;function Qn(i){Zn(wa,i),Oa||(Oa=!0,setTimeout(function(){Oa=!1,Pa(wa,!(wa={}))},0))}function Pa(i,o){o===void 0&&(o=!1);var s=new Set;if(i.all)for(var c=0,d=Object.values(ir);c<d.length;c++)tu(v=d[c],i,s,o);else for(var p in i){var v,b=/^idb\:\/\/(.*)\/(.*)\//.exec(p);b&&(p=b[1],b=b[2],(v=ir["idb://".concat(p,"/").concat(b)])&&tu(v,i,s,o))}s.forEach(function(g){return g()})}function tu(i,o,s,c){for(var d=[],p=0,v=Object.entries(i.queries.query);p<v.length;p++){for(var b=v[p],g=b[0],w=[],S=0,y=b[1];S<y.length;S++){var A=y[S];_a(o,A.obsSet)?A.subscribers.forEach(function(O){return s.add(O)}):c&&w.push(A)}c&&d.push([g,w])}if(c)for(var _=0,P=d;_<P.length;_++){var E=P[_],g=E[0],w=E[1];i.queries.query[g]=w}}function dc(i){var o=i._state,s=i._deps.indexedDB;if(o.isBeingOpened||i.idbdb)return o.dbReadyPromise.then(function(){return o.dbOpenError?Pe(o.dbOpenError):i});o.isBeingOpened=!0,o.dbOpenError=null,o.openComplete=!1;var c=o.openCanceller,d=Math.round(10*i.verno),p=!1;function v(){if(o.openCanceller!==c)throw new J.DatabaseClosed("db.open() was cancelled")}function b(){return new $(function(A,_){if(v(),!s)throw new J.MissingAPI;var P=i.name,E=o.autoSchema||!d?s.open(P):s.open(P,d);if(!E)throw new J.MissingAPI;E.onerror=at(_),E.onblocked=_e(i._fireOnBlocked),E.onupgradeneeded=_e(function(O){var x;S=E.transaction,o.autoSchema&&!i._options.allowEmptyDB?(E.onerror=an,S.abort(),E.result.close(),(x=s.deleteDatabase(P)).onsuccess=x.onerror=_e(function(){_(new J.NoSuchDatabase("Database ".concat(P," doesnt exist")))})):(S.onerror=at(_),O=O.oldVersion>Math.pow(2,62)?0:O.oldVersion,y=O<1,i.idbdb=E.result,p&&cc(i,S),lc(i,O/10,S,_))},_),E.onsuccess=_e(function(){S=null;var O,x,T,I,k,B=i.idbdb=E.result,F=re(B.objectStoreNames);if(0<F.length)try{var L=B.transaction((I=F).length===1?I[0]:I,"readonly");if(o.autoSchema)x=B,T=L,(O=i).verno=x.version/10,T=O._dbSchema=Gn(0,x,T),O._storeNames=re(x.objectStoreNames,0),Hn(O,[O._allTables],l(T),T);else if(Yn(i,i._dbSchema,L),((k=ha(Gn(0,(k=i).idbdb,L),k._dbSchema)).add.length||k.change.some(function(V){return V.add.length||V.change.length}))&&!p)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),B.close(),d=B.version+1,p=!0,A(b());$n(i,L)}catch{}Er.push(i),B.onversionchange=_e(function(V){o.vcFired=!0,i.on("versionchange").fire(V)}),B.onclose=_e(function(V){i.on("close").fire(V)}),y&&(k=i._deps,L=P,B=k.indexedDB,k=k.IDBKeyRange,ya(B)||L===Kn||ba(B,k).put({name:L}).catch(be)),A()},_)}).catch(function(A){switch(A?.name){case"UnknownError":if(0<o.PR1398_maxLoop)return o.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),b();break;case"VersionError":if(0<d)return d=0,b()}return $.reject(A)})}var g,w=o.dbReadyResolve,S=null,y=!1;return $.race([c,(typeof navigator>"u"?$.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(A){function _(){return indexedDB.databases().finally(A)}g=setInterval(_,100),_()}).finally(function(){return clearInterval(g)}):Promise.resolve()).then(b)]).then(function(){return v(),o.onReadyBeingFired=[],$.resolve(ma(function(){return i.on.ready.fire(i.vip)})).then(function A(){if(0<o.onReadyBeingFired.length){var _=o.onReadyBeingFired.reduce(Yi,be);return o.onReadyBeingFired=[],$.resolve(ma(function(){return _(i.vip)})).then(A)}})}).finally(function(){o.openCanceller===c&&(o.onReadyBeingFired=null,o.isBeingOpened=!1)}).catch(function(A){o.dbOpenError=A;try{S&&S.abort()}catch{}return c===o.openCanceller&&i._close(),Pe(A)}).finally(function(){o.openComplete=!0,w()}).then(function(){var A;return y&&(A={},i.tables.forEach(function(_){_.schema.indexes.forEach(function(P){P.name&&(A["idb://".concat(i.name,"/").concat(_.name,"/").concat(P.name)]=new Te(-1/0,[[[]]]))}),A["idb://".concat(i.name,"/").concat(_.name,"/")]=A["idb://".concat(i.name,"/").concat(_.name,"/:dels")]=new Te(-1/0,[[[]]])}),Rt(on).fire(A),Pa(A,!0)),i})}function Sa(i){function o(p){return i.next(p)}var s=d(o),c=d(function(p){return i.throw(p)});function d(p){return function(g){var b=p(g),g=b.value;return b.done?g:g&&typeof g.then=="function"?g.then(s,c):f(g)?Promise.all(g).then(s,c):s(g)}}return d(o)()}function ei(i,o,s){for(var c=f(i)?i.slice():[i],d=0;d<s;++d)c.push(o);return c}var pc={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(i){return r(r({},i),{table:function(o){var s=i.table(o),c=s.schema,d={},p=[];function v(y,A,_){var P=sn(y),E=d[P]=d[P]||[],O=y==null?0:typeof y=="string"?1:y.length,x=0<A,x=r(r({},_),{name:x?"".concat(P,"(virtual-from:").concat(_.name,")"):_.name,lowLevelIndex:_,isVirtual:x,keyTail:A,keyLength:O,extractKey:da(y),unique:!x&&_.unique});return E.push(x),x.isPrimaryKey||p.push(x),1<O&&v(O===2?y[0]:y.slice(0,O-1),A+1,_),E.sort(function(T,I){return T.keyTail-I.keyTail}),x}o=v(c.primaryKey.keyPath,0,c.primaryKey),d[":id"]=[o];for(var b=0,g=c.indexes;b<g.length;b++){var w=g[b];v(w.keyPath,0,w)}function S(y){var A,_=y.query.index;return _.isVirtual?r(r({},y),{query:{index:_.lowLevelIndex,range:(A=y.query.range,_=_.keyTail,{type:A.type===1?2:A.type,lower:ei(A.lower,A.lowerOpen?i.MAX_KEY:i.MIN_KEY,_),lowerOpen:!0,upper:ei(A.upper,A.upperOpen?i.MIN_KEY:i.MAX_KEY,_),upperOpen:!0})}}):y}return r(r({},s),{schema:r(r({},c),{primaryKey:o,indexes:p,getIndexByKeyPath:function(y){return(y=d[sn(y)])&&y[0]}}),count:function(y){return s.count(S(y))},query:function(y){return s.query(S(y))},openCursor:function(y){var A=y.query.index,_=A.keyTail,P=A.isVirtual,E=A.keyLength;return P?s.openCursor(S(y)).then(function(x){return x&&O(x)}):s.openCursor(y);function O(x){return Object.create(x,{continue:{value:function(T){T!=null?x.continue(ei(T,y.reverse?i.MAX_KEY:i.MIN_KEY,_)):y.unique?x.continue(x.key.slice(0,E).concat(y.reverse?i.MIN_KEY:i.MAX_KEY,_)):x.continue()}},continuePrimaryKey:{value:function(T,I){x.continuePrimaryKey(ei(T,i.MAX_KEY,_),I)}},primaryKey:{get:function(){return x.primaryKey}},key:{get:function(){var T=x.key;return E===1?T[0]:T.slice(0,E)}},value:{get:function(){return x.value}}})}}})}})}};function Ea(i,o,s,c){return s=s||{},c=c||"",l(i).forEach(function(d){var p,v,b;C(o,d)?(p=i[d],v=o[d],typeof p=="object"&&typeof v=="object"&&p&&v?(b=$i(p))!==$i(v)?s[c+d]=o[d]:b==="Object"?Ea(p,v,s,c+d+"."):p!==v&&(s[c+d]=o[d]):p!==v&&(s[c+d]=o[d])):s[c+d]=void 0}),l(o).forEach(function(d){C(i,d)||(s[c+d]=o[d])}),s}function Aa(i,o){return o.type==="delete"?o.keys:o.keys||o.values.map(i.extractKey)}var hc={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(i){return r(r({},i),{table:function(o){var s=i.table(o),c=s.schema.primaryKey;return r(r({},s),{mutate:function(d){var p=X.trans,v=p.table(o).hook,b=v.deleting,g=v.creating,w=v.updating;switch(d.type){case"add":if(g.fire===be)break;return p._promise("readwrite",function(){return S(d)},!0);case"put":if(g.fire===be&&w.fire===be)break;return p._promise("readwrite",function(){return S(d)},!0);case"delete":if(b.fire===be)break;return p._promise("readwrite",function(){return S(d)},!0);case"deleteRange":if(b.fire===be)break;return p._promise("readwrite",function(){return function y(A,_,P){return s.query({trans:A,values:!1,query:{index:c,range:_},limit:P}).then(function(E){var O=E.result;return S({type:"delete",keys:O,trans:A}).then(function(x){return 0<x.numFailures?Promise.reject(x.failures[0]):O.length<P?{failures:[],numFailures:0,lastResult:void 0}:y(A,r(r({},_),{lower:O[O.length-1],lowerOpen:!0}),P)})})}(d.trans,d.range,1e4)},!0)}return s.mutate(d);function S(y){var A,_,P,E=X.trans,O=y.keys||Aa(c,y);if(!O)throw new Error("Keys missing");return(y=y.type==="add"||y.type==="put"?r(r({},y),{keys:O}):r({},y)).type!=="delete"&&(y.values=a([],y.values)),y.keys&&(y.keys=a([],y.keys)),A=s,P=O,((_=y).type==="add"?Promise.resolve([]):A.getMany({trans:_.trans,keys:P,cache:"immutable"})).then(function(x){var T=O.map(function(I,k){var B,F,L,V=x[k],q={onerror:null,onsuccess:null};return y.type==="delete"?b.fire.call(q,I,V,E):y.type==="add"||V===void 0?(B=g.fire.call(q,I,y.values[k],E),I==null&&B!=null&&(y.keys[k]=I=B,c.outbound||te(y.values[k],c.keyPath,I))):(B=Ea(V,y.values[k]),(F=w.fire.call(q,B,I,V,E))&&(L=y.values[k],Object.keys(F).forEach(function(K){C(L,K)?L[K]=F[K]:te(L,K,F[K])}))),q});return s.mutate(y).then(function(I){for(var k=I.failures,B=I.results,F=I.numFailures,I=I.lastResult,L=0;L<O.length;++L){var V=(B||O)[L],q=T[L];V==null?q.onerror&&q.onerror(k[L]):q.onsuccess&&q.onsuccess(y.type==="put"&&x[L]?y.values[L]:V)}return{failures:k,results:B,numFailures:F,lastResult:I}}).catch(function(I){return T.forEach(function(k){return k.onerror&&k.onerror(I)}),Promise.reject(I)})})}}})}})}};function ru(i,o,s){try{if(!o||o.keys.length<i.length)return null;for(var c=[],d=0,p=0;d<o.keys.length&&p<i.length;++d)le(o.keys[d],i[p])===0&&(c.push(s?Gt(o.values[d]):o.values[d]),++p);return c.length===i.length?c:null}catch{return null}}var vc={stack:"dbcore",level:-1,create:function(i){return{table:function(o){var s=i.table(o);return r(r({},s),{getMany:function(c){if(!c.cache)return s.getMany(c);var d=ru(c.keys,c.trans._cache,c.cache==="clone");return d?$.resolve(d):s.getMany(c).then(function(p){return c.trans._cache={keys:c.keys,values:c.cache==="clone"?Gt(p):p},p})},mutate:function(c){return c.type!=="add"&&(c.trans._cache=null),s.mutate(c)}})}}}};function nu(i,o){return i.trans.mode==="readonly"&&!!i.subscr&&!i.trans.explicit&&i.trans.db._options.cache!=="disabled"&&!o.schema.primaryKey.outbound}function iu(i,o){switch(i){case"query":return o.values&&!o.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var bc={stack:"dbcore",level:0,name:"Observability",create:function(i){var o=i.schema.name,s=new Te(i.MIN_KEY,i.MAX_KEY);return r(r({},i),{transaction:function(c,d,p){if(X.subscr&&d!=="readonly")throw new J.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(X.querier));return i.transaction(c,d,p)},table:function(c){var d=i.table(c),p=d.schema,v=p.primaryKey,y=p.indexes,b=v.extractKey,g=v.outbound,w=v.autoIncrement&&y.filter(function(_){return _.compound&&_.keyPath.includes(v.keyPath)}),S=r(r({},d),{mutate:function(_){function P(K){return K="idb://".concat(o,"/").concat(c,"/").concat(K),I[K]||(I[K]=new Te)}var E,O,x,T=_.trans,I=_.mutatedParts||(_.mutatedParts={}),k=P(""),B=P(":dels"),F=_.type,q=_.type==="deleteRange"?[_.range]:_.type==="delete"?[_.keys]:_.values.length<50?[Aa(v,_).filter(function(K){return K}),_.values]:[],L=q[0],V=q[1],q=_.trans._cache;return f(L)?(k.addKeys(L),(q=F==="delete"||L.length===V.length?ru(L,q):null)||B.addKeys(L),(q||V)&&(E=P,O=q,x=V,p.indexes.forEach(function(K){var W=E(K.name||"");function ie(se){return se!=null?K.extractKey(se):null}function ue(se){return K.multiEntry&&f(se)?se.forEach(function(Fe){return W.addKey(Fe)}):W.addKey(se)}(O||x).forEach(function(se,Ie){var ne=O&&ie(O[Ie]),Ie=x&&ie(x[Ie]);le(ne,Ie)!==0&&(ne!=null&&ue(ne),Ie!=null&&ue(Ie))})}))):L?(V={from:(V=L.lower)!==null&&V!==void 0?V:i.MIN_KEY,to:(V=L.upper)!==null&&V!==void 0?V:i.MAX_KEY},B.add(V),k.add(V)):(k.add(s),B.add(s),p.indexes.forEach(function(K){return P(K.name).add(s)})),d.mutate(_).then(function(K){return!L||_.type!=="add"&&_.type!=="put"||(k.addKeys(K.results),w&&w.forEach(function(W){for(var ie=_.values.map(function(ne){return W.extractKey(ne)}),ue=W.keyPath.findIndex(function(ne){return ne===v.keyPath}),se=0,Fe=K.results.length;se<Fe;++se)ie[se][ue]=K.results[se];P(W.name).addKeys(ie)})),T.mutatedParts=Zn(T.mutatedParts||{},I),K})}}),y=function(P){var E=P.query,P=E.index,E=E.range;return[P,new Te((P=E.lower)!==null&&P!==void 0?P:i.MIN_KEY,(E=E.upper)!==null&&E!==void 0?E:i.MAX_KEY)]},A={get:function(_){return[v,new Te(_.key)]},getMany:function(_){return[v,new Te().addKeys(_.keys)]},count:y,query:y,openCursor:y};return l(A).forEach(function(_){S[_]=function(P){var E=X.subscr,O=!!E,x=nu(X,d)&&iu(_,P)?P.obsSet={}:E;if(O){var T=function(V){return V="idb://".concat(o,"/").concat(c,"/").concat(V),x[V]||(x[V]=new Te)},I=T(""),k=T(":dels"),E=A[_](P),O=E[0],E=E[1];if((_==="query"&&O.isPrimaryKey&&!P.values?k:T(O.name||"")).add(E),!O.isPrimaryKey){if(_!=="count"){var B=_==="query"&&g&&P.values&&d.query(r(r({},P),{values:!1}));return d[_].apply(this,arguments).then(function(V){if(_==="query"){if(g&&P.values)return B.then(function(ie){return ie=ie.result,I.addKeys(ie),V});var q=P.values?V.result.map(b):V.result;(P.values?I:k).addKeys(q)}else if(_==="openCursor"){var K=V,W=P.values;return K&&Object.create(K,{key:{get:function(){return k.addKey(K.primaryKey),K.key}},primaryKey:{get:function(){var ie=K.primaryKey;return k.addKey(ie),ie}},value:{get:function(){return W&&I.addKey(K.primaryKey),K.value}}})}return V})}k.add(s)}}return d[_].apply(this,arguments)}}),S}})}};function au(i,o,s){if(s.numFailures===0)return o;if(o.type==="deleteRange")return null;var c=o.keys?o.keys.length:"values"in o&&o.values?o.values.length:1;return s.numFailures===c?null:(o=r({},o),f(o.keys)&&(o.keys=o.keys.filter(function(d,p){return!(p in s.failures)})),"values"in o&&f(o.values)&&(o.values=o.values.filter(function(d,p){return!(p in s.failures)})),o)}function ja(i,o){return s=i,((c=o).lower===void 0||(c.lowerOpen?0<le(s,c.lower):0<=le(s,c.lower)))&&(i=i,(o=o).upper===void 0||(o.upperOpen?le(i,o.upper)<0:le(i,o.upper)<=0));var s,c}function ou(i,o,A,c,d,p){if(!A||A.length===0)return i;var v=o.query.index,b=v.multiEntry,g=o.query.range,w=c.schema.primaryKey.extractKey,S=v.extractKey,y=(v.lowLevelIndex||v).extractKey,A=A.reduce(function(_,P){var E=_,O=[];if(P.type==="add"||P.type==="put")for(var x=new Te,T=P.values.length-1;0<=T;--T){var I,k=P.values[T],B=w(k);x.hasKey(B)||(I=S(k),(b&&f(I)?I.some(function(K){return ja(K,g)}):ja(I,g))&&(x.addKey(B),O.push(k)))}switch(P.type){case"add":var F=new Te().addKeys(o.values?_.map(function(W){return w(W)}):_),E=_.concat(o.values?O.filter(function(W){return W=w(W),!F.hasKey(W)&&(F.addKey(W),!0)}):O.map(function(W){return w(W)}).filter(function(W){return!F.hasKey(W)&&(F.addKey(W),!0)}));break;case"put":var L=new Te().addKeys(P.values.map(function(W){return w(W)}));E=_.filter(function(W){return!L.hasKey(o.values?w(W):W)}).concat(o.values?O:O.map(function(W){return w(W)}));break;case"delete":var V=new Te().addKeys(P.keys);E=_.filter(function(W){return!V.hasKey(o.values?w(W):W)});break;case"deleteRange":var q=P.range;E=_.filter(function(W){return!ja(w(W),q)})}return E},i);return A===i?i:(A.sort(function(_,P){return le(y(_),y(P))||le(w(_),w(P))}),o.limit&&o.limit<1/0&&(A.length>o.limit?A.length=o.limit:i.length===o.limit&&A.length<o.limit&&(d.dirty=!0)),p?Object.freeze(A):A)}function uu(i,o){return le(i.lower,o.lower)===0&&le(i.upper,o.upper)===0&&!!i.lowerOpen==!!o.lowerOpen&&!!i.upperOpen==!!o.upperOpen}function yc(i,o){return function(s,c,d,p){if(s===void 0)return c!==void 0?-1:0;if(c===void 0)return 1;if((c=le(s,c))===0){if(d&&p)return 0;if(d)return 1;if(p)return-1}return c}(i.lower,o.lower,i.lowerOpen,o.lowerOpen)<=0&&0<=function(s,c,d,p){if(s===void 0)return c!==void 0?1:0;if(c===void 0)return-1;if((c=le(s,c))===0){if(d&&p)return 0;if(d)return-1;if(p)return 1}return c}(i.upper,o.upper,i.upperOpen,o.upperOpen)}function mc(i,o,s,c){i.subscribers.add(s),c.addEventListener("abort",function(){var d,p;i.subscribers.delete(s),i.subscribers.size===0&&(d=i,p=o,setTimeout(function(){d.subscribers.size===0&&Yt(p,d)},3e3))})}var gc={stack:"dbcore",level:0,name:"Cache",create:function(i){var o=i.schema.name;return r(r({},i),{transaction:function(s,c,d){var p,v,b=i.transaction(s,c,d);return c==="readwrite"&&(v=(p=new AbortController).signal,d=function(g){return function(){if(p.abort(),c==="readwrite"){for(var w=new Set,S=0,y=s;S<y.length;S++){var A=y[S],_=ir["idb://".concat(o,"/").concat(A)];if(_){var P=i.table(A),E=_.optimisticOps.filter(function(W){return W.trans===b});if(b._explicit&&g&&b.mutatedParts)for(var O=0,x=Object.values(_.queries.query);O<x.length;O++)for(var T=0,I=(F=x[O]).slice();T<I.length;T++)_a((L=I[T]).obsSet,b.mutatedParts)&&(Yt(F,L),L.subscribers.forEach(function(W){return w.add(W)}));else if(0<E.length){_.optimisticOps=_.optimisticOps.filter(function(W){return W.trans!==b});for(var k=0,B=Object.values(_.queries.query);k<B.length;k++)for(var F,L,V,q=0,K=(F=B[k]).slice();q<K.length;q++)(L=K[q]).res!=null&&b.mutatedParts&&(g&&!L.dirty?(V=Object.isFrozen(L.res),V=ou(L.res,L.req,E,P,L,V),L.dirty?(Yt(F,L),L.subscribers.forEach(function(W){return w.add(W)})):V!==L.res&&(L.res=V,L.promise=$.resolve({result:V}))):(L.dirty&&Yt(F,L),L.subscribers.forEach(function(W){return w.add(W)})))}}}w.forEach(function(W){return W()})}}},b.addEventListener("abort",d(!1),{signal:v}),b.addEventListener("error",d(!1),{signal:v}),b.addEventListener("complete",d(!0),{signal:v})),b},table:function(s){var c=i.table(s),d=c.schema.primaryKey;return r(r({},c),{mutate:function(p){var v=X.trans;if(d.outbound||v.db._options.cache==="disabled"||v.explicit||v.idbtrans.mode!=="readwrite")return c.mutate(p);var b=ir["idb://".concat(o,"/").concat(s)];return b?(v=c.mutate(p),p.type!=="add"&&p.type!=="put"||!(50<=p.values.length||Aa(d,p).some(function(g){return g==null}))?(b.optimisticOps.push(p),p.mutatedParts&&Qn(p.mutatedParts),v.then(function(g){0<g.numFailures&&(Yt(b.optimisticOps,p),(g=au(0,p,g))&&b.optimisticOps.push(g),p.mutatedParts&&Qn(p.mutatedParts))}),v.catch(function(){Yt(b.optimisticOps,p),p.mutatedParts&&Qn(p.mutatedParts)})):v.then(function(g){var w=au(0,r(r({},p),{values:p.values.map(function(S,y){var A;return g.failures[y]?S:(S=(A=d.keyPath)!==null&&A!==void 0&&A.includes(".")?Gt(S):r({},S),te(S,d.keyPath,g.results[y]),S)})}),g);b.optimisticOps.push(w),queueMicrotask(function(){return p.mutatedParts&&Qn(p.mutatedParts)})}),v):c.mutate(p)},query:function(p){if(!nu(X,c)||!iu("query",p))return c.query(p);var v=((w=X.trans)===null||w===void 0?void 0:w.db._options.cache)==="immutable",y=X,b=y.requery,g=y.signal,w=function(P,E,O,x){var T=ir["idb://".concat(P,"/").concat(E)];if(!T)return[];if(!(E=T.queries[O]))return[null,!1,T,null];var I=E[(x.query?x.query.index.name:null)||""];if(!I)return[null,!1,T,null];switch(O){case"query":var k=I.find(function(B){return B.req.limit===x.limit&&B.req.values===x.values&&uu(B.req.query.range,x.query.range)});return k?[k,!0,T,I]:[I.find(function(B){return("limit"in B.req?B.req.limit:1/0)>=x.limit&&(!x.values||B.req.values)&&yc(B.req.query.range,x.query.range)}),!1,T,I];case"count":return k=I.find(function(B){return uu(B.req.query.range,x.query.range)}),[k,!!k,T,I]}}(o,s,"query",p),S=w[0],y=w[1],A=w[2],_=w[3];return S&&y?S.obsSet=p.obsSet:(y=c.query(p).then(function(P){var E=P.result;if(S&&(S.res=E),v){for(var O=0,x=E.length;O<x;++O)Object.freeze(E[O]);Object.freeze(E)}else P.result=Gt(E);return P}).catch(function(P){return _&&S&&Yt(_,S),Promise.reject(P)}),S={obsSet:p.obsSet,promise:y,subscribers:new Set,type:"query",req:p,dirty:!1},_?_.push(S):(_=[S],(A=A||(ir["idb://".concat(o,"/").concat(s)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[p.query.index.name||""]=_)),mc(S,_,b,g),S.promise.then(function(P){return{result:ou(P.result,p,A?.optimisticOps,c,S,v)}})}})}})}};function ti(i,o){return new Proxy(i,{get:function(s,c,d){return c==="db"?o:Reflect.get(s,c,d)}})}var gt=(Se.prototype.version=function(i){if(isNaN(i)||i<.1)throw new J.Type("Given version is not a positive number");if(i=Math.round(10*i)/10,this.idbdb||this._state.isBeingOpened)throw new J.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,i);var o=this._versions,s=o.filter(function(c){return c._cfg.version===i})[0];return s||(s=new this.Version(i),o.push(s),o.sort(sc),s.stores({}),this._state.autoSchema=!1,s)},Se.prototype._whenReady=function(i){var o=this;return this.idbdb&&(this._state.openComplete||X.letThrough||this._vip)?i():new $(function(s,c){if(o._state.openComplete)return c(new J.DatabaseClosed(o._state.dbOpenError));if(!o._state.isBeingOpened){if(!o._state.autoOpen)return void c(new J.DatabaseClosed);o.open().catch(be)}o._state.dbReadyPromise.then(s,c)}).then(i)},Se.prototype.use=function(i){var o=i.stack,s=i.create,c=i.level,d=i.name;return d&&this.unuse({stack:o,name:d}),i=this._middlewares[o]||(this._middlewares[o]=[]),i.push({stack:o,create:s,level:c??10,name:d}),i.sort(function(p,v){return p.level-v.level}),this},Se.prototype.unuse=function(i){var o=i.stack,s=i.name,c=i.create;return o&&this._middlewares[o]&&(this._middlewares[o]=this._middlewares[o].filter(function(d){return c?d.create!==c:!!s&&d.name!==s})),this},Se.prototype.open=function(){var i=this;return tr(Ct,function(){return dc(i)})},Se.prototype._close=function(){var i=this._state,o=Er.indexOf(this);if(0<=o&&Er.splice(o,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}i.isBeingOpened||(i.dbReadyPromise=new $(function(s){i.dbReadyResolve=s}),i.openCanceller=new $(function(s,c){i.cancelOpen=c}))},Se.prototype.close=function(s){var o=(s===void 0?{disableAutoOpen:!0}:s).disableAutoOpen,s=this._state;o?(s.isBeingOpened&&s.cancelOpen(new J.DatabaseClosed),this._close(),s.autoOpen=!1,s.dbOpenError=new J.DatabaseClosed):(this._close(),s.autoOpen=this._options.autoOpen||s.isBeingOpened,s.openComplete=!1,s.dbOpenError=null)},Se.prototype.delete=function(i){var o=this;i===void 0&&(i={disableAutoOpen:!0});var s=0<arguments.length&&typeof arguments[0]!="object",c=this._state;return new $(function(d,p){function v(){o.close(i);var b=o._deps.indexedDB.deleteDatabase(o.name);b.onsuccess=_e(function(){var g,w,S;g=o._deps,w=o.name,S=g.indexedDB,g=g.IDBKeyRange,ya(S)||w===Kn||ba(S,g).delete(w).catch(be),d()}),b.onerror=at(p),b.onblocked=o._fireOnBlocked}if(s)throw new J.InvalidArgument("Invalid closeOptions argument to db.delete()");c.isBeingOpened?c.dbReadyPromise.then(v):v()})},Se.prototype.backendDB=function(){return this.idbdb},Se.prototype.isOpen=function(){return this.idbdb!==null},Se.prototype.hasBeenClosed=function(){var i=this._state.dbOpenError;return i&&i.name==="DatabaseClosed"},Se.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Se.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Se.prototype,"tables",{get:function(){var i=this;return l(this._allTables).map(function(o){return i._allTables[o]})},enumerable:!1,configurable:!0}),Se.prototype.transaction=function(){var i=function(o,s,c){var d=arguments.length;if(d<2)throw new J.InvalidArgument("Too few arguments");for(var p=new Array(d-1);--d;)p[d-1]=arguments[d];return c=p.pop(),[o,mr(p),c]}.apply(this,arguments);return this._transaction.apply(this,i)},Se.prototype._transaction=function(i,o,s){var c=this,d=X.trans;d&&d.db===this&&i.indexOf("!")===-1||(d=null);var p,v,b=i.indexOf("?")!==-1;i=i.replace("!","").replace("?","");try{if(v=o.map(function(w){if(w=w instanceof c.Table?w.name:w,typeof w!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return w}),i=="r"||i===ia)p=ia;else{if(i!="rw"&&i!=aa)throw new J.InvalidArgument("Invalid transaction mode: "+i);p=aa}if(d){if(d.mode===ia&&p===aa){if(!b)throw new J.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");d=null}d&&v.forEach(function(w){if(d&&d.storeNames.indexOf(w)===-1){if(!b)throw new J.SubTransaction("Table "+w+" not included in parent transaction.");d=null}}),b&&d&&!d.active&&(d=null)}}catch(w){return d?d._promise(null,function(S,y){y(w)}):Pe(w)}var g=function w(S,y,A,_,P){return $.resolve().then(function(){var E=X.transless||X,O=S._createTransaction(y,A,S._dbSchema,_);if(O.explicit=!0,E={trans:O,transless:E},_)O.idbtrans=_.idbtrans;else try{O.create(),O.idbtrans._explicit=!0,S._state.PR1398_maxLoop=3}catch(I){return I.name===Gi.InvalidState&&S.isOpen()&&0<--S._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),S.close({disableAutoOpen:!1}),S.open().then(function(){return w(S,y,A,null,P)})):Pe(I)}var x,T=Wi(P);return T&&Sr(),E=$.follow(function(){var I;(x=P.call(O,O))&&(T?(I=It.bind(null,null),x.then(I,I)):typeof x.next=="function"&&typeof x.throw=="function"&&(x=Sa(x)))},E),(x&&typeof x.then=="function"?$.resolve(x).then(function(I){return O.active?I:Pe(new J.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):E.then(function(){return x})).then(function(I){return _&&O._resolve(),O._completion.then(function(){return I})}).catch(function(I){return O._reject(I),Pe(I)})})}.bind(null,this,p,v,d,s);return d?d._promise(p,g,"lock"):X.trans?tr(X.transless,function(){return c._whenReady(g)}):this._whenReady(g)},Se.prototype.table=function(i){if(!C(this._allTables,i))throw new J.InvalidTable("Table ".concat(i," does not exist"));return this._allTables[i]},Se);function Se(i,o){var s=this;this._middlewares={},this.verno=0;var c=Se.dependencies;this._options=o=r({addons:Se.addons,autoOpen:!0,indexedDB:c.indexedDB,IDBKeyRange:c.IDBKeyRange,cache:"cloned"},o),this._deps={indexedDB:o.indexedDB,IDBKeyRange:o.IDBKeyRange},c=o.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var d,p,v,b,g,w={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:be,dbReadyPromise:null,cancelOpen:be,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:o.autoOpen};w.dbReadyPromise=new $(function(y){w.dbReadyResolve=y}),w.openCanceller=new $(function(y,A){w.cancelOpen=A}),this._state=w,this.name=i,this.on=tn(this,"populate","blocked","versionchange","close",{ready:[Yi,be]}),this.on.ready.subscribe=ae(this.on.ready.subscribe,function(y){return function(A,_){Se.vip(function(){var P,E=s._state;E.openComplete?(E.dbOpenError||$.resolve().then(A),_&&y(A)):E.onReadyBeingFired?(E.onReadyBeingFired.push(A),_&&y(A)):(y(A),P=s,_||y(function O(){P.on.ready.unsubscribe(A),P.on.ready.unsubscribe(O)}))})}}),this.Collection=(d=this,rn(tc.prototype,function(x,O){this.db=d;var _=Lo,P=null;if(O)try{_=O()}catch(T){P=T}var E=x._ctx,O=E.table,x=O.hook.reading.fire;this._ctx={table:O,index:E.index,isPrimKey:!E.index||O.schema.primKey.keyPath&&E.index===O.schema.primKey.name,range:_,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:P,or:E.or,valueMapper:x!==Xr?x:null}})),this.Table=(p=this,rn(zo.prototype,function(y,A,_){this.db=p,this._tx=_,this.name=y,this.schema=A,this.hook=p._allTables[y]?p._allTables[y].hook:tn(null,{creating:[Hl,be],reading:[$l,Xr],updating:[Gl,be],deleting:[Wl,be]})})),this.Transaction=(v=this,rn(ic.prototype,function(y,A,_,P,E){var O=this;this.db=v,this.mode=y,this.storeNames=A,this.schema=_,this.chromeTransactionDurability=P,this.idbtrans=null,this.on=tn(this,"complete","error","abort"),this.parent=E||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new $(function(x,T){O._resolve=x,O._reject=T}),this._completion.then(function(){O.active=!1,O.on.complete.fire()},function(x){var T=O.active;return O.active=!1,O.on.error.fire(x),O.parent?O.parent._reject(x):T&&O.idbtrans&&O.idbtrans.abort(),Pe(x)})})),this.Version=(b=this,rn(fc.prototype,function(y){this.db=b,this._cfg={version:y,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(g=this,rn(Wo.prototype,function(y,A,_){if(this.db=g,this._ctx={table:y,index:A===":id"?null:A,or:_},this._cmp=this._ascending=le,this._descending=function(P,E){return le(E,P)},this._max=function(P,E){return 0<le(P,E)?P:E},this._min=function(P,E){return le(P,E)<0?P:E},this._IDBKeyRange=g._deps.IDBKeyRange,!this._IDBKeyRange)throw new J.MissingAPI})),this.on("versionchange",function(y){0<y.newVersion?console.warn("Another connection wants to upgrade database '".concat(s.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(s.name,"'. Closing db now to resume the delete request.")),s.close({disableAutoOpen:!1})}),this.on("blocked",function(y){!y.newVersion||y.newVersion<y.oldVersion?console.warn("Dexie.delete('".concat(s.name,"') was blocked")):console.warn("Upgrade '".concat(s.name,"' blocked by other connection holding version ").concat(y.oldVersion/10))}),this._maxKey=un(o.IDBKeyRange),this._createTransaction=function(y,A,_,P){return new s.Transaction(y,A,_,s._options.chromeTransactionDurability,P)},this._fireOnBlocked=function(y){s.on("blocked").fire(y),Er.filter(function(A){return A.name===s.name&&A!==s&&!A._state.vcFired}).map(function(A){return A.on("versionchange").fire(y)})},this.use(vc),this.use(gc),this.use(bc),this.use(pc),this.use(hc);var S=new Proxy(this,{get:function(y,A,_){if(A==="_vip")return!0;if(A==="table")return function(E){return ti(s.table(E),S)};var P=Reflect.get(y,A,_);return P instanceof zo?ti(P,S):A==="tables"?P.map(function(E){return ti(E,S)}):A==="_createTransaction"?function(){return ti(P.apply(this,arguments),S)}:P}});this.vip=S,c.forEach(function(y){return y(s)})}var ri,Ge=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",_c=(xa.prototype.subscribe=function(i,o,s){return this._subscribe(i&&typeof i!="function"?i:{next:i,error:o,complete:s})},xa.prototype[Ge]=function(){return this},xa);function xa(i){this._subscribe=i}try{ri={indexedDB:u.indexedDB||u.mozIndexedDB||u.webkitIndexedDB||u.msIndexedDB,IDBKeyRange:u.IDBKeyRange||u.webkitIDBKeyRange}}catch{ri={indexedDB:null,IDBKeyRange:null}}function su(i){var o,s=!1,c=new _c(function(d){var p=Wi(i),v,b=!1,g={},w={},S={get closed(){return b},unsubscribe:function(){b||(b=!0,v&&v.abort(),y&&Rt.storagemutated.unsubscribe(_))}};d.start&&d.start(S);var y=!1,A=function(){return na(P)},_=function(E){Zn(g,E),_a(w,g)&&A()},P=function(){var E,O,x;!b&&ri.indexedDB&&(g={},E={},v&&v.abort(),v=new AbortController,x=function(T){var I=Or();try{p&&Sr();var k=Tt(i,T);return k=p?k.finally(It):k}finally{I&&Pr()}}(O={subscr:E,signal:v.signal,requery:A,querier:i,trans:null}),Promise.resolve(x).then(function(T){s=!0,o=T,b||O.signal.aborted||(g={},function(I){for(var k in I)if(C(I,k))return;return 1}(w=E)||y||(Rt(on,_),y=!0),na(function(){return!b&&d.next&&d.next(T)}))},function(T){s=!1,["DatabaseClosedError","AbortError"].includes(T?.name)||b||na(function(){b||d.error&&d.error(T)})}))};return setTimeout(A,0),S});return c.hasValue=function(){return s},c.getValue=function(){return o},c}var ar=gt;function Ca(i){var o=Nt;try{Nt=!0,Rt.storagemutated.fire(i),Pa(i,!0)}finally{Nt=o}}R(ar,r(r({},In),{delete:function(i){return new ar(i,{addons:[]}).delete()},exists:function(i){return new ar(i,{addons:[]}).open().then(function(o){return o.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(i){try{return o=ar.dependencies,s=o.indexedDB,o=o.IDBKeyRange,(ya(s)?Promise.resolve(s.databases()).then(function(c){return c.map(function(d){return d.name}).filter(function(d){return d!==Kn})}):ba(s,o).toCollection().primaryKeys()).then(i)}catch{return Pe(new J.MissingAPI)}var o,s},defineClass:function(){return function(i){h(this,i)}},ignoreTransaction:function(i){return X.trans?tr(X.transless,i):i()},vip:ma,async:function(i){return function(){try{var o=Sa(i.apply(this,arguments));return o&&typeof o.then=="function"?o:$.resolve(o)}catch(s){return Pe(s)}}},spawn:function(i,o,s){try{var c=Sa(i.apply(s,o||[]));return c&&typeof c.then=="function"?c:$.resolve(c)}catch(d){return Pe(d)}},currentTransaction:{get:function(){return X.trans||null}},waitFor:function(i,o){return o=$.resolve(typeof i=="function"?ar.ignoreTransaction(i):i).timeout(o||6e4),X.trans?X.trans.waitFor(o):o},Promise:$,debug:{get:function(){return it},set:function(i){Io(i)}},derive:D,extend:h,props:R,override:ae,Events:tn,on:Rt,liveQuery:su,extendObservabilitySet:Zn,getByKeyPath:de,setByKeyPath:te,delByKeyPath:function(i,o){typeof o=="string"?te(i,o,void 0):"length"in o&&[].map.call(o,function(s){te(i,s,void 0)})},shallowClone:We,deepClone:Gt,getObjectDiff:Ea,cmp:le,asap:ce,minKey:-1/0,addons:[],connections:Er,errnames:Gi,dependencies:ri,cache:ir,semVer:"4.0.11",version:"4.0.11".split(".").map(function(i){return parseInt(i)}).reduce(function(i,o,s){return i+o/Math.pow(10,2*s)})})),ar.maxKey=un(ar.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Rt(on,function(i){Nt||(i=new CustomEvent(la,{detail:i}),Nt=!0,dispatchEvent(i),Nt=!1)}),addEventListener(la,function(i){i=i.detail,Nt||Ca(i)}));var xr,Nt=!1,lu=function(){};return typeof BroadcastChannel<"u"&&((lu=function(){(xr=new BroadcastChannel(la)).onmessage=function(i){return i.data&&Ca(i.data)}})(),typeof xr.unref=="function"&&xr.unref(),Rt(on,function(i){Nt||xr.postMessage(i)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(i){if(!gt.disableBfCache&&i.persisted){it&&console.debug("Dexie: handling persisted pagehide"),xr?.close();for(var o=0,s=Er;o<s.length;o++)s[o].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(i){!gt.disableBfCache&&i.persisted&&(it&&console.debug("Dexie: handling persisted pageshow"),lu(),Ca({all:new Te(-1/0,[[]])}))})),$.rejectionMapper=function(i,o){return!i||i instanceof _r||i instanceof TypeError||i instanceof SyntaxError||!i.name||!To[i.name]?i:(o=new To[i.name](o||i.message,i),"stack"in i&&G(o,"stack",{get:function(){return this.inner.stack}}),o)},Io(it),r(gt,Object.freeze({__proto__:null,Dexie:gt,liveQuery:su,Entity:Vo,cmp:le,PropModification:nn,replacePrefix:function(i,o){return new nn({replacePrefix:[i,o]})},add:function(i){return new nn({add:i})},remove:function(i){return new nn({remove:i})},default:gt,RangeSet:Te,mergeRanges:cn,rangesOverlap:Zo}),{default:gt}),gt})}(vi)),vi.exports}var Sh=Ph();const co=Pc(Sh),Uu=Symbol.for("Dexie"),Ci=globalThis[Uu]||(globalThis[Uu]=co);if(co.semVer!==Ci.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${co.semVer} and ${Ci.semVer}`);const{liveQuery:ab,mergeRanges:ob,rangesOverlap:ub,RangeSet:sb,cmp:lb,Entity:cb,PropModification:fb,replacePrefix:db,add:pb,remove:hb}=Ci;class Eh extends Ci{drawings;constructor(){super("DrawingVault"),this.version(1).stores({drawings:"id, name, createdAt, updatedAt"})}}class ur{static db=new Eh;static async saveDrawing(n){await this.db.drawings.put(n)}static async saveAllDrawings(n){await this.db.transaction("rw",this.db.drawings,async()=>{await this.db.drawings.clear(),await this.db.drawings.bulkAdd(n)})}static async loadAllDrawings(){return await this.db.drawings.orderBy("updatedAt").reverse().toArray()}static async deleteDrawing(n){await this.db.drawings.delete(n)}static async getDrawing(n){return await this.db.drawings.get(n)}static async getStorageInfo(){if("storage"in navigator&&"estimate"in navigator.storage){const n=await navigator.storage.estimate();return{used:n.usage||0,quota:n.quota||0}}return{used:0,quota:0}}static formatBytes(n){if(n===0)return"0 Bytes";const t=1024,r=["Bytes","KB","MB","GB"],a=Math.floor(Math.log(n)/Math.log(t));return Number.parseFloat((n/Math.pow(t,a)).toFixed(2))+" "+r[a]}}const qu=M.model("SavedDrawing",{id:M.identifier,name:M.string,strokes:M.array(sr),thumbnail:M.string,createdAt:M.Date,updatedAt:M.Date,background:M.string}),Ah=M.model("StorageInfo",{used:M.optional(M.number,0),quota:M.optional(M.number,0)}),jh=M.model("VaultModel",{drawings:M.optional(M.array(qu),[]),isLoading:M.optional(M.boolean,!1),storageInfo:M.optional(Ah,{})}).volatile(()=>({})).views(e=>({get sortedDrawings(){return[...e.drawings].sort((n,t)=>t.updatedAt.getTime()-n.updatedAt.getTime())},get isEmpty(){return e.drawings.length===0},get storageUsagePercent(){return e.storageInfo.quota===0?0:e.storageInfo.used/e.storageInfo.quota*100}})).actions(e=>({setLoading(n){e.isLoading=n},setStorageInfo(n,t){e.storageInfo.used=n,e.storageInfo.quota=t},clearDrawings(){e.drawings.clear()},addDrawingToList(n){e.drawings.push(qu.create(n))},removeDrawingFromList(n){const t=e.drawings.findIndex(r=>r.id===n);t!==-1&&e.drawings.splice(t,1)},updateDrawingInList(n,t){const r=e.drawings.find(a=>a.id===n);r&&(r.name=t,r.updatedAt=new Date)},replaceDrawingStrokes(n,t,r,a){const u=e.drawings.find(l=>l.id===n);u&&(u.strokes.clear(),t.forEach(l=>{u.strokes.push(sr.create(l))}),u.thumbnail=r,u.background=a,u.updatedAt=new Date)},loadDrawing(n){return e.drawings.find(t=>t.id===n)||null},getDrawingById(n){return e.drawings.find(t=>t.id===n)||null}})).actions(e=>({async updateStorageInfo(){try{const n=await ur.getStorageInfo();e.setStorageInfo(n.used,n.quota)}catch(n){console.error("Failed to get storage info:",n)}},async loadFromDB(){try{e.setLoading(!0);const n=await ur.loadAllDrawings();e.clearDrawings(),n.forEach(t=>{e.addDrawingToList(t)})}catch(n){console.error("Failed to load from Dexie:",n)}finally{e.setLoading(!1)}},async persistToDB(){try{const n=e.drawings.map(t=>({id:t.id,name:t.name,strokes:t.strokes.map(r=>({id:r.id,points:r.points.map(a=>({x:a.x,y:a.y,pressure:a.pressure})),color:r.color,size:r.size,brushStyle:r.brushStyle,timestamp:r.timestamp})),thumbnail:t.thumbnail,createdAt:new Date(t.createdAt),updatedAt:new Date(t.updatedAt),background:t.background}));await ur.saveAllDrawings(n)}catch(n){console.error("Failed to persist to Dexie:",n)}}})).actions(e=>({async addDrawing(n,t,r,a){const u={id:crypto.randomUUID(),name:n,strokes:t,thumbnail:r,createdAt:new Date,updatedAt:new Date,background:a};return e.addDrawingToList(u),await e.persistToDB(),await e.updateStorageInfo(),e.drawings.find(l=>l.id===u.id)},async deleteDrawing(n){e.removeDrawingFromList(n);try{await ur.deleteDrawing(n),await e.updateStorageInfo()}catch(t){console.error("Failed to delete drawing:",t)}},async renameDrawing(n,t){e.updateDrawingInList(n,t);const r=e.drawings.find(a=>a.id===n);if(r)try{await ur.saveDrawing({id:r.id,name:r.name,strokes:r.strokes.map(a=>({id:a.id,points:a.points.map(u=>({x:u.x,y:u.y,pressure:u.pressure})),color:a.color,size:a.size,brushStyle:a.brushStyle,timestamp:a.timestamp})),thumbnail:r.thumbnail,createdAt:new Date(r.createdAt),updatedAt:new Date(r.updatedAt),background:r.background}),await e.updateStorageInfo()}catch(a){console.error("Failed to rename drawing:",a)}},async updateDrawing(n,t,r,a){e.replaceDrawingStrokes(n,t,r,a);const u=e.drawings.find(l=>l.id===n);if(u)try{await ur.saveDrawing({id:u.id,name:u.name,strokes:u.strokes.map(l=>({id:l.id,points:l.points.map(f=>({x:f.x,y:f.y,pressure:f.pressure})),color:l.color,size:l.size,brushStyle:l.brushStyle,timestamp:l.timestamp})),thumbnail:u.thumbnail,createdAt:new Date(u.createdAt),updatedAt:new Date(u.updatedAt),background:u.background}),await e.updateStorageInfo()}catch(l){console.error("Failed to update drawing:",l)}},loadDrawing(n){return e.drawings.find(t=>t.id===n)||null},async getDrawingById(n){const t=e.drawings.find(r=>r.id===n);if(t)return t;try{const r=await ur.getDrawing(n);return r?(e.addDrawingToList(r),e.drawings.find(a=>a.id===n)||null):null}catch(r){return console.error("Failed to load drawing from database:",r),null}},loadDrawings(){return e.loadFromDB()}})).actions(e=>({afterCreate(){setTimeout(()=>{e.loadFromDB(),e.updateStorageInfo()},0)}})),xh=M.model("ExportSettings",{format:M.optional(M.enumeration("ExportFormat",["png","jpg","svg"]),"png"),quality:M.optional(M.number,.9),transparentBackground:M.optional(M.boolean,!1),scale:M.optional(M.number,1)}),Ch=M.model("SettingsModel",{defaultPenSize:M.optional(M.number,4),defaultBrushStyle:M.optional(M.enumeration("BrushStyle",["ink"]),"ink"),defaultColor:M.optional(M.string,"#000000"),defaultBackground:M.optional(M.enumeration("BackgroundType",["white","transparent","grid"]),"white"),exportSettings:M.optional(xh,{}),autoHideDock:M.optional(M.boolean,!0),dockHideDelay:M.optional(M.number,3e3),showGrid:M.optional(M.boolean,!0),snapToGrid:M.optional(M.boolean,!1)}).views(e=>({get defaultSettings(){return{penSize:e.defaultPenSize,brushStyle:e.defaultBrushStyle,color:e.defaultColor,background:e.defaultBackground}}})).actions(e=>{const n=()=>{try{const r={defaultPenSize:e.defaultPenSize,defaultBrushStyle:e.defaultBrushStyle,defaultColor:e.defaultColor,defaultBackground:e.defaultBackground,exportSettings:{format:e.exportSettings.format,quality:e.exportSettings.quality,transparentBackground:e.exportSettings.transparentBackground,scale:e.exportSettings.scale},autoHideDock:e.autoHideDock,dockHideDelay:e.dockHideDelay,showGrid:e.showGrid,snapToGrid:e.snapToGrid};localStorage.setItem("drawing-app-settings",JSON.stringify(r))}catch(r){console.error("Failed to save settings:",r)}},t=()=>{try{const r=localStorage.getItem("drawing-app-settings");if(r){const a=JSON.parse(r);e.defaultPenSize=a.defaultPenSize??e.defaultPenSize,e.defaultBrushStyle=a.defaultBrushStyle??e.defaultBrushStyle,e.defaultColor=a.defaultColor??e.defaultColor,e.defaultBackground=a.defaultBackground??e.defaultBackground,a.exportSettings&&(e.exportSettings.format=a.exportSettings.format??e.exportSettings.format,e.exportSettings.quality=a.exportSettings.quality??e.exportSettings.quality,e.exportSettings.transparentBackground=a.exportSettings.transparentBackground??e.exportSettings.transparentBackground,e.exportSettings.scale=a.exportSettings.scale??e.exportSettings.scale),e.autoHideDock=a.autoHideDock??e.autoHideDock,e.dockHideDelay=a.dockHideDelay??e.dockHideDelay,e.showGrid=a.showGrid??e.showGrid,e.snapToGrid=a.snapToGrid??e.snapToGrid}}catch(r){console.error("Failed to load settings:",r)}};return{afterCreate(){t()},setDefaults(r){r.penSize!==void 0&&(e.defaultPenSize=r.penSize),r.brushStyle!==void 0&&(e.defaultBrushStyle=r.brushStyle),r.color!==void 0&&(e.defaultColor=r.color),r.background!==void 0&&(e.defaultBackground=r.background),n()},setExportSettings(r){r.format!==void 0&&(e.exportSettings.format=r.format),r.quality!==void 0&&(e.exportSettings.quality=r.quality),r.transparentBackground!==void 0&&(e.exportSettings.transparentBackground=r.transparentBackground),r.scale!==void 0&&(e.exportSettings.scale=r.scale),n()},setUIPreferences(r){r.autoHideDock!==void 0&&(e.autoHideDock=r.autoHideDock),r.dockHideDelay!==void 0&&(e.dockHideDelay=r.dockHideDelay),r.showGrid!==void 0&&(e.showGrid=r.showGrid),r.snapToGrid!==void 0&&(e.snapToGrid=r.snapToGrid),n()}}}),Th=M.model("RootStore",{canvasModel:M.optional(wh,{}),vaultModel:M.optional(jh,{}),settingsModel:M.optional(Ch,{})}).actions(e=>({afterCreate(){e.vaultModel.loadDrawings()}})),jo=Th.create({}),vb=()=>jo.canvasModel,bb=()=>jo.vaultModel,yb=()=>jo.settingsModel;function Fa(e,n,{checkForDefaultPrevented:t=!0}={}){return function(a){if(e?.(a),t===!1||!a.defaultPrevented)return n?.(a)}}function mb(e,n){const t=N.createContext(n),r=u=>{const{children:l,...f}=u,h=N.useMemo(()=>f,Object.values(f));return lt.jsx(t.Provider,{value:h,children:l})};r.displayName=e+"Provider";function a(u){const l=N.useContext(t);if(l)return l;if(n!==void 0)return n;throw new Error(`\`${u}\` must be used within \`${e}\``)}return[r,a]}function Ih(e,n=[]){let t=[];function r(u,l){const f=N.createContext(l),h=t.length;t=[...t,l];const m=C=>{const{scope:R,children:z,...G}=C,D=R?.[e]?.[h]||f,H=N.useMemo(()=>G,Object.values(G));return lt.jsx(D.Provider,{value:H,children:z})};m.displayName=u+"Provider";function j(C,R){const z=R?.[e]?.[h]||f,G=N.useContext(z);if(G)return G;if(l!==void 0)return l;throw new Error(`\`${C}\` must be used within \`${u}\``)}return[m,j]}const a=()=>{const u=t.map(l=>N.createContext(l));return function(f){const h=f?.[e]||u;return N.useMemo(()=>({[`__scope${e}`]:{...f,[e]:h}}),[f,h])}};return a.scopeName=e,[r,kh(a,...n)]}function kh(...e){const n=e[0];if(e.length===1)return n;const t=()=>{const r=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(u){const l=r.reduce((f,{useScope:h,scopeName:m})=>{const C=h(u)[`__scope${m}`];return{...f,...C}},{});return N.useMemo(()=>({[`__scope${n.scopeName}`]:l}),[l])}};return t.scopeName=n.scopeName,t}var qr=globalThis?.document?N.useLayoutEffect:()=>{},Dh=ns[" useInsertionEffect ".trim().toString()]||qr;function gb({prop:e,defaultProp:n,onChange:t=()=>{},caller:r}){const[a,u,l]=Rh({defaultProp:n,onChange:t}),f=e!==void 0,h=f?e:a;{const j=N.useRef(e!==void 0);N.useEffect(()=>{const C=j.current;C!==f&&console.warn(`${r} is changing from ${C?"controlled":"uncontrolled"} to ${f?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),j.current=f},[f,r])}const m=N.useCallback(j=>{if(f){const C=Nh(j)?j(e):j;C!==e&&l.current?.(C)}else u(j)},[f,e,u,l]);return[h,m]}function Rh({defaultProp:e,onChange:n}){const[t,r]=N.useState(e),a=N.useRef(t),u=N.useRef(n);return Dh(()=>{u.current=n},[n]),N.useEffect(()=>{a.current!==t&&(u.current?.(t),a.current=t)},[t,a]),[t,r,u]}function Nh(e){return typeof e=="function"}var Mh=N.createContext(void 0);function _b(e){const n=N.useContext(Mh);return e||n||"ltr"}function wb(e){const[n,t]=N.useState(void 0);return qr(()=>{if(e){t({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const u=a[0];let l,f;if("borderBoxSize"in u){const h=u.borderBoxSize,m=Array.isArray(h)?h[0]:h;l=m.inlineSize,f=m.blockSize}else l=e.offsetWidth,f=e.offsetHeight;t({width:l,height:f})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else t(void 0)},[e]),n}var Bh=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ui=Bh.reduce((e,n)=>{const t=Xa(`Primitive.${n}`),r=N.forwardRef((a,u)=>{const{asChild:l,...f}=a,h=l?t:n;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),lt.jsx(h,{...f,ref:u})});return r.displayName=`Primitive.${n}`,{...e,[n]:r}},{});function Lh(e,n){e&&is.flushSync(()=>e.dispatchEvent(n))}function Ob(e){const n=e+"CollectionProvider",[t,r]=Ih(n),[a,u]=t(n,{collectionRef:{current:null},itemMap:new Map}),l=D=>{const{scope:H,children:ee}=D,re=_t.useRef(null),ae=_t.useRef(new Map).current;return lt.jsx(a,{scope:H,itemMap:ae,collectionRef:re,children:ee})};l.displayName=n;const f=e+"CollectionSlot",h=Xa(f),m=_t.forwardRef((D,H)=>{const{scope:ee,children:re}=D,ae=u(f,ee),Z=Br(H,ae.collectionRef);return lt.jsx(h,{ref:Z,children:re})});m.displayName=f;const j=e+"CollectionItemSlot",C="data-radix-collection-item",R=Xa(j),z=_t.forwardRef((D,H)=>{const{scope:ee,children:re,...ae}=D,Z=_t.useRef(null),ce=Br(H,Z),de=u(j,ee);return _t.useEffect(()=>(de.itemMap.set(Z,{ref:Z,...ae}),()=>void de.itemMap.delete(Z))),lt.jsx(R,{[C]:"",ref:ce,children:re})});z.displayName=j;function G(D){const H=u(e+"CollectionConsumer",D);return _t.useCallback(()=>{const re=H.collectionRef.current;if(!re)return[];const ae=Array.from(re.querySelectorAll(`[${C}]`));return Array.from(H.itemMap.values()).sort((de,te)=>ae.indexOf(de.ref.current)-ae.indexOf(te.ref.current))},[H.collectionRef,H.itemMap])}return[{Provider:l,Slot:m,ItemSlot:z},G,r]}/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vh=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Pb=Pn("check",Vh);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kh=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Sb=Pn("chevron-right",Kh);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fh=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Eb=Pn("grid-3x3",Fh);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zh=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],Ab=Pn("palette",zh);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uh=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],jb=Pn("trash-2",Uh);var qh=ns[" useId ".trim().toString()]||(()=>{}),$h=0;function xb(e){const[n,t]=N.useState(qh());return qr(()=>{t(r=>r??String($h++))},[e]),e||(n?`radix-${n}`:"")}function On(e){const n=N.useRef(e);return N.useEffect(()=>{n.current=e}),N.useMemo(()=>(...t)=>n.current?.(...t),[])}function Hh(e,n=globalThis?.document){const t=On(e);N.useEffect(()=>{const r=a=>{a.key==="Escape"&&t(a)};return n.addEventListener("keydown",r,{capture:!0}),()=>n.removeEventListener("keydown",r,{capture:!0})},[t,n])}var Wh="DismissableLayer",fo="dismissableLayer.update",Gh="dismissableLayer.pointerDownOutside",Yh="dismissableLayer.focusOutside",$u,Tl=N.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Xh=N.forwardRef((e,n)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:a,onFocusOutside:u,onInteractOutside:l,onDismiss:f,...h}=e,m=N.useContext(Tl),[j,C]=N.useState(null),R=j?.ownerDocument??globalThis?.document,[,z]=N.useState({}),G=Br(n,te=>C(te)),D=Array.from(m.layers),[H]=[...m.layersWithOutsidePointerEventsDisabled].slice(-1),ee=D.indexOf(H),re=j?D.indexOf(j):-1,ae=m.layersWithOutsidePointerEventsDisabled.size>0,Z=re>=ee,ce=Qh(te=>{const We=te.target,Wt=[...m.branches].some(mr=>mr.contains(We));!Z||Wt||(a?.(te),l?.(te),te.defaultPrevented||f?.())},R),de=ev(te=>{const We=te.target;[...m.branches].some(mr=>mr.contains(We))||(u?.(te),l?.(te),te.defaultPrevented||f?.())},R);return Hh(te=>{re===m.layers.size-1&&(r?.(te),!te.defaultPrevented&&f&&(te.preventDefault(),f()))},R),N.useEffect(()=>{if(j)return t&&(m.layersWithOutsidePointerEventsDisabled.size===0&&($u=R.body.style.pointerEvents,R.body.style.pointerEvents="none"),m.layersWithOutsidePointerEventsDisabled.add(j)),m.layers.add(j),Hu(),()=>{t&&m.layersWithOutsidePointerEventsDisabled.size===1&&(R.body.style.pointerEvents=$u)}},[j,R,t,m]),N.useEffect(()=>()=>{j&&(m.layers.delete(j),m.layersWithOutsidePointerEventsDisabled.delete(j),Hu())},[j,m]),N.useEffect(()=>{const te=()=>z({});return document.addEventListener(fo,te),()=>document.removeEventListener(fo,te)},[]),lt.jsx(Ui.div,{...h,ref:G,style:{pointerEvents:ae?Z?"auto":"none":void 0,...e.style},onFocusCapture:Fa(e.onFocusCapture,de.onFocusCapture),onBlurCapture:Fa(e.onBlurCapture,de.onBlurCapture),onPointerDownCapture:Fa(e.onPointerDownCapture,ce.onPointerDownCapture)})});Xh.displayName=Wh;var Jh="DismissableLayerBranch",Zh=N.forwardRef((e,n)=>{const t=N.useContext(Tl),r=N.useRef(null),a=Br(n,r);return N.useEffect(()=>{const u=r.current;if(u)return t.branches.add(u),()=>{t.branches.delete(u)}},[t.branches]),lt.jsx(Ui.div,{...e,ref:a})});Zh.displayName=Jh;function Qh(e,n=globalThis?.document){const t=On(e),r=N.useRef(!1),a=N.useRef(()=>{});return N.useEffect(()=>{const u=f=>{if(f.target&&!r.current){let h=function(){Il(Gh,t,m,{discrete:!0})};const m={originalEvent:f};f.pointerType==="touch"?(n.removeEventListener("click",a.current),a.current=h,n.addEventListener("click",a.current,{once:!0})):h()}else n.removeEventListener("click",a.current);r.current=!1},l=window.setTimeout(()=>{n.addEventListener("pointerdown",u)},0);return()=>{window.clearTimeout(l),n.removeEventListener("pointerdown",u),n.removeEventListener("click",a.current)}},[n,t]),{onPointerDownCapture:()=>r.current=!0}}function ev(e,n=globalThis?.document){const t=On(e),r=N.useRef(!1);return N.useEffect(()=>{const a=u=>{u.target&&!r.current&&Il(Yh,t,{originalEvent:u},{discrete:!1})};return n.addEventListener("focusin",a),()=>n.removeEventListener("focusin",a)},[n,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function Hu(){const e=new CustomEvent(fo);document.dispatchEvent(e)}function Il(e,n,t,{discrete:r}){const a=t.originalEvent.target,u=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:t});n&&a.addEventListener(e,n,{once:!0}),r?Lh(a,u):a.dispatchEvent(u)}var za="focusScope.autoFocusOnMount",Ua="focusScope.autoFocusOnUnmount",Wu={bubbles:!1,cancelable:!0},tv="FocusScope",rv=N.forwardRef((e,n)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:a,onUnmountAutoFocus:u,...l}=e,[f,h]=N.useState(null),m=On(a),j=On(u),C=N.useRef(null),R=Br(n,D=>h(D)),z=N.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;N.useEffect(()=>{if(r){let D=function(ae){if(z.paused||!f)return;const Z=ae.target;f.contains(Z)?C.current=Z:Mt(C.current,{select:!0})},H=function(ae){if(z.paused||!f)return;const Z=ae.relatedTarget;Z!==null&&(f.contains(Z)||Mt(C.current,{select:!0}))},ee=function(ae){if(document.activeElement===document.body)for(const ce of ae)ce.removedNodes.length>0&&Mt(f)};document.addEventListener("focusin",D),document.addEventListener("focusout",H);const re=new MutationObserver(ee);return f&&re.observe(f,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",D),document.removeEventListener("focusout",H),re.disconnect()}}},[r,f,z.paused]),N.useEffect(()=>{if(f){Yu.add(z);const D=document.activeElement;if(!f.contains(D)){const ee=new CustomEvent(za,Wu);f.addEventListener(za,m),f.dispatchEvent(ee),ee.defaultPrevented||(nv(sv(kl(f)),{select:!0}),document.activeElement===D&&Mt(f))}return()=>{f.removeEventListener(za,m),setTimeout(()=>{const ee=new CustomEvent(Ua,Wu);f.addEventListener(Ua,j),f.dispatchEvent(ee),ee.defaultPrevented||Mt(D??document.body,{select:!0}),f.removeEventListener(Ua,j),Yu.remove(z)},0)}}},[f,m,j,z]);const G=N.useCallback(D=>{if(!t&&!r||z.paused)return;const H=D.key==="Tab"&&!D.altKey&&!D.ctrlKey&&!D.metaKey,ee=document.activeElement;if(H&&ee){const re=D.currentTarget,[ae,Z]=iv(re);ae&&Z?!D.shiftKey&&ee===Z?(D.preventDefault(),t&&Mt(ae,{select:!0})):D.shiftKey&&ee===ae&&(D.preventDefault(),t&&Mt(Z,{select:!0})):ee===re&&D.preventDefault()}},[t,r,z.paused]);return lt.jsx(Ui.div,{tabIndex:-1,...l,ref:R,onKeyDown:G})});rv.displayName=tv;function nv(e,{select:n=!1}={}){const t=document.activeElement;for(const r of e)if(Mt(r,{select:n}),document.activeElement!==t)return}function iv(e){const n=kl(e),t=Gu(n,e),r=Gu(n.reverse(),e);return[t,r]}function kl(e){const n=[],t=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)n.push(t.currentNode);return n}function Gu(e,n){for(const t of e)if(!av(t,{upTo:n}))return t}function av(e,{upTo:n}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(n!==void 0&&e===n)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function ov(e){return e instanceof HTMLInputElement&&"select"in e}function Mt(e,{select:n=!1}={}){if(e&&e.focus){const t=document.activeElement;e.focus({preventScroll:!0}),e!==t&&ov(e)&&n&&e.select()}}var Yu=uv();function uv(){let e=[];return{add(n){const t=e[0];n!==t&&t?.pause(),e=Xu(e,n),e.unshift(n)},remove(n){e=Xu(e,n),e[0]?.resume()}}}function Xu(e,n){const t=[...e],r=t.indexOf(n);return r!==-1&&t.splice(r,1),t}function sv(e){return e.filter(n=>n.tagName!=="A")}var lv="Portal",cv=N.forwardRef((e,n)=>{const{container:t,...r}=e,[a,u]=N.useState(!1);qr(()=>u(!0),[]);const l=t||a&&globalThis?.document?.body;return l?Sc.createPortal(lt.jsx(Ui.div,{...r,ref:n}),l):null});cv.displayName=lv;function fv(e,n){return N.useReducer((t,r)=>n[t][r]??t,e)}var dv=e=>{const{present:n,children:t}=e,r=pv(n),a=typeof t=="function"?t({present:r.isPresent}):N.Children.only(t),u=Br(r.ref,hv(a));return typeof t=="function"||r.isPresent?N.cloneElement(a,{ref:u}):null};dv.displayName="Presence";function pv(e){const[n,t]=N.useState(),r=N.useRef(null),a=N.useRef(e),u=N.useRef("none"),l=e?"mounted":"unmounted",[f,h]=fv(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return N.useEffect(()=>{const m=ui(r.current);u.current=f==="mounted"?m:"none"},[f]),qr(()=>{const m=r.current,j=a.current;if(j!==e){const R=u.current,z=ui(m);e?h("MOUNT"):z==="none"||m?.display==="none"?h("UNMOUNT"):h(j&&R!==z?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,h]),qr(()=>{if(n){let m;const j=n.ownerDocument.defaultView??window,C=z=>{const D=ui(r.current).includes(z.animationName);if(z.target===n&&D&&(h("ANIMATION_END"),!a.current)){const H=n.style.animationFillMode;n.style.animationFillMode="forwards",m=j.setTimeout(()=>{n.style.animationFillMode==="forwards"&&(n.style.animationFillMode=H)})}},R=z=>{z.target===n&&(u.current=ui(r.current))};return n.addEventListener("animationstart",R),n.addEventListener("animationcancel",C),n.addEventListener("animationend",C),()=>{j.clearTimeout(m),n.removeEventListener("animationstart",R),n.removeEventListener("animationcancel",C),n.removeEventListener("animationend",C)}}else h("ANIMATION_END")},[n,h]),{isPresent:["mounted","unmountSuspended"].includes(f),ref:N.useCallback(m=>{r.current=m?getComputedStyle(m):null,t(m)},[])}}function ui(e){return e?.animationName||"none"}function hv(e){let n=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,t=n&&"isReactWarning"in n&&n.isReactWarning;return t?e.ref:(n=Object.getOwnPropertyDescriptor(e,"ref")?.get,t=n&&"isReactWarning"in n&&n.isReactWarning,t?e.props.ref:e.props.ref||e.ref)}var qa=0;function Cb(){N.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Ju()),document.body.insertAdjacentElement("beforeend",e[1]??Ju()),qa++,()=>{qa===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(n=>n.remove()),qa--}},[])}function Ju(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var ut=function(){return ut=Object.assign||function(n){for(var t,r=1,a=arguments.length;r<a;r++){t=arguments[r];for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&(n[u]=t[u])}return n},ut.apply(this,arguments)};function Dl(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)n.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(t[r[a]]=e[r[a]]);return t}function vv(e,n,t){if(t||arguments.length===2)for(var r=0,a=n.length,u;r<a;r++)(u||!(r in n))&&(u||(u=Array.prototype.slice.call(n,0,r)),u[r]=n[r]);return e.concat(u||Array.prototype.slice.call(n))}var bi="right-scroll-bar-position",yi="width-before-scroll-bar",bv="with-scroll-bars-hidden",yv="--removed-body-scroll-bar-size";function $a(e,n){return typeof e=="function"?e(n):e&&(e.current=n),e}function mv(e,n){var t=N.useState(function(){return{value:e,callback:n,facade:{get current(){return t.value},set current(r){var a=t.value;a!==r&&(t.value=r,t.callback(r,a))}}}})[0];return t.callback=n,t.facade}var gv=typeof window<"u"?N.useLayoutEffect:N.useEffect,Zu=new WeakMap;function _v(e,n){var t=mv(null,function(r){return e.forEach(function(a){return $a(a,r)})});return gv(function(){var r=Zu.get(t);if(r){var a=new Set(r),u=new Set(e),l=t.current;a.forEach(function(f){u.has(f)||$a(f,null)}),u.forEach(function(f){a.has(f)||$a(f,l)})}Zu.set(t,e)},[e]),t}function wv(e){return e}function Ov(e,n){n===void 0&&(n=wv);var t=[],r=!1,a={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:e},useMedium:function(u){var l=n(u,r);return t.push(l),function(){t=t.filter(function(f){return f!==l})}},assignSyncMedium:function(u){for(r=!0;t.length;){var l=t;t=[],l.forEach(u)}t={push:function(f){return u(f)},filter:function(){return t}}},assignMedium:function(u){r=!0;var l=[];if(t.length){var f=t;t=[],f.forEach(u),l=t}var h=function(){var j=l;l=[],j.forEach(u)},m=function(){return Promise.resolve().then(h)};m(),t={push:function(j){l.push(j),m()},filter:function(j){return l=l.filter(j),t}}}};return a}function Pv(e){e===void 0&&(e={});var n=Ov(null);return n.options=ut({async:!0,ssr:!1},e),n}var Rl=function(e){var n=e.sideCar,t=Dl(e,["sideCar"]);if(!n)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=n.read();if(!r)throw new Error("Sidecar medium not found");return N.createElement(r,ut({},t))};Rl.isSideCarExport=!0;function Sv(e,n){return e.useMedium(n),Rl}var Nl=Pv(),Ha=function(){},qi=N.forwardRef(function(e,n){var t=N.useRef(null),r=N.useState({onScrollCapture:Ha,onWheelCapture:Ha,onTouchMoveCapture:Ha}),a=r[0],u=r[1],l=e.forwardProps,f=e.children,h=e.className,m=e.removeScrollBar,j=e.enabled,C=e.shards,R=e.sideCar,z=e.noRelative,G=e.noIsolation,D=e.inert,H=e.allowPinchZoom,ee=e.as,re=ee===void 0?"div":ee,ae=e.gapMode,Z=Dl(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),ce=R,de=_v([t,n]),te=ut(ut({},Z),a);return N.createElement(N.Fragment,null,j&&N.createElement(ce,{sideCar:Nl,removeScrollBar:m,shards:C,noRelative:z,noIsolation:G,inert:D,setCallbacks:u,allowPinchZoom:!!H,lockRef:t,gapMode:ae}),l?N.cloneElement(N.Children.only(f),ut(ut({},te),{ref:de})):N.createElement(re,ut({},te,{className:h,ref:de}),f))});qi.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};qi.classNames={fullWidth:yi,zeroRight:bi};var Ev=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Av(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var n=Ev();return n&&e.setAttribute("nonce",n),e}function jv(e,n){e.styleSheet?e.styleSheet.cssText=n:e.appendChild(document.createTextNode(n))}function xv(e){var n=document.head||document.getElementsByTagName("head")[0];n.appendChild(e)}var Cv=function(){var e=0,n=null;return{add:function(t){e==0&&(n=Av())&&(jv(n,t),xv(n)),e++},remove:function(){e--,!e&&n&&(n.parentNode&&n.parentNode.removeChild(n),n=null)}}},Tv=function(){var e=Cv();return function(n,t){N.useEffect(function(){return e.add(n),function(){e.remove()}},[n&&t])}},Ml=function(){var e=Tv(),n=function(t){var r=t.styles,a=t.dynamic;return e(r,a),null};return n},Iv={left:0,top:0,right:0,gap:0},Wa=function(e){return parseInt(e||"",10)||0},kv=function(e){var n=window.getComputedStyle(document.body),t=n[e==="padding"?"paddingLeft":"marginLeft"],r=n[e==="padding"?"paddingTop":"marginTop"],a=n[e==="padding"?"paddingRight":"marginRight"];return[Wa(t),Wa(r),Wa(a)]},Dv=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Iv;var n=kv(e),t=document.documentElement.clientWidth,r=window.innerWidth;return{left:n[0],top:n[1],right:n[2],gap:Math.max(0,r-t+n[2]-n[0])}},Rv=Ml(),Mr="data-scroll-locked",Nv=function(e,n,t,r){var a=e.left,u=e.top,l=e.right,f=e.gap;return t===void 0&&(t="margin"),`
  .`.concat(bv,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(f,"px ").concat(r,`;
  }
  body[`).concat(Mr,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([n&&"position: relative ".concat(r,";"),t==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(u,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(f,"px ").concat(r,`;
    `),t==="padding"&&"padding-right: ".concat(f,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(bi,` {
    right: `).concat(f,"px ").concat(r,`;
  }
  
  .`).concat(yi,` {
    margin-right: `).concat(f,"px ").concat(r,`;
  }
  
  .`).concat(bi," .").concat(bi,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(yi," .").concat(yi,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Mr,`] {
    `).concat(yv,": ").concat(f,`px;
  }
`)},Qu=function(){var e=parseInt(document.body.getAttribute(Mr)||"0",10);return isFinite(e)?e:0},Mv=function(){N.useEffect(function(){return document.body.setAttribute(Mr,(Qu()+1).toString()),function(){var e=Qu()-1;e<=0?document.body.removeAttribute(Mr):document.body.setAttribute(Mr,e.toString())}},[])},Bv=function(e){var n=e.noRelative,t=e.noImportant,r=e.gapMode,a=r===void 0?"margin":r;Mv();var u=N.useMemo(function(){return Dv(a)},[a]);return N.createElement(Rv,{styles:Nv(u,!n,a,t?"":"!important")})},po=!1;if(typeof window<"u")try{var si=Object.defineProperty({},"passive",{get:function(){return po=!0,!0}});window.addEventListener("test",si,si),window.removeEventListener("test",si,si)}catch{po=!1}var Tr=po?{passive:!1}:!1,Lv=function(e){return e.tagName==="TEXTAREA"},Bl=function(e,n){if(!(e instanceof Element))return!1;var t=window.getComputedStyle(e);return t[n]!=="hidden"&&!(t.overflowY===t.overflowX&&!Lv(e)&&t[n]==="visible")},Vv=function(e){return Bl(e,"overflowY")},Kv=function(e){return Bl(e,"overflowX")},es=function(e,n){var t=n.ownerDocument,r=n;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var a=Ll(e,r);if(a){var u=Vl(e,r),l=u[1],f=u[2];if(l>f)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},Fv=function(e){var n=e.scrollTop,t=e.scrollHeight,r=e.clientHeight;return[n,t,r]},zv=function(e){var n=e.scrollLeft,t=e.scrollWidth,r=e.clientWidth;return[n,t,r]},Ll=function(e,n){return e==="v"?Vv(n):Kv(n)},Vl=function(e,n){return e==="v"?Fv(n):zv(n)},Uv=function(e,n){return e==="h"&&n==="rtl"?-1:1},qv=function(e,n,t,r,a){var u=Uv(e,window.getComputedStyle(n).direction),l=u*r,f=t.target,h=n.contains(f),m=!1,j=l>0,C=0,R=0;do{if(!f)break;var z=Vl(e,f),G=z[0],D=z[1],H=z[2],ee=D-H-u*G;(G||ee)&&Ll(e,f)&&(C+=ee,R+=G);var re=f.parentNode;f=re&&re.nodeType===Node.DOCUMENT_FRAGMENT_NODE?re.host:re}while(!h&&f!==document.body||h&&(n.contains(f)||n===f));return(j&&Math.abs(C)<1||!j&&Math.abs(R)<1)&&(m=!0),m},li=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},ts=function(e){return[e.deltaX,e.deltaY]},rs=function(e){return e&&"current"in e?e.current:e},$v=function(e,n){return e[0]===n[0]&&e[1]===n[1]},Hv=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Wv=0,Ir=[];function Gv(e){var n=N.useRef([]),t=N.useRef([0,0]),r=N.useRef(),a=N.useState(Wv++)[0],u=N.useState(Ml)[0],l=N.useRef(e);N.useEffect(function(){l.current=e},[e]),N.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var D=vv([e.lockRef.current],(e.shards||[]).map(rs),!0).filter(Boolean);return D.forEach(function(H){return H.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),D.forEach(function(H){return H.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var f=N.useCallback(function(D,H){if("touches"in D&&D.touches.length===2||D.type==="wheel"&&D.ctrlKey)return!l.current.allowPinchZoom;var ee=li(D),re=t.current,ae="deltaX"in D?D.deltaX:re[0]-ee[0],Z="deltaY"in D?D.deltaY:re[1]-ee[1],ce,de=D.target,te=Math.abs(ae)>Math.abs(Z)?"h":"v";if("touches"in D&&te==="h"&&de.type==="range")return!1;var We=es(te,de);if(!We)return!0;if(We?ce=te:(ce=te==="v"?"h":"v",We=es(te,de)),!We)return!1;if(!r.current&&"changedTouches"in D&&(ae||Z)&&(r.current=ce),!ce)return!0;var Wt=r.current||ce;return qv(Wt,H,D,Wt==="h"?ae:Z)},[]),h=N.useCallback(function(D){var H=D;if(!(!Ir.length||Ir[Ir.length-1]!==u)){var ee="deltaY"in H?ts(H):li(H),re=n.current.filter(function(ce){return ce.name===H.type&&(ce.target===H.target||H.target===ce.shadowParent)&&$v(ce.delta,ee)})[0];if(re&&re.should){H.cancelable&&H.preventDefault();return}if(!re){var ae=(l.current.shards||[]).map(rs).filter(Boolean).filter(function(ce){return ce.contains(H.target)}),Z=ae.length>0?f(H,ae[0]):!l.current.noIsolation;Z&&H.cancelable&&H.preventDefault()}}},[]),m=N.useCallback(function(D,H,ee,re){var ae={name:D,delta:H,target:ee,should:re,shadowParent:Yv(ee)};n.current.push(ae),setTimeout(function(){n.current=n.current.filter(function(Z){return Z!==ae})},1)},[]),j=N.useCallback(function(D){t.current=li(D),r.current=void 0},[]),C=N.useCallback(function(D){m(D.type,ts(D),D.target,f(D,e.lockRef.current))},[]),R=N.useCallback(function(D){m(D.type,li(D),D.target,f(D,e.lockRef.current))},[]);N.useEffect(function(){return Ir.push(u),e.setCallbacks({onScrollCapture:C,onWheelCapture:C,onTouchMoveCapture:R}),document.addEventListener("wheel",h,Tr),document.addEventListener("touchmove",h,Tr),document.addEventListener("touchstart",j,Tr),function(){Ir=Ir.filter(function(D){return D!==u}),document.removeEventListener("wheel",h,Tr),document.removeEventListener("touchmove",h,Tr),document.removeEventListener("touchstart",j,Tr)}},[]);var z=e.removeScrollBar,G=e.inert;return N.createElement(N.Fragment,null,G?N.createElement(u,{styles:Hv(a)}):null,z?N.createElement(Bv,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function Yv(e){for(var n=null;e!==null;)e instanceof ShadowRoot&&(n=e.host,e=e.host),e=e.parentNode;return n}const Xv=Sv(Nl,Gv);var Jv=N.forwardRef(function(e,n){return N.createElement(qi,ut({},e,{ref:n,sideCar:Xv}))});Jv.classNames=qi.classNames;var Zv=function(e){if(typeof document>"u")return null;var n=Array.isArray(e)?e[0]:e;return n.ownerDocument.body},kr=new WeakMap,ci=new WeakMap,fi={},Ga=0,Kl=function(e){return e&&(e.host||Kl(e.parentNode))},Qv=function(e,n){return n.map(function(t){if(e.contains(t))return t;var r=Kl(t);return r&&e.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",e,". Doing nothing"),null)}).filter(function(t){return!!t})},eb=function(e,n,t,r){var a=Qv(n,Array.isArray(e)?e:[e]);fi[t]||(fi[t]=new WeakMap);var u=fi[t],l=[],f=new Set,h=new Set(a),m=function(C){!C||f.has(C)||(f.add(C),m(C.parentNode))};a.forEach(m);var j=function(C){!C||h.has(C)||Array.prototype.forEach.call(C.children,function(R){if(f.has(R))j(R);else try{var z=R.getAttribute(r),G=z!==null&&z!=="false",D=(kr.get(R)||0)+1,H=(u.get(R)||0)+1;kr.set(R,D),u.set(R,H),l.push(R),D===1&&G&&ci.set(R,!0),H===1&&R.setAttribute(t,"true"),G||R.setAttribute(r,"true")}catch(ee){console.error("aria-hidden: cannot operate on ",R,ee)}})};return j(n),f.clear(),Ga++,function(){l.forEach(function(C){var R=kr.get(C)-1,z=u.get(C)-1;kr.set(C,R),u.set(C,z),R||(ci.has(C)||C.removeAttribute(r),ci.delete(C)),z||C.removeAttribute(t)}),Ga--,Ga||(kr=new WeakMap,kr=new WeakMap,ci=new WeakMap,fi={})}},Tb=function(e,n,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),a=Zv(e);return a?(r.push.apply(r,Array.from(a.querySelectorAll("[aria-live], script"))),eb(r,a,t,"aria-hidden")):function(){return null}};const Ya=768;function Ib(){const[e,n]=N.useState(void 0);return N.useEffect(()=>{const t=window.matchMedia(`(max-width: ${Ya-1}px)`),r=()=>{n(window.innerWidth<Ya)};return t.addEventListener("change",r),n(window.innerWidth<Ya),()=>t.removeEventListener("change",r)},[]),!!e}export{Pb as C,Xh as D,rv as F,Eb as G,Ui as P,Jv as R,jb as T,bb as a,vb as b,gb as c,Ih as d,Ob as e,Fa as f,_b as g,wb as h,yb as i,Ab as j,dv as k,cv as l,Tb as m,Cb as n,ib as o,mb as p,xb as q,Sb as r,On as s,qr as t,Ib as u,Lh as v};
