import{j as e,t as l}from"./index.DGnL12i5.js";import{r as t}from"./index.C-6U_n5O.js";import{C as m,a as x,B as n}from"./createLucideIcon.LhHHhSz9.js";import{C as h,H as g}from"./house.bw2F3-iF.js";import{D as b,S as y}from"./share-2.Be65sOeX.js";const L=()=>{const[a,u]=t.useState(null),[w,i]=t.useState(!0),[c,d]=t.useState(null);t.useEffect(()=>{const o=new URLSearchParams(window.location.search).get("data");if(!o){d("No shared drawing data found in URL"),i(!1);return}try{const r=atob(decodeURIComponent(o)),N=JSON.parse(r);u(N)}catch(r){console.error("Share parsing error:",r),d(`Invalid or corrupted shared drawing data: ${r instanceof Error?r.message:"Unknown error"}`)}finally{i(!1)}},[]);const f=()=>{if(!a)return;const s=document.createElement("a");s.href=a.data,s.download=`${a.name.replace(/[^a-z0-9]/gi,"_").toLowerCase()}.png`,document.body.appendChild(s),s.click(),document.body.removeChild(s),l.success("Drawing downloaded!")},p=async()=>{try{await navigator.clipboard.writeText(window.location.href),l.success("Link copied to clipboard!")}catch{l.error("Failed to copy link")}},j=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return w?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("div",{className:"text-lg text-gray-600",children:"Loading shared drawing..."})]})}):c?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx(m,{className:"max-w-md w-full mx-4",children:e.jsxs(x,{className:"p-6 text-center",children:[e.jsx(h,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Unable to Load Drawing"}),e.jsx("p",{className:"text-gray-600 mb-4",children:c}),e.jsxs(n,{onClick:()=>window.location.href="/",className:"w-full",children:[e.jsx(g,{className:"w-4 h-4 mr-2"}),"Go to Wearlsketch"]})]})})}):e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"max-w-4xl mx-auto p-4 sm:p-6",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Shared Drawing"}),e.jsx("p",{className:"text-gray-600",children:"Someone shared this drawing with you using Wearlsketch"})]}),e.jsx(m,{className:"mb-6",children:e.jsxs(x,{className:"p-6",children:[e.jsx("div",{className:"mb-6 p-4 bg-amber-50 border border-amber-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(h,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-amber-800 mb-1",children:"Legacy Share Link"}),e.jsx("p",{className:"text-amber-700",children:"You're viewing an older share link. New share links are more secure and reliable. Consider re-sharing this drawing to get an updated link."})]})]})}),e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-1",children:a?.name||"Untitled Drawing"}),a?.timestamp&&e.jsxs("p",{className:"text-sm text-gray-500",children:["Shared on ",j(a.timestamp)]})]}),e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-4 max-w-full",children:a?.data&&e.jsx("img",{src:a.data,alt:a.name,className:"max-w-full max-h-[60vh] object-contain rounded"})})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[e.jsxs(n,{onClick:f,className:"flex items-center gap-2",size:"lg",children:[e.jsx(b,{className:"w-4 h-4"}),"Download Image"]}),e.jsxs(n,{onClick:p,variant:"outline",className:"flex items-center gap-2",size:"lg",children:[e.jsx(y,{className:"w-4 h-4"}),"Copy Share Link"]}),e.jsxs(n,{onClick:()=>window.location.href="https://Wearlsketch.pages.dev",variant:"outline",className:"flex items-center gap-2",size:"lg",children:[e.jsx(g,{className:"w-4 h-4"}),"Create Your Own"]})]})]})}),e.jsx("div",{className:"text-center text-gray-500 text-sm",children:e.jsxs("p",{children:["Created with"," ",e.jsx("a",{href:"https://Wearlsketch.pages.dev",className:"text-blue-600 hover:text-blue-700 font-medium",children:"Wearlsketch"})," ","- A free digital drawing app"]})})]})})};export{L as default};
