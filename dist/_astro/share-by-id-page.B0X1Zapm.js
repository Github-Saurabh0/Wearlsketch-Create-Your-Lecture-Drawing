import{j as e,t as c}from"./index.DGnL12i5.js";import{r as t}from"./index.C-6U_n5O.js";import{C as d,f as o,B as r}from"./createLucideIcon._tSXlV-y.js";import{S as p,L as N}from"./ShareService.D43wj_sx.js";import{C as y,H as x}from"./house.nBD80Al1.js";import{D as b,S as v}from"./share-2.DzUkmqod.js";const E=({shareId:l})=>{const[s,h]=t.useState(null),[u,i]=t.useState(!0),[m,n]=t.useState(null);t.useEffect(()=>{if(!l){n("Invalid share link"),i(!1);return}g()},[l]);const g=async()=>{try{i(!0);const a=await p.retrieveSharedDrawing(l);a.success&&a.data?h(a.data):n(a.message||a.error||"Failed to load shared drawing")}catch(a){console.error("Failed to load shared drawing:",a),n("This shared drawing may have expired or the link is invalid.")}finally{i(!1)}},w=()=>{if(!s)return;const a=document.createElement("a");a.href=s.data,a.download=`${s.name.replace(/[^a-z0-9]/gi,"_").toLowerCase()}.png`,document.body.appendChild(a),a.click(),document.body.removeChild(a),c.success("Drawing downloaded!")},f=async()=>{try{await navigator.clipboard.writeText(window.location.href),c.success("Link copied to clipboard!")}catch{c.error("Failed to copy link")}},j=a=>new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return u?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(N,{className:"w-12 h-12 text-blue-600 mx-auto mb-4 animate-spin"}),e.jsx("div",{className:"text-lg text-gray-600",children:"Loading shared drawing..."}),e.jsx("div",{className:"text-sm text-gray-500 mt-2",children:"This may take a moment for large drawings"})]})}):m?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx(d,{className:"max-w-md w-full mx-4",children:e.jsxs(o,{className:"p-6 text-center",children:[e.jsx(y,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Unable to Load Drawing"}),e.jsx("p",{className:"text-gray-600 mb-4",children:m}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{onClick:()=>window.location.reload(),variant:"outline",className:"w-full",children:"Try Again"}),e.jsxs(r,{onClick:()=>window.location.href="/",className:"w-full",children:[e.jsx(x,{className:"w-4 h-4 mr-2"}),"Go to Wearlsketch"]})]})]})})}):e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"max-w-4xl mx-auto p-4 sm:p-6",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Shared Drawing"}),e.jsx("p",{className:"text-gray-600",children:"Someone shared this drawing with you using Wearlsketch"})]}),e.jsx(d,{className:"mb-6",children:e.jsxs(o,{className:"p-6",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-1",children:s?.name||"Untitled Drawing"}),s?.timestamp&&e.jsxs("p",{className:"text-sm text-gray-500",children:["Shared on ",j(s.timestamp)]})]}),e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-4 max-w-full",children:s?.data&&e.jsx("img",{src:s.data,alt:s.name,className:"max-w-full max-h-[60vh] object-contain rounded",loading:"eager"})})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[e.jsxs(r,{onClick:w,className:"flex items-center gap-2",size:"lg",children:[e.jsx(b,{className:"w-4 h-4"}),"Download Image"]}),e.jsxs(r,{onClick:f,variant:"outline",className:"flex items-center gap-2",size:"lg",children:[e.jsx(v,{className:"w-4 h-4"}),"Copy Share Link"]}),e.jsxs(r,{onClick:()=>window.location.href="/",variant:"outline",className:"flex items-center gap-2",size:"lg",children:[e.jsx(x,{className:"w-4 h-4"}),"Create Your Own"]})]})]})}),e.jsx(d,{className:"mb-6 bg-blue-50 border-blue-200",children:e.jsx(o,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-600"})}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-blue-900 mb-1",children:"Secure & Temporary Sharing"}),e.jsx("p",{className:"text-blue-700",children:"This shared drawing is stored securely and will automatically expire after 30 days. Only people with this link can view it."})]})]})})}),e.jsx("div",{className:"text-center text-gray-500 text-sm",children:e.jsxs("p",{children:["Created with"," ",e.jsx("a",{href:"/",className:"text-blue-600 hover:text-blue-700 font-medium",children:"Wearlsketch"})," ","- A free digital drawing app"]})})]})})};export{E as default};
